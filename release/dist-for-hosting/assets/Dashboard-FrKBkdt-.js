var qe=Object.defineProperty;var c=(n,i)=>qe(n,"name",{value:i,configurable:!0});import{R as P,j as e,r as a}from"./react-vendor-C3J-WWQD.js";import{EMOTIONAL_STATES as le,getEmotionalState as W}from"./emotionalStates-CHdd7_6Z.js";import{m as de}from"./animations-KhWJ-ZXr.js";import{h as Ue}from"./animations-CgpoTaqC.js";import{S as Je,a as je,d as z,b as ve,c as Ne,e as Se}from"./index-rY5DbNcP.js";import{S as oe}from"./StatusIndicator-DaSkJRps.js";import{e as Ke,f as Ce,h as Qe,j as Ie,k as Ee,l as Xe}from"./ai-services-BeY8le4t.js";import{b as Ze,s as et}from"./emailService-CUnzClK5.js";import"./vendor-Dfov_G5I.js";import"./transformers-cJLoZuBt.js";const tt=c(({data:n})=>n.length===0?e.jsxs("div",{className:"bg-white dark:bg-dark-bg-secondary rounded-2xl p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary dark:text-white mb-4",children:"Mood Trends"}),e.jsx("p",{className:"text-text-secondary dark:text-white/70 text-sm",children:"No mood data available yet. Start logging your reflections to see trends."})]}):e.jsxs("div",{className:"bg-white dark:bg-dark-bg-secondary rounded-2xl p-6 space-y-4 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary dark:text-white",children:"Mood Trends"}),e.jsx("div",{className:"space-y-3",children:n.map((i,o)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl",children:i.emoji}),e.jsx("span",{className:"text-text-secondary dark:text-white/70",children:i.label})]}),e.jsxs("span",{className:"font-semibold text-text-primary dark:text-white",children:[i.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-bg-tertiary dark:bg-dark-bg-tertiary rounded-full h-2 overflow-hidden",children:e.jsx(de.div,{initial:{width:0},animate:{width:`${i.percentage}%`},transition:{duration:.5,delay:o*.1},className:"h-full rounded-full",style:{backgroundColor:i.color}})})]},`${i.state}-${o}`))})]}),"MoodTrendChart"),st=P.memo(tt),rt=c(({onSelect:n,selected:i,disabled:o=!1})=>{const g=a.useCallback(m=>{o||(Ue("light"),n(m))},[o,n]);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary dark:text-white",children:"How are you feeling?"}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-4 lg:grid-cols-8 gap-3",children:le.map((m,u)=>{const d=i===m.state;return e.jsxs(de.button,{onClick:c(()=>g(m.state),"onClick"),disabled:o,whileTap:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:u*.05},className:`
                flex flex-col items-center justify-center p-4 sm:p-5 rounded-2xl
                transition-all duration-200
                min-h-[88px] min-w-[88px] sm:min-h-[100px] sm:min-w-[100px]
                ${d?"ring-4 ring-navy-primary dark:ring-yellow-warm shadow-lg scale-105":"shadow-sm hover:shadow-md"}
                ${o?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                bg-white dark:bg-dark-bg-secondary
                border-2 ${d?"border-navy-primary dark:border-yellow-warm":"border-border-soft dark:border-dark-border"}
              `,children:[e.jsx("div",{className:"w-full h-10 sm:h-12 rounded-lg mb-2 transition-all",style:{backgroundColor:m.color,boxShadow:d?`0 0 0 2px ${m.color}, 0 2px 4px rgba(0,0,0,0.1)`:"none"}}),e.jsx("span",{className:"text-2xl sm:text-3xl mb-1",children:m.emoji}),e.jsx("span",{className:`
                text-xs sm:text-sm font-semibold text-center leading-tight
                ${d?"text-navy-primary dark:text-yellow-warm":"text-text-primary dark:text-white/70"}
              `,children:m.shortLabel})]},m.state)})})]})},"EmotionSelector"),at=P.memo(rt),nt=c(({message:n,emotion:i,feeling:o,feelingEmoji:g,onActionClick:m})=>{const[u,d]=a.useState(!1);a.useEffect(()=>{const E=setTimeout(()=>d(!0),100);return()=>clearTimeout(E)},[]);const N=a.useCallback(E=>{m?.(E)},[m]),t=o||i||"Reflection",R=g||"ðŸ’™";return e.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:u?1:0,y:u?0:20},transition:{duration:.5,ease:"easeOut"},className:"bg-navy-light/10 dark:bg-dark-bg-secondary rounded-3xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-navy-primary dark:bg-yellow-warm rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white dark:text-navy-dark text-sm",children:R})}),e.jsx("span",{className:"text-sm font-semibold text-navy-primary dark:text-yellow-warm capitalize",children:t})]}),e.jsx("p",{className:"text-text-primary dark:text-white leading-relaxed",children:n}),m&&e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsx("p",{className:"text-sm text-text-secondary dark:text-white/70",children:"Would you like to:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:c(()=>N("reflection"),"onClick"),className:"w-full bg-white dark:bg-dark-bg-tertiary text-text-primary dark:text-white rounded-xl p-4 text-left font-medium shadow-sm hover:shadow-md transition-all active:scale-98",children:"ðŸ“ Write a reflection"}),e.jsx("button",{onClick:c(()=>N("values"),"onClick"),className:"w-full bg-white dark:bg-dark-bg-tertiary text-text-primary dark:text-white rounded-xl p-4 text-left font-medium shadow-sm hover:shadow-md transition-all active:scale-98",children:"ðŸŽ¯ See your values"}),e.jsx("button",{onClick:c(()=>N("resources"),"onClick"),className:"w-full bg-white dark:bg-dark-bg-tertiary text-text-primary dark:text-white rounded-xl p-4 text-left font-medium shadow-sm hover:shadow-md transition-all active:scale-98",children:"ðŸ“ž View resources"})]})]})]})},"AIResponseBubble"),it=P.memo(nt),ot=c(({encouragementText:n,encouragementLoading:i,lastEncouragedState:o,selectedFeeling:g,lowStateCount:m,lcswConfig:u,values:d,onSelectEmotion:N,onActionClick:t,onResetEncouragement:R,onOpenFirstValue:E})=>{const T=(o?W(o):null)?.emoji||"ðŸ’™";return e.jsxs("div",{className:"bg-white dark:bg-dark-bg-secondary rounded-xl sm:rounded-2xl border border-border-soft dark:border-dark-border shadow-sm p-4 sm:p-5",children:[!n&&e.jsx(at,{onSelect:N,selected:o,disabled:i}),n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs sm:text-sm font-black text-text-primary/50 dark:text-white/50 uppercase tracking-widest",children:"Encouragement"}),e.jsx(oe,{status:i?"processing":n?"complete":"not-done",size:"sm"})]}),e.jsx(it,{message:n,emotion:o||void 0,feeling:g||void 0,feelingEmoji:T,onActionClick:c(M=>{M==="reflection"?E():t(M)},"onActionClick")}),m>=3&&(o==="drained"||o==="heavy"||o==="overwhelmed")&&e.jsx("div",{className:"mt-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium",children:["ðŸ’™ ",e.jsx("strong",{children:"Consider reaching out:"})," You've been feeling low several times. Your therapist (",u?.emergencyContact?.phone||"contact them","), a trusted friend, or the 988 Crisis & Suicide Lifeline can provide support. You don't have to go through this alone."]})}),e.jsx("button",{onClick:R,className:"w-full py-2 text-sm text-text-secondary dark:text-white/70 hover:text-text-primary dark:hover:text-white transition-colors",children:"Choose a different feeling"})]}),i&&e.jsx("div",{className:"space-y-3",children:e.jsx(Je,{lines:2,showHeader:!0})})]})},"EncourageSection"),lt=c(({value:n,emotionalState:i,selectedFeeling:o,showFeelingsList:g,reflectionText:m,goalText:u,goalFreq:d,reflectionAnalysis:N,analyzingReflection:t,coachInsight:R,valueMantra:E,loading:A,aiGoalLoading:T,lcswConfig:M,onEmotionalStateChange:b,onShowFeelingsListToggle:L,onSelectedFeelingChange:y,onReflectionTextChange:F,onGoalTextChange:h,onGoalFreqChange:$,onSuggestGoal:S,onCommit:p,getReflectionPlaceholder:f,onTriggerReflectionAnalysis:k})=>e.jsxs("div",{className:"mt-4 sm:mt-6 space-y-4 sm:space-y-6 animate-pop border-t border-border-soft dark:border-dark-border/30 pt-4 sm:pt-5",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs sm:text-sm font-black text-text-primary/50 dark:text-white/50 uppercase tracking-widest block px-1",children:"How are you feeling right now?"}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-4 lg:grid-cols-8 gap-1.5 sm:gap-2",children:le.map(s=>{const w=i===s.state;return e.jsxs("button",{onClick:c(()=>{b(s.state),L()},"onClick"),className:`flex flex-col items-center p-2 sm:p-3 rounded-lg sm:rounded-xl border-2 transition-all active:scale-95 ${w?"border-navy-primary dark:border-white shadow-md scale-105 bg-white dark:bg-dark-bg-primary":"border-border-soft dark:border-dark-border/30 hover:border-border-soft dark:hover:border-dark-border/50 bg-white dark:bg-dark-bg-primary"}`,children:[e.jsx("div",{className:"w-full h-8 sm:h-10 rounded-md mb-1.5 sm:mb-2 transition-all",style:{backgroundColor:s.color,boxShadow:w?`0 0 0 2px ${s.color}, 0 2px 4px rgba(0,0,0,0.1)`:"none"}}),e.jsx("span",{className:`text-xs sm:text-sm font-black uppercase tracking-tight text-center leading-tight ${w?"text-text-primary dark:text-white":"text-text-primary/60 dark:text-white/60"}`,children:s.shortLabel})]},s.state)})}),g&&(()=>{const s=W(i);return s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-navy-dark/60 backdrop-blur-sm",onClick:L,children:e.jsx("div",{className:"bg-white dark:bg-dark-bg-primary rounded-2xl sm:rounded-3xl shadow-2xl max-w-md w-full max-h-[80vh] overflow-hidden",onClick:c(w=>w.stopPropagation(),"onClick"),children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-black text-text-primary dark:text-white",children:s.label}),e.jsx("p",{className:"text-xs text-text-primary/60 dark:text-white/60 mt-1",children:s.reflectionPrompt})]}),e.jsx("button",{onClick:L,className:"w-8 h-8 flex items-center justify-center rounded-full bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-tertiary hover:text-text-primary dark:hover:text-white",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3",children:s.feelings.map(w=>e.jsx("button",{onClick:c(()=>{y(w),L()},"onClick"),className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl border-2 transition-all active:scale-95 ${o===w?"border-navy-primary dark:border-white font-bold text-white dark:text-text-primary":"border-border-soft dark:border-dark-border/30 bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-primary dark:text-white hover:border-yellow-warm/50"}`,style:o===w?{backgroundColor:s.color}:{},children:e.jsx("span",{className:"text-xs sm:text-sm capitalize",children:w})},w))}),o&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-warm/10 dark:bg-yellow-warm/20 rounded-xl border border-yellow-warm/30",children:e.jsxs("p",{className:"text-xs text-text-primary dark:text-white",children:[e.jsx("span",{className:"font-bold",children:"Selected:"})," ",o]})})]})})}):null})(),o&&(()=>{const s=W(i);return s?e.jsx("div",{className:"mt-2 p-2 sm:p-3 bg-yellow-warm/10 dark:bg-yellow-warm/20 rounded-lg border border-yellow-warm/30",children:e.jsxs("p",{className:"text-xs sm:text-sm text-text-primary dark:text-white",children:[e.jsx("span",{className:"font-bold",children:"Feeling:"})," ",o," (",s.shortLabel,")"]})}):null})()]}),e.jsxs("div",{className:"bg-navy-primary dark:bg-navy-primary rounded-xl sm:rounded-2xl p-3 sm:p-4 shadow-md border border-navy-primary/20 dark:border-dark-border/50 relative overflow-hidden group",children:[e.jsx("p",{className:"text-xs sm:text-sm font-black text-yellow-warm/80 uppercase tracking-widest mb-1.5",children:"Focus Lens"}),A?e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(je,{width:"75%",height:"0.625rem",className:"bg-yellow-warm/30"}),e.jsx(je,{width:"50%",height:"0.625rem",className:"bg-yellow-warm/30"})]}):e.jsxs("p",{className:"text-white dark:text-white font-medium italic text-xs sm:text-sm leading-relaxed relative z-10",children:['"',R,'"']}),e.jsx("div",{className:"absolute bottom-2 right-3 sm:right-4 text-xs sm:text-sm font-black text-yellow-warm/60 uppercase opacity-60",children:E})]}),o&&(()=>{const s=W(i);return s?e.jsx("div",{className:"bg-yellow-warm/10 dark:bg-yellow-warm/20 rounded-xl sm:rounded-2xl p-3 sm:p-4 border-2 border-yellow-warm/30",children:e.jsxs("h3",{className:"text-base sm:text-lg font-black text-text-primary dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"text-xl sm:text-2xl",children:s.emoji}),e.jsx("span",{className:"capitalize",children:o}),e.jsx("span",{className:"text-yellow-warm",children:"â€”"}),e.jsx("span",{className:"text-text-primary/70 dark:text-white/70",children:s.shortLabel})]})}):null})(),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx("label",{className:"text-xs sm:text-sm font-black text-text-primary/50 dark:text-white/50 uppercase tracking-widest",children:"1. Deep Reflection"}),e.jsx("span",{className:"text-xs sm:text-sm font-bold text-yellow-warm uppercase tracking-widest",children:"Systemic Focus"})]}),e.jsx("textarea",{value:m,onChange:c(s=>F(s.target.value),"onChange"),placeholder:f(d,o),className:"w-full p-3 sm:p-4 rounded-xl sm:rounded-2xl bg-bg-secondary dark:bg-dark-bg-primary/50 border-none focus:ring-2 focus:ring-yellow-warm/30 outline-none text-text-primary dark:text-white min-h-[140px] sm:min-h-[160px] resize-none text-sm sm:text-base leading-relaxed shadow-inner"}),e.jsx("button",{onClick:k,disabled:t||!m.trim()||!i||i==="mixed"||!o,className:"w-full py-2 sm:py-2.5 bg-yellow-warm text-text-primary rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-xs sm:text-sm shadow-sm hover:opacity-90 transition-all active:scale-[0.98] disabled:opacity-30 disabled:cursor-not-allowed",children:t?"Analyzing...":"ðŸ’¾ Save & Analyze"}),t&&e.jsx("div",{className:"text-xs sm:text-sm text-yellow-warm font-bold uppercase tracking-widest animate-pulse",children:"Analyzing reflection..."}),N&&!t&&e.jsxs("div",{className:"mt-3 p-3 sm:p-4 bg-yellow-warm/10 dark:bg-yellow-warm/20 rounded-xl border border-yellow-warm/30 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-xs sm:text-sm font-black text-yellow-warm uppercase tracking-widest",children:"Reflection Analysis"}),e.jsx(oe,{status:t?"processing":N?"complete":"not-done",size:"sm"})]}),e.jsx("button",{onClick:k,disabled:t||!m.trim()||!i||i==="mixed"||!o,className:"text-xs sm:text-sm font-black text-yellow-warm uppercase tracking-widest hover:underline disabled:opacity-30 disabled:cursor-not-allowed",title:"Refresh analysis",children:"ðŸ”„ Refresh"})]}),e.jsx("div",{className:"text-sm sm:text-base text-text-primary dark:text-white whitespace-pre-line leading-relaxed space-y-2",children:N.split(`
`).map((s,w)=>s.startsWith("##")?e.jsx("div",{className:"font-black text-yellow-warm mt-3 first:mt-0",children:s.replace("##","").trim()},w):s.startsWith("-")||/^\d+\./.test(s.trim())?e.jsx("div",{className:"ml-2",children:s},w):s.trim()?e.jsx("div",{children:s},w):e.jsx("br",{},w))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsx("label",{className:"text-xs sm:text-sm font-black text-text-primary/50 dark:text-white/50 uppercase tracking-widest",children:"2. Self-Advocacy Aim"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:S,disabled:T,className:"text-xs sm:text-sm font-black text-yellow-warm uppercase tracking-widest hover:underline disabled:opacity-50",children:T?"Suggesting...":"âœ¨ Suggest"}),e.jsx(oe,{status:T?"processing":u?"complete":"not-done",size:"sm"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("div",{className:"flex gap-1",children:["daily","weekly","monthly"].map(s=>e.jsx("button",{onClick:c(()=>$(s),"onClick"),className:`flex-1 py-1 rounded-lg text-xs sm:text-sm font-black uppercase tracking-widest transition-all ${d===s?"bg-yellow-warm text-text-primary shadow-sm":"bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-primary/40 dark:text-white/40"}`,children:s},s))}),e.jsx("textarea",{value:u,onChange:c(s=>h(s.target.value),"onChange"),placeholder:"Define one tool or boundary to implement next.",className:"w-full p-3 sm:p-4 rounded-xl sm:rounded-2xl bg-bg-secondary dark:bg-dark-bg-primary/50 border-none focus:ring-2 focus:ring-yellow-warm/30 outline-none text-text-primary dark:text-white min-h-[100px] sm:min-h-[120px] resize-none text-sm sm:text-base leading-relaxed shadow-inner"})]})]})]}),e.jsx("button",{onClick:p,disabled:!m.trim()&&!u.trim(),className:"w-full py-3 sm:py-4 bg-yellow-warm text-text-primary rounded-xl sm:rounded-2xl font-black uppercase tracking-[0.2em] shadow-lg hover:opacity-90 transition-all active:scale-[0.98] disabled:opacity-20 text-xs sm:text-sm",children:"Archive & Commit"})]}),"ReflectionForm"),dt=c(({value:n,index:i,isActive:o,isSuccess:g,valueGoals:m,emotionalState:u,selectedFeeling:d,showFeelingsList:N,reflectionText:t,goalText:R,goalFreq:E,reflectionAnalysis:A,analyzingReflection:T,coachInsight:M,valueMantra:b,loading:L,aiGoalLoading:y,cardRef:F,onToggleActive:h,onEmotionalStateChange:$,onShowFeelingsListToggle:S,onSelectedFeelingChange:p,onReflectionTextChange:f,onGoalTextChange:k,onGoalFreqChange:s,onSuggestGoal:w,onCompleteGoal:ee,onCommit:te,getReflectionPlaceholder:B,onTriggerReflectionAnalysis:se,lcswConfig:H})=>e.jsx("div",{ref:F,className:`bg-white dark:bg-dark-bg-primary rounded-xl sm:rounded-2xl border transition-all duration-300 ${o?"border-yellow-warm shadow-lg dark:shadow-xl":"border-border-soft dark:border-dark-border/30 shadow-sm hover:border-yellow-warm/50 dark:hover:border-yellow-warm/50"} ${g?"border-calm-sage dark:border-calm-sage ring-2 ring-calm-sage/20 dark:ring-calm-sage/30":""}`,children:e.jsxs("div",{className:"p-3 sm:p-4 md:p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-grow min-w-0",children:[e.jsx("div",{className:`w-7 h-7 sm:w-8 sm:h-8 rounded-lg flex items-center justify-center text-xs sm:text-sm font-black shadow-sm flex-shrink-0 ${i===0?"bg-yellow-warm text-text-primary":"bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-primary/40 dark:text-white/40"}`,children:i+1}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h3",{className:"text-sm sm:text-base font-black text-text-primary dark:text-white tracking-tight truncate",children:[n.name,d&&u&&(()=>{const Y=W(u)?.emoji||"";return e.jsxs("span",{className:"ml-2 text-yellow-warm font-bold",children:["â€” ",Y," ",d]})})()]}),e.jsx("p",{className:"text-xs font-bold text-text-primary/50 dark:text-white/50 uppercase tracking-widest",children:n.category})]})]}),e.jsx("button",{onClick:h,className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl font-black text-xs sm:text-sm uppercase tracking-widest transition-all shadow-sm active:scale-95 flex-shrink-0 ${o?"bg-navy-primary dark:bg-navy-primary text-white":"bg-yellow-warm text-text-primary hover:opacity-90"}`,children:o?"Close":"Check-in"})]}),!o&&m.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-border-soft dark:border-dark-border/30 flex gap-2 overflow-x-auto no-scrollbar pb-1",children:m.map(O=>e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2 bg-bg-secondary dark:bg-dark-bg-primary/50 px-2 sm:px-3 py-1.5 rounded-lg sm:rounded-xl border border-border-soft dark:border-dark-border/30",children:[e.jsx("p",{className:"text-xs sm:text-sm font-bold text-text-primary dark:text-white max-w-[100px] sm:max-w-[120px] truncate",children:O.text}),e.jsx("button",{onClick:c(()=>ee(O),"onClick"),className:"w-5 h-5 bg-calm-sage dark:bg-calm-sage text-white rounded-md flex items-center justify-center shadow-sm active:scale-90 flex-shrink-0",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 13l4 4L19 7"})})})]},O.id))}),o&&e.jsx(lt,{value:n,emotionalState:u,selectedFeeling:d,showFeelingsList:N,reflectionText:t,goalText:R,goalFreq:E,reflectionAnalysis:A,analyzingReflection:T,coachInsight:M,valueMantra:b,loading:L,aiGoalLoading:y,lcswConfig:H,onEmotionalStateChange:$,onShowFeelingsListToggle:S,onSelectedFeelingChange:p,onReflectionTextChange:f,onGoalTextChange:k,onGoalFreqChange:s,onSuggestGoal:w,onCommit:te,getReflectionPlaceholder:B,onTriggerReflectionAnalysis:se})]})}),"ValueCard"),ct=P.memo(dt),mt=c(({goals:n,values:i,onCompleteGoal:o,onDeleteGoal:g})=>{const m=n.filter(u=>!u.completed);return m.length===0?null:e.jsxs("div",{className:"space-y-3 pt-4 sm:pt-6 border-t border-border-soft dark:border-dark-border/30",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-sm sm:text-base font-black text-text-primary dark:text-white tracking-tight",children:"Active Commitments"}),e.jsx("p",{className:"text-xs sm:text-sm font-black text-text-primary/50 dark:text-white/50 uppercase tracking-widest",children:'The "Work"'})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:m.map(u=>{const d=i.find(N=>N.id===u.valueId);return e.jsxs("div",{className:"bg-white dark:bg-dark-bg-primary p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-border-soft dark:border-dark-border/30 shadow-sm relative",children:[e.jsx("span",{className:"absolute top-2 sm:top-3 right-3 sm:right-4 px-1.5 py-0.5 bg-yellow-warm/20 dark:bg-yellow-warm/30 text-yellow-warm rounded-md text-xs font-black uppercase tracking-widest",children:u.frequency}),e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-yellow-warm"}),e.jsx("span",{className:"text-xs sm:text-sm font-black text-text-primary/50 dark:text-white/50 uppercase tracking-widest",children:d?.name})]}),e.jsx("div",{className:"text-sm sm:text-base font-bold text-text-primary dark:text-white mb-3 sm:mb-4 leading-snug pr-12",children:u.text}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:c(()=>o(u),"onClick"),className:"flex-1 py-2 bg-calm-sage dark:bg-calm-sage text-white rounded-lg text-xs sm:text-sm font-black uppercase tracking-widest shadow-sm hover:opacity-90",children:"Done"}),e.jsx("button",{onClick:c(()=>g(u.id),"onClick"),className:"w-8 h-8 bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-primary/30 dark:text-white/30 rounded-lg hover:text-red-500 dark:hover:text-red-400 flex items-center justify-center transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]})]},u.id)})})]})},"GoalsSection"),xt=P.memo(mt),ht=c(({onClose:n,lcswConfig:i})=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 bg-navy-dark/60 backdrop-blur-sm animate-fade-in",onClick:n,children:e.jsxs("div",{className:"bg-white dark:bg-dark-bg-primary w-full max-w-lg rounded-[40px] shadow-2xl overflow-hidden animate-pop relative border border-border-soft dark:border-dark-border",onClick:c(o=>o.stopPropagation(),"onClick"),children:[e.jsx("button",{onClick:n,className:"absolute top-6 right-6 w-10 h-10 flex items-center justify-center rounded-full bg-bg-secondary dark:bg-dark-bg-secondary text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors z-10",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"p-8 sm:p-10 space-y-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ“ž"}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-black text-text-primary dark:text-white tracking-tight",children:"Crisis Resources"}),e.jsx("p",{className:"text-sm sm:text-base text-text-primary/60 dark:text-white/60",children:"You're not alone. Help is available 24/7."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 sm:p-5 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-black text-red-800 dark:text-red-300 mb-2",children:"ðŸš¨ Emergency Services"}),e.jsxs("div",{className:"space-y-2 text-sm text-red-700 dark:text-red-200",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"911"})," - For immediate emergencies"]}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-300",children:"Call 911 if you or someone else is in immediate danger."})]})]}),e.jsxs("div",{className:"bg-yellow-warm/10 dark:bg-yellow-warm/20 border-l-4 border-yellow-warm p-4 sm:p-5 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-black text-text-primary dark:text-white mb-3",children:"ðŸ“ž Crisis Hotlines (24/7, Free, Confidential)"}),e.jsxs("div",{className:"space-y-3 text-sm text-text-primary dark:text-white",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-base",children:"988 Suicide & Crisis Lifeline"}),e.jsxs("p",{className:"text-xs text-text-secondary dark:text-text-secondary mt-1",children:["Dial ",e.jsx("strong",{children:"988"})," or text 988. Available 24/7 for anyone in suicidal crisis or emotional distress."]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-base",children:"Crisis Text Line"}),e.jsxs("p",{className:"text-xs text-text-secondary dark:text-text-secondary mt-1",children:["Text ",e.jsx("strong",{children:"HOME"})," to ",e.jsx("strong",{children:"741741"}),". Free, 24/7 crisis support via text message."]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-base",children:"National Domestic Violence Hotline"}),e.jsxs("p",{className:"text-xs text-text-secondary dark:text-text-secondary mt-1",children:["Call ",e.jsx("strong",{children:"1-800-799-SAFE (7233)"})," or text START to 88788. 24/7 support for domestic violence."]})]})]})]}),i?.emergencyContact?.phone&&e.jsxs("div",{className:"bg-navy-primary/10 dark:bg-navy-primary/20 border-l-4 border-navy-primary p-4 sm:p-5 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-black text-text-primary dark:text-white mb-2",children:"ðŸ‘¤ Your Therapist"}),e.jsxs("div",{className:"space-y-2 text-sm text-text-primary dark:text-white",children:[i.emergencyContact.phone&&e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",i.emergencyContact.phone]}),i.emergencyContact.email&&e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",i.emergencyContact.email]}),i.emergencyContact.name&&e.jsxs("p",{className:"text-xs text-text-secondary dark:text-text-secondary mt-1",children:["Contact: ",i.emergencyContact.name]})]})]}),e.jsx("div",{className:"bg-bg-secondary dark:bg-dark-bg-secondary p-4 sm:p-5 rounded-xl border border-border-soft dark:border-dark-border",children:e.jsxs("p",{className:"text-xs text-text-secondary dark:text-text-secondary leading-relaxed",children:[e.jsx("strong",{children:"Remember:"})," These resources are available 24/7. If you're in crisis, don't wait - reach out immediately. Your safety and wellbeing are important."]})})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:n,className:"w-full py-4 bg-navy-primary dark:bg-navy-primary text-white dark:text-white rounded-[24px] font-black uppercase tracking-[0.2em] shadow-xl hover:opacity-90 transition-all active:scale-[0.98]",children:"Got it"})})]})]})}),"CrisisResourcesModal");function Re(n,i){const[o,g]=a.useState(n);return a.useEffect(()=>{const m=setTimeout(()=>{g(n)},i);return()=>{clearTimeout(m)}},[n,i]),o}c(Re,"useDebounce");function ut(n,i,o,g,m,u){const[d,N]=a.useState(null),[t,R]=a.useState(!1),[E,A]=a.useState(null),[T,M]=a.useState("âœ¨"),[b,L]=a.useState("mixed"),[y,F]=a.useState(null),[h,$]=a.useState(!1),S=Re(T,500),[p,f]=a.useState(""),[k,s]=a.useState(""),[w,ee]=a.useState("daily"),[te,B]=a.useState(!1),[se,H]=a.useState(null),[O,Y]=a.useState(null),[G,ce]=a.useState(null),[Te,me]=a.useState(!1),[De,J]=a.useState(null),[Le,xe]=a.useState(!1),[$e,he]=a.useState(null),[q,ue]=a.useState(0);Re(p,2e3);const re=a.useRef({}),[_,pe]=a.useState(null),[ae,ge]=a.useState(null),[gt,be]=a.useState(null),[bt,fe]=a.useState(null),K=a.useRef(!1),Q=a.useCallback(()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const l=Math.random()*16|0;return(r==="x"?l:l&3|8).toString(16)}),[]),C=a.useCallback(async(r,l)=>{try{const x=sessionStorage.getItem("userId")||"anonymous",j={id:Q(),timestamp:new Date().toISOString(),type:r,sessionId:_||"no-session",valueId:d||void 0,emotionalState:b||void 0,selectedFeeling:y||void 0,metadata:l};await z.saveUserInteraction(j)}catch(x){console.error("Failed to save interaction:",x)}},[_,d,b,y,Q]),Ae=a.useCallback(r=>{L(r),d&&r!=="mixed"&&C("feeling_selected",{emotionalState:r})},[d,C]),Me=a.useCallback(r=>{F(r),d&&r&&C("sub_feeling_selected",{selectedFeeling:r})},[d,C]),ye=a.useCallback(async r=>{try{const l=sessionStorage.getItem("userId")||"anonymous",x=Q(),j=Date.now();pe(x),ge(j),fe(r),be(b),K.current=!1;const v={id:x,userId:l,startTimestamp:new Date().toISOString(),valueId:r,initialEmotionalState:b||void 0,goalCreated:!1};await z.saveSession(v),await C("card_opened")}catch(l){console.error("Failed to start session:",l)}},[b,Q,C]),X=a.useCallback(async(r,l=!1)=>{if(!(!_||!ae))try{const x=sessionStorage.getItem("userId")||"anonymous",j=Date.now(),v=Math.floor((j-ae)/1e3);await z.updateSession(_,{endTimestamp:new Date().toISOString(),finalEmotionalState:b||void 0,reflectionLength:p.trim().length||void 0,goalCreated:l,duration:v}),await C("card_closed",{duration:v,goalCreated:l}),pe(null),ge(null),fe(null),be(null),K.current=!1}catch(x){console.error("Failed to end session:",x)}},[_,ae,b,p,C]);a.useEffect(()=>{if(d)ye(d);else if(_){const r=n.find(l=>l.id===d)?.id||"";r&&X(r,!1)}},[d,_,ye,X,n]),a.useEffect(()=>{d&&Promise.all([ve(`draft_reflection_${d}`),ve(`draft_goal_${d}`)]).then(([r,l])=>{r&&f(r),l&&s(l)}).catch(console.error)},[d]),a.useEffect(()=>{d&&(Ne(`draft_reflection_${d}`,p).catch(console.error),Ne(`draft_goal_${d}`,k).catch(console.error),p.trim().length>0&&!K.current&&(K.current=!0,C("reflection_started")))},[p,k,d,C]);const Fe=a.useCallback(async()=>{const r=p.trim().length>20,l=b&&b!=="mixed",x=y!==null;if(!r){console.warn("Reflection text is too short for analysis");return}if(!l||!x){console.warn("Please select both feeling and sub-feeling before analyzing");return}const j=W(b),v=j&&y?`Emotional State: ${j.label} (${y})

`:"",I=v?`${v}Deep Reflection:
${p}`:p;me(!0);try{const V=await Ke(I,w,g,b,y);ce(V)}catch(V){console.error("Reflection analysis error:",V),ce(null)}finally{me(!1)}},[p,b,y,w,g]);a.useEffect(()=>{if(d){const r=n.find(l=>l.id===d);if(r){R(!0);const l=b&&y?Ce(b,y,q,g,{recentJournalText:o.slice(0,3).map(x=>x.note||x.deepReflection||"").join(" ").substring(0,500),timeOfDay:(()=>{const x=new Date().getHours();return x<12?"morning":x<18?"afternoon":x<22?"evening":"night"})(),userPatterns:{frequentStates:[],progress:0}}):Qe(r,S,g);Promise.all([l,Ie(r)]).then(([x,j])=>{H(x),Y(j),R(!1)}).catch(x=>{console.error("AI Motivation Error:",x),H("There was an issue connecting to the AI coach. Focusing on the present moment is a powerful step."),Y("Be Here Now"),R(!1)})}}else H(null)},[S,d,n,g,b,y,q,o]);const[ne,we]=a.useState(null);a.useEffect(()=>{if(n.length>0&&!ne){const r=n[0];Ie(r).then(l=>we(l)).catch(()=>we("Be Here Now"))}},[n,ne]),a.useEffect(()=>{d&&re.current[d]&&setTimeout(()=>{re.current[d]?.scrollIntoView({behavior:"smooth",block:"center"})},100)},[d]);const Ve=a.useCallback((r,l)=>{const x=l?`I feel ${l} because...

What specific situation, thought, or experience is connected to feeling ${l}?

How does feeling ${l} show up in my body, thoughts, or behaviors?

What would help me navigate feeling ${l} in a way that aligns with my values?`:null;if(x)return x;const j=["The Hour: Dominant mood 'flavor'? Thought, person, or sensation triggered it?","The Day: When did I feel 'connected' vs 'checked out'?","Daily Win: One small boundary set or self-care moment followed through?","Energy Audit: What interaction drained the battery? How to recharge?"].join(`

`),v=["The Narrative: If this week was a book chapter, what would the title be?","Coping Check: Which therapy tools felt like life jackets? Which felt like anchors?","Social Environment: How did my body feel after leaving specific social spaces?","Unfinished Business: What am I still 'chewing on' or feeling heavy about?"].join(`

`),I=["Growth Marker: What feels slightly less daunting than it did 30 days ago?","Recurring Theme: What 'broken record' thought kept appearing? What is it saying?","External Impact: How have systemic factors (finances, work) influenced me?","Goal Alignment: Am I moving toward my treatment plan version of self?"].join(`

`);return r==="weekly"?v:r==="monthly"||r==="quarterly"?I:j},[]),Ge=a.useCallback(async r=>{B(!0),await C("suggest_clicked",{hasReflection:p.trim().length>0});try{const l=Ee(p,g);if(l.isCrisis&&l.recommendedAction!=="continue"){s(`### Safety First

âš ï¸ Your reflection contains concerning content. Please contact your therapist or emergency services if needed.

Emergency: ${g?.emergencyContact?.phone||"911"}
Crisis Line: 988`),B(!1);return}const x=b&&y?`Emotional State: ${b}
Selected Feeling: ${y}

`:b?`Emotional State: ${b}

`:"",j=p.trim()?`${x}Deep Reflection:
${p}

${G?`Reflection Analysis:
${G}`:""}`:x+(G||""),v=await Xe(r,w,j,g,b,y);s(v)}catch(l){console.error("AI Goal Error:",l),s("Error suggesting a goal. Try writing a small, simple one yourself!")}finally{B(!1)}},[p,G,w,b,y,g,C]),_e=a.useCallback(async r=>{const l={...r,completed:!0};if(m({id:Date.now().toString()+"-done",date:new Date().toISOString(),valueId:r.valueId,livedIt:!0,note:`Achieved Commitment: ${r.text.substring(0,40)}...`,type:"goal-completion",goalText:r.text}),u(i.map(x=>x.id===r.id?l:x)),g?.emergencyContact?.email){const x=[g.emergencyContact.email],j=Ze(i.map(v=>v.id===r.id?l:v),n,[l],!0);await et(j,x)}},[i,n,g,m,u]),We=a.useCallback(r=>{u(i.filter(l=>l.id!==r))},[i,u]),He=a.useCallback(async r=>{xe(!0),he(r),J(null);let l;r==="drained"||r==="heavy"||r==="overwhelmed"?(l=q+1,ue(l)):(l=0,ue(0));const x=new Date().getHours(),j=x<12?"morning":x<18?"afternoon":x<22?"evening":"night",v=o.slice(0,3).map(I=>I.note||I.deepReflection||"").filter(Boolean).join(" ").substring(0,500);try{const I=await z.getFeelingLogs(30),V=I.map(D=>D.emotionalState).reduce((D,Z)=>(D[Z]=(D[Z]||0)+1,D),{}),ie=Object.entries(V).sort((D,Z)=>Z[1]-D[1]).slice(0,3).map(([D])=>D),U=I.slice(0,10),ze=["calm","hopeful","positive","energized"],Pe=U.filter(D=>ze.includes(D.emotionalState)).length,Be=U.length>0?Pe/U.length*100:0,ke=await Ce(r,y,l,g,{recentJournalText:v||void 0,timeOfDay:j,userPatterns:{frequentStates:ie,progress:Math.round(Be)}});J(ke);const Ye={id:Date.now().toString()+"-feeling",timestamp:new Date().toISOString(),emotionalState:r,selectedFeeling:y,aiResponse:ke,isAIResponse:!0,lowStateCount:l};try{await z.saveFeelingLog(Ye)}catch(D){console.error("Failed to save feeling log:",D)}}catch(I){console.error("Encouragement generation error:",I);const V="You're doing important work. Keep going, one step at a time.";J(V);const ie={id:Date.now().toString()+"-feeling",timestamp:new Date().toISOString(),emotionalState:r,selectedFeeling:y,aiResponse:V,isAIResponse:!1,lowStateCount:l};try{await z.saveFeelingLog(ie)}catch(U){console.error("Failed to save feeling log:",U)}}finally{xe(!1)}},[o,y,q,g]),Oe=a.useCallback(async r=>{if(!p.trim()&&!k.trim())return;const l=`${p} ${k}`.trim(),x=Ee(l);if(x.isCrisis&&x.severity==="critical"){const I=`ðŸš¨ CRISIS DETECTED

Your entry contains crisis indicators. Please:

1. Contact emergency services: 911
2. Contact your therapist: ${g?.emergencyContact?.phone||"Your therapist's emergency line"}
3. Crisis hotline: 988

This app cannot provide crisis support. Please connect with a professional immediately.`;alert(I)}const j=new Date().toISOString(),v=k.trim().length>0;if(v){const I={id:Date.now().toString()+"-goal",valueId:r,text:k,frequency:w,completed:!1,createdAt:j,updates:[]};u([I,...i]),await C("goal_created",{goalText:k.substring(0,50)})}await C("reflection_committed",{reflectionLength:p.trim().length,goalCreated:v}),m({id:Date.now().toString()+"-log",date:j,valueId:r,livedIt:!0,note:p.trim()||"Observed without judgment.",mood:T,type:k.trim()?"goal-update":"standard",goalText:k.trim()||void 0,deepReflection:p.trim()||void 0,reflectionAnalysis:G||void 0,emotionalState:b,selectedFeeling:y||void 0}),await X(r,v),L("mixed"),F(null),Se(`draft_reflection_${r}`).catch(console.error),Se(`draft_goal_${r}`).catch(console.error),A(r),setTimeout(()=>A(null),2e3),f(""),s(""),H(null),Y(null),N(null)},[p,k,w,b,y,T,G,g,i,m,u,C,X]);return{activeValueId:d,loading:t,lastLoggedId:E,emotionalState:b,selectedFeeling:y,showFeelingsList:h,reflectionText:p,goalText:k,goalFreq:w,aiGoalLoading:te,coachInsight:se,valueMantra:O,reflectionAnalysis:G,analyzingReflection:Te,encouragementText:De,encouragementLoading:Le,lastEncouragedState:$e,lowStateCount:q,topValueMantra:ne,valueCardRefs:re,setActiveValueId:N,setEmotionalState:Ae,setSelectedFeeling:Me,setShowFeelingsList:$,setReflectionText:f,setGoalText:s,setGoalFreq:ee,handleSuggestGoal:Ge,handleCompleteGoal:_e,handleDeleteGoal:We,handleEmotionalEncourage:He,handleCommit:Oe,getReflectionPlaceholder:Ve,triggerReflectionAnalysis:Fe,resetEncouragement:a.useCallback(()=>{J(null),he(null)},[])}}c(ut,"useDashboard");const pt=c(({values:n,onLog:i,goals:o,onUpdateGoals:g,logs:m,lcswConfig:u,onNavigate:d,onReset:N})=>{const t=ut(n,o,m,u,i,g),[R,E]=a.useState(!1);a.useEffect(()=>{const h=c(()=>{t.setActiveValueId(null)},"handleReset");return window.__dashboardReset=h,()=>{delete window.__dashboardReset}},[t]);const A=c(()=>{const h=new Date().getHours();return h<12?"Good morning":h<18?"Good afternoon":"Good evening"},"getGreeting"),T=c(()=>{const h=new Date().getHours();return h<12?"ðŸŒ…":h<18?"â˜€ï¸":"ðŸŒ™"},"getTimeEmoji"),M=a.useMemo(()=>{if(m.length===0)return[];const h=new Date;h.setDate(h.getDate()-7);const $=m.filter(f=>new Date(f.date)>=h),S={};$.forEach(f=>{f.emotionalState&&(S[f.emotionalState]=(S[f.emotionalState]||0)+1)});const p=$.length||1;return le.map(f=>{const k=S[f.state]||0;return{state:f.state,emoji:f.emoji,label:f.shortLabel,percentage:Math.round(k/p*100),color:f.color}}).filter(f=>f.percentage>0).sort((f,k)=>k.percentage-f.percentage).slice(0,4)},[m]),b=n.length>0?n[0]:null,L=t.valueMantra||t.topValueMantra||"Be Here Now",y=c(h=>{h==="reflection"?n.length>0&&t.setActiveValueId(n[0].id):h==="values"?d&&d("values"):h==="resources"&&E(!0)},"handleActionClick"),F=c(()=>{n.length>0&&(t.lastEncouragedState&&t.setEmotionalState(t.lastEncouragedState),t.setActiveValueId(n[0].id))},"handleOpenFirstValue");return e.jsxs("div",{className:"space-y-4 sm:space-y-6 animate-fade-in pb-20 lg:pb-12",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-black text-text-primary dark:text-white",children:[A()," ",T()]}),e.jsx("p",{className:"text-text-secondary dark:text-white/70",children:"How are you feeling today?"})]}),b&&e.jsx("div",{className:"bg-gradient-to-br from-yellow-warm/20 to-yellow-light/20 dark:from-yellow-warm/10 dark:to-yellow-light/10 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:e.jsx("div",{className:"flex items-center justify-between gap-2 sm:gap-3",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsx("span",{className:"text-xl sm:text-2xl flex-shrink-0",children:"ðŸŽ¯"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-text-primary dark:text-white truncate",children:"Today's Focus"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-text-primary dark:text-white truncate",children:b.name})]}),e.jsxs("p",{className:"text-xs sm:text-sm text-text-secondary dark:text-white/70 italic truncate",children:['"',L,'"']})]})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsx("div",{}),e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsx("p",{className:"text-xs sm:text-sm font-black text-yellow-warm uppercase tracking-widest",children:"Active Focus"}),e.jsxs("p",{className:"text-sm sm:text-base font-black text-text-primary dark:text-white leading-tight",children:[n.length," Core Values"]})]})]}),e.jsx(ot,{encouragementText:t.encouragementText,encouragementLoading:t.encouragementLoading,lastEncouragedState:t.lastEncouragedState,selectedFeeling:t.selectedFeeling,lowStateCount:t.lowStateCount,lcswConfig:u,values:n,onSelectEmotion:t.handleEmotionalEncourage,onActionClick:y,onResetEncouragement:t.resetEncouragement,onOpenFirstValue:F}),M.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary dark:text-white",children:"ðŸ“Š Your Week at a Glance"}),e.jsx(st,{data:M})]}),m.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary dark:text-white",children:"âœ¨ Recent Reflections"}),e.jsx("div",{className:"space-y-2",children:m.slice(0,3).map(h=>{const S=new Date(h.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),p=n.find(s=>s.id===h.valueId),f=h.emotionalState?W(h.emotionalState):null,k=f?f.emoji:"ðŸ“";return e.jsxs("div",{className:"bg-white dark:bg-dark-bg-secondary rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-text-secondary dark:text-white/70",children:S}),e.jsx("span",{className:"text-xl",children:k})]}),e.jsx("p",{className:"text-text-primary dark:text-white line-clamp-2 text-sm",children:h.note||h.deepReflection||"Reflection entry"}),p&&e.jsx("p",{className:"text-xs text-text-tertiary dark:text-white/50 mt-1",children:p.name})]},h.id)})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:n.map((h,$)=>{const S=t.activeValueId===h.id,p=t.lastLoggedId===h.id,f=o.filter(s=>s.valueId===h.id&&!s.completed),k=n.find(s=>s.id===t.activeValueId);return e.jsx(ct,{value:h,index:$,isActive:S,isSuccess:p,valueGoals:f,emotionalState:t.emotionalState,selectedFeeling:t.selectedFeeling,showFeelingsList:t.showFeelingsList,reflectionText:t.reflectionText,goalText:t.goalText,goalFreq:t.goalFreq,reflectionAnalysis:t.reflectionAnalysis,analyzingReflection:t.analyzingReflection,coachInsight:t.coachInsight,valueMantra:t.valueMantra,loading:t.loading,aiGoalLoading:t.aiGoalLoading,cardRef:c(s=>{t.valueCardRefs.current[h.id]=s},"cardRef"),onToggleActive:c(()=>{S&&(t.setEmotionalState("mixed"),t.setSelectedFeeling(null),t.setShowFeelingsList(!1)),t.setActiveValueId(S?null:h.id)},"onToggleActive"),onEmotionalStateChange:c(s=>t.setEmotionalState(s),"onEmotionalStateChange"),onShowFeelingsListToggle:c(()=>t.setShowFeelingsList(!t.showFeelingsList),"onShowFeelingsListToggle"),onSelectedFeelingChange:c(s=>t.setSelectedFeeling(s),"onSelectedFeelingChange"),onReflectionTextChange:c(s=>t.setReflectionText(s),"onReflectionTextChange"),onGoalTextChange:c(s=>t.setGoalText(s),"onGoalTextChange"),onGoalFreqChange:c(s=>t.setGoalFreq(s),"onGoalFreqChange"),onSuggestGoal:c(()=>k&&t.handleSuggestGoal(k),"onSuggestGoal"),onCompleteGoal:t.handleCompleteGoal,onCommit:c(()=>t.handleCommit(h.id),"onCommit"),getReflectionPlaceholder:t.getReflectionPlaceholder,onTriggerReflectionAnalysis:t.triggerReflectionAnalysis,lcswConfig:u},h.id)})}),e.jsx(xt,{goals:o,values:n,onCompleteGoal:t.handleCompleteGoal,onDeleteGoal:t.handleDeleteGoal}),R&&e.jsx(ht,{onClose:c(()=>E(!1),"onClose"),lcswConfig:u})]})},"Dashboard"),Rt=P.memo(pt);export{Rt as default};
