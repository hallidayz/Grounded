const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-C2MrqrfV.js","assets/react-vendor-CQK77wC2.js","assets/vendor-JrpKAf2Q.js","assets/emotionalStates-BgybEvQ3.js","assets/animations-BWn9_Xek.js","assets/animations-CweKPWyX.js","assets/ai-services-Dyqhbvbu.js","assets/emailService-6vz86vpM.js","assets/ReportView-CnnHcIaX.js","assets/VirtualList-Cwbcv78v.js","assets/VaultControl-BxmuxeCp.js","assets/LCSWConfig-CDUAZG3u.js","assets/ntfyService-DcHFu_a1.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,b as r}from"./react-vendor-CQK77wC2.js";import{a as s,b as a,A as n,m as i,_ as o,p as l,n as d,s as c,i as x}from"./ai-services-Dyqhbvbu.js";import"./vendor-JrpKAf2Q.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const m=[{id:"v1",name:"Integrity",description:"Being honest and having strong moral principles.",category:"Character"},{id:"v19",name:"Authenticity",description:"Being true to one's own personality or spirit.",category:"Character"},{id:"v24",name:"Resilience",description:"The capacity to recover quickly from difficulties.",category:"Character"},{id:"v25",name:"Responsibility",description:"Having a duty to deal with something.",category:"Character"},{id:"v26",name:"Courage",description:"The ability to do something that frightens one.",category:"Character"},{id:"v27",name:"Humility",description:"A modest or low view of one's own importance.",category:"Character"},{id:"v2",name:"Family",description:"Prioritizing the well-being of loved ones.",category:"Relationships"},{id:"v7",name:"Kindness",description:"Being friendly, generous, and considerate.",category:"Relationships"},{id:"v11",name:"Respect",description:"Deep admiration for someone or something.",category:"Relationships"},{id:"v20",name:"Compassion",description:"Concern for the sufferings or misfortunes of others.",category:"Relationships"},{id:"v23",name:"Loyalty",description:"Giving or showing firm and constant support.",category:"Relationships"},{id:"v28",name:"Community",description:"A feeling of fellowship with others.",category:"Relationships"},{id:"v3",name:"Creativity",description:"Using imagination to create something new.",category:"Expression"},{id:"v21",name:"Humor",description:"The quality of being amusing or comic.",category:"Expression"},{id:"v29",name:"Artistry",description:"Creative skill or ability.",category:"Expression"},{id:"v30",name:"Curiosity",description:"A strong desire to know or learn something.",category:"Expression"},{id:"v5",name:"Health",description:"Maintaining physical and mental well-being.",category:"Well-being"},{id:"v10",name:"Peace",description:"Freedom from disturbance; tranquility.",category:"Well-being"},{id:"v9",name:"Nature",description:"Appreciation and care for the natural world.",category:"Environment"},{id:"v31",name:"Balance",description:"Stability or even distribution of effort.",category:"Well-being"},{id:"v32",name:"Sustainability",description:"Avoiding depletion of natural resources.",category:"Environment"},{id:"v8",name:"Learning",description:"The acquisition of knowledge or skills.",category:"Growth"},{id:"v14",name:"Spirituality",description:"Connection to something bigger than oneself.",category:"Growth"},{id:"v17",name:"Wisdom",description:"Experience, knowledge, and good judgment.",category:"Growth"},{id:"v33",name:"Open-Mindedness",description:"Willingness to consider new ideas.",category:"Growth"},{id:"v15",name:"Success",description:"The accomplishment of an aim or purpose.",category:"Achievement"},{id:"v16",name:"Wealth",description:"An abundance of valuable possessions.",category:"Achievement"},{id:"v22",name:"Leadership",description:"Leading a group or an organization.",category:"Influence"},{id:"v34",name:"Impact",description:"Having a strong effect on someone or something.",category:"Influence"},{id:"v4",name:"Freedom",description:"The power to act, speak, or think without restraint.",category:"Autonomy"},{id:"v6",name:"Justice",description:"Upholding what is right and fair.",category:"Society"},{id:"v13",name:"Service",description:"Helping others and contributing to society.",category:"Society"},{id:"v18",name:"Adventure",description:"Engaging in exciting experiences.",category:"Autonomy"}],p=({initialSelected:r,onComplete:s,isReorderingOnly:a=!1})=>{const[n,i]=e.useState(r),[o,l]=e.useState(null),[d,c]=e.useState(new Set),[x,p]=e.useState(r.length>0?"sort":"pick"),[h,u]=e.useState(null),[g,b]=e.useState(null),y=e.useMemo(()=>m.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{}),[]),w=e.useMemo(()=>n.map(e=>m.find(t=>t.id===e)).filter(Boolean),[n]),k=(e,t)=>{const r=[...n],s="up"===t?e-1:e+1;s<0||s>=r.length||([r[e],r[s]]=[r[s],r[e]],i(r))};return t.jsxs("div",{className:"max-w-2xl mx-auto space-y-3 sm:space-y-4 animate-fade-in pb-20 sm:pb-24",children:[t.jsxs("div",{className:"text-center space-y-2 px-3 sm:px-0",children:[t.jsxs("h1",{className:"text-lg sm:text-xl font-black text-text-primary dark:text-white tracking-tight",children:["pick"===x?"Define Your ":"Rank Your ",t.jsx("span",{className:"text-yellow-warm",children:"Compass"})]}),t.jsxs("div",{className:"flex justify-center gap-1 mt-1",children:[t.jsx("button",{onClick:()=>p("pick"),className:"px-3 py-1 rounded-lg font-bold text-[9px] uppercase tracking-widest transition-all "+("pick"===x?"bg-yellow-warm text-text-primary shadow-sm":"bg-white dark:bg-dark-bg-primary text-text-primary/60 dark:text-white/60 border border-border-soft dark:border-dark-border/30"),children:"Selection"}),t.jsx("button",{onClick:()=>p("sort"),disabled:0===n.length,className:`px-3 py-1 rounded-lg font-bold text-[9px] uppercase tracking-widest transition-all ${"sort"===x?"bg-yellow-warm text-text-primary shadow-sm":"bg-white dark:bg-dark-bg-primary text-text-primary/60 dark:text-white/60 border border-border-soft dark:border-dark-border/30"} disabled:opacity-30`,children:"Priority"})]})]}),"pick"===x?t.jsx("div",{className:"space-y-3",children:Object.entries(y).map(([e,r])=>{const s=d.has(e),a=r.filter(e=>n.includes(e.id)).length;return t.jsxs("section",{className:"bg-white dark:bg-dark-bg-primary rounded-xl border border-border-soft dark:border-dark-border/30 overflow-hidden shadow-sm",children:[t.jsxs("button",{onClick:()=>(e=>{c(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})})(e),className:"w-full flex items-center justify-between p-3 bg-bg-secondary/50 dark:bg-dark-bg-primary/50 hover:bg-bg-secondary dark:hover:bg-dark-bg-primary transition-colors text-left",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h2",{className:"text-[10px] font-black text-text-primary dark:text-white uppercase tracking-widest",children:e}),a>0&&t.jsx("span",{className:"bg-yellow-warm text-text-primary text-[7px] font-black px-1.5 py-0.5 rounded uppercase",children:a})]}),t.jsx("svg",{className:"w-3 h-3 text-text-primary/40 dark:text-white/40 transition-transform "+(s?"-rotate-90":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M19 9l-7 7-7-7"})})]}),t.jsx("div",{className:"transition-all duration-300 "+(s?"max-h-0 opacity-0":"max-h-[1000px] opacity-100 p-2 sm:p-3"),children:t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:r.map(e=>{const r=n.includes(e.id);return t.jsxs("button",{onClick:()=>{return t=e.id,void i(e=>e.includes(t)?e.filter(e=>e!==t):e.length>=10?(l(t),setTimeout(()=>l(null),500),e):[...e,t]);var t},className:`p-2 sm:p-3 rounded-lg sm:rounded-xl border text-left transition-all ${r?"border-yellow-warm bg-yellow-warm/10 dark:bg-yellow-warm/20 shadow-sm":"border-border-soft dark:border-dark-border/30 bg-white dark:bg-dark-bg-primary/50 hover:border-yellow-warm/50"} ${o===e.id?"animate-shake":""}`,children:[t.jsx("h3",{className:"font-black text-[10px] sm:text-[11px] tracking-tight text-text-primary dark:text-white",children:e.name}),t.jsxs("p",{className:"text-[8px] leading-tight font-medium mt-0.5 "+(r?"text-text-primary/70 dark:text-white/70":"text-text-primary/50 dark:text-white/50"),children:[e.description.substring(0,45),"..."]})]},e.id)})})})]},e)})}):t.jsx("div",{className:"max-w-md mx-auto space-y-2 animate-pop",children:w.map((e,r)=>{const s=h===r,a=g===r;return t.jsxs("div",{draggable:!0,onDragStart:()=>(e=>u(e))(r),onDragOver:e=>((e,t)=>{e.preventDefault(),h!==t&&b(t)})(e,r),onDragLeave:()=>b(null),onDrop:()=>(e=>{if(null===h||h===e)return u(null),void b(null);const t=[...n],r=t.splice(h,1)[0];t.splice(e,0,r),i(t),u(null),b(null)})(r),className:`flex items-center gap-2 sm:gap-3 bg-white dark:bg-dark-bg-primary p-2 sm:p-2.5 rounded-lg sm:rounded-xl border transition-all cursor-grab active:cursor-grabbing ${s?"opacity-30 scale-95 border-dashed border-yellow-warm/50":"border-border-soft dark:border-dark-border/30 shadow-sm"} ${a?"border-yellow-warm":""}`,children:[t.jsxs("div",{className:"flex flex-col gap-0.5 items-center bg-bg-secondary dark:bg-dark-bg-primary/50 p-1 rounded-md",children:[t.jsx("button",{onClick:e=>{e.stopPropagation(),k(r,"up")},disabled:0===r,className:"text-text-primary/30 dark:text-white/30 hover:text-yellow-warm disabled:opacity-0",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 15l7-7 7 7"})})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),k(r,"down")},disabled:r===n.length-1,className:"text-text-primary/30 dark:text-white/30 hover:text-yellow-warm disabled:opacity-0",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M19 9l-7 7-7-7"})})})]}),t.jsxs("div",{className:"flex-grow select-none flex items-center gap-2 min-w-0",children:[t.jsx("span",{className:"text-[8px] font-black w-4 h-4 rounded-full flex items-center justify-center flex-shrink-0 "+(0===r?"bg-yellow-warm text-text-primary":"bg-navy-primary dark:bg-navy-primary text-white dark:text-white"),children:r+1}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h4",{className:"font-black text-text-primary dark:text-white text-[11px] sm:text-[12px] tracking-tight truncate",children:e.name}),t.jsx("p",{className:"text-[7px] text-text-primary/50 dark:text-white/50 font-bold uppercase tracking-widest",children:e.category})]})]}),t.jsx("div",{className:"text-text-primary/20 dark:text-white/20 pr-1 flex-shrink-0",children:t.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})})]},e.id)})}),t.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-3 z-30 safe-area-inset-bottom",children:t.jsxs("div",{className:"max-w-md mx-auto bg-white/95 dark:bg-dark-bg-primary/95 backdrop-blur shadow-2xl border border-border-soft dark:border-dark-border/30 rounded-xl sm:rounded-2xl p-2 flex items-center justify-between",children:[t.jsxs("div",{className:"px-2 sm:px-3",children:[t.jsx("p",{className:"text-[7px] text-text-primary/50 dark:text-white/50 font-black uppercase tracking-widest",children:"Strength"}),t.jsxs("p",{className:"text-[10px] font-bold text-text-primary dark:text-white",children:[n.length,"/10"]})]}),t.jsxs("button",{onClick:()=>s(n),disabled:0===n.length,className:"px-6 sm:px-8 py-2 sm:py-2.5 rounded-lg sm:rounded-xl font-black text-[8px] sm:text-[9px] uppercase tracking-widest transition-all "+(n.length>0?"bg-yellow-warm text-text-primary hover:opacity-90":"bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-primary/30 dark:text-white/30"),children:[t.jsx("span",{className:"hidden sm:inline",children:"Confirm Compass"}),t.jsx("span",{className:"sm:hidden",children:"Confirm"})]})]})})]})},h=[];let u=!1,g=null,b=null;const y=e=>{k("error",e.message,{filename:e.filename,lineno:e.lineno,colno:e.colno,stack:e.error?.stack})},w=e=>{k("error",`Unhandled Promise Rejection: ${e.reason}`,{reason:e.reason,stack:e.reason?.stack})};function k(e,t,r){const s={timestamp:(new Date).toISOString(),level:e,message:t,details:r,stack:r?.stack||(r?.error instanceof Error?r.error.stack:void 0)};h.push(s),h.length>100&&h.shift()}function f(e){const t=[];return t.push("=".repeat(60)),t.push("GROUNDED APP DEBUG LOG"),t.push("=".repeat(60)),t.push(""),t.push(`Generated: ${e.timestamp}`),t.push(`App Version: ${e.appVersion}`),t.push(""),t.push("SYSTEM INFORMATION"),t.push("-".repeat(60)),t.push(`Platform: ${e.platform}`),t.push(`Browser: ${e.browserInfo.name} ${e.browserInfo.version} (${e.browserInfo.engine})`),t.push(`User Agent: ${e.userAgent}`),t.push(`Language: ${e.language}`),t.push(`Timezone: ${e.timezone}`),t.push(`Screen Resolution: ${e.screenResolution}`),t.push(""),t.push("BROWSER COMPATIBILITY"),t.push("-".repeat(60)),t.push("SharedArrayBuffer: "+(e.compatibility.sharedArrayBuffer?"âœ“ Available":"âœ— Not Available")),t.push("Cross-Origin Isolated: "+(e.compatibility.crossOriginIsolated?"âœ“ Enabled":"âœ— Not Enabled")),t.push("WebGPU: "+(e.compatibility.webGPU?"âœ“ Available":"âœ— Not Available")),t.push("WebAssembly: "+(e.compatibility.webAssembly?"âœ“ Available":"âœ— Not Available")),t.push(`Estimated Memory: ${e.compatibility.estimatedMemory} MB`),t.push(`Device: ${e.compatibility.device}`),t.push(`Browser: ${e.compatibility.browser}`),t.push(""),t.push("AI MODEL STATUS"),t.push("-".repeat(60)),t.push("Models Loaded: "+(e.aiModelStatus.loaded?"âœ“ Yes":"âœ— No")),t.push("Currently Loading: "+(e.aiModelStatus.loading?"Yes":"No")),t.push("Mood Tracker: "+(e.aiModelStatus.moodTracker?"âœ“ Available":"âœ— Not Available")),t.push("Counseling Coach: "+(e.aiModelStatus.counselingCoach?"âœ“ Available":"âœ— Not Available")),t.push(""),t.push("STORAGE"),t.push("-".repeat(60)),t.push("LocalStorage: "+(e.localStorage.available?"âœ“ Available":"âœ— Not Available")),t.push(`LocalStorage Keys: ${e.localStorage.keys.join(", ")||"None"}`),t.push("IndexedDB: "+(e.indexedDB.available?"âœ“ Available":"âœ— Not Available")),t.push(`IndexedDB Databases: ${e.indexedDB.databases.join(", ")||"None"}`),t.push(""),t.push("SERVICE WORKER"),t.push("-".repeat(60)),t.push("Available: "+(e.serviceWorker.available?"âœ“ Yes":"âœ— No")),t.push("Registered: "+(e.serviceWorker.registered?"âœ“ Yes":"âœ— No")),e.serviceWorker.scope&&t.push(`Scope: ${e.serviceWorker.scope}`),t.push(""),t.push("NETWORK"),t.push("-".repeat(60)),t.push("Online: "+(e.networkStatus.online?"âœ“ Yes":"âœ— No")),e.networkStatus.connectionType&&t.push(`Connection Type: ${e.networkStatus.connectionType}`),t.push(""),e.errors.length>0&&(t.push("ERRORS"),t.push("-".repeat(60)),e.errors.forEach((e,r)=>{t.push(`${r+1}. [${e.timestamp}] ${e.message}`),e.stack&&t.push(`   Stack: ${e.stack.split("\n").slice(0,3).join("\n   ")}`),e.details&&t.push(`   Details: ${JSON.stringify(e.details,null,2).split("\n").slice(0,5).join("\n   ")}`),t.push("")})),e.warnings.length>0&&(t.push("WARNINGS"),t.push("-".repeat(60)),e.warnings.forEach((e,r)=>{t.push(`${r+1}. [${e.timestamp}] ${e.message}`),e.details&&t.push(`   Details: ${JSON.stringify(e.details,null,2).split("\n").slice(0,3).join("\n   ")}`),t.push("")})),e.recentLogs.length>0&&(t.push("RECENT LOG ENTRIES (Last 20)"),t.push("-".repeat(60)),e.recentLogs.forEach((e,r)=>{t.push(`${r+1}. [${e.timestamp}] [${e.level.toUpperCase()}] ${e.message}`)}),t.push("")),t.push("=".repeat(60)),t.push("END OF DEBUG LOG"),t.push("=".repeat(60)),t.join("\n")}const j=({onClose:r})=>{const[n,i]=e.useState(null),[o,l]=e.useState(!0),[d,c]=e.useState(!1),[x,m]=e.useState(new Set(["errors","warnings"]));e.useEffect(()=>{fetch("http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"DebugLog.tsx:15",message:"Starting generateDebugLog",data:{loadingState:o},timestamp:Date.now(),sessionId:"debug-session",runId:"post-fix",hypothesisId:"C"})}).catch(()=>{}),async function(){const e=a()||{sharedArrayBuffer:!1,crossOriginIsolated:!1,webGPU:!1,wasm:!1,estimatedMemory:null,deviceType:"unknown",browser:"Unknown",os:"Unknown"},t=s(),r=h.filter(e=>"error"===e.level),n=h.filter(e=>"warning"===e.level),i=h.slice(-20),o=function(){const e=navigator.userAgent;let t="Unknown",r="Unknown",s="Unknown";if(e.includes("Edg")){t="Edge";const a=e.match(/Edg\/(\d+)/);r=a?a[1]:"Unknown",s="Blink"}else if(e.includes("Chrome")&&!e.includes("Edg")){t="Chrome";const a=e.match(/Chrome\/(\d+)/);r=a?a[1]:"Unknown",s="Blink"}else if(e.includes("Safari")&&!e.includes("Chrome")){t="Safari";const a=e.match(/Version\/(\d+)/);r=a?a[1]:"Unknown",s="WebKit"}else if(e.includes("Firefox")){t="Firefox";const a=e.match(/Firefox\/(\d+)/);r=a?a[1]:"Unknown",s="Gecko"}return"Unknown"===s&&(e.includes("WebKit")?s="WebKit":e.includes("Gecko")&&(s="Gecko")),{name:t,version:r,engine:s}}(),l=await async function(){try{return"indexedDB"in window?"databases"in indexedDB?(await indexedDB.databases()).map(e=>e.name):["GroundedDB"]:[]}catch(e){return[]}}(),d=await async function(){const e="serviceWorker"in navigator;let t,r=!1;if(e)try{const e=await navigator.serviceWorker.getRegistration();r=!!e,t=e?.scope}catch(s){}return{available:e,registered:r,scope:t}}(),c=function(){const e=navigator.onLine;let t;if("connection"in navigator){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e&&(t=e.effectiveType||e.type)}return{online:e,connectionType:t}}(),x=[];try{for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&x.push(t)}}catch(m){}return{appVersion:"1.12.25",timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screenResolution:`${window.screen.width}x${window.screen.height}`,browserInfo:o,compatibility:{sharedArrayBuffer:e.sharedArrayBuffer,crossOriginIsolated:e.crossOriginIsolated,webGPU:e.webGPU,webAssembly:e.wasm,estimatedMemory:e.estimatedMemory||0,device:e.deviceType,browser:`${e.browser} on ${e.os}`},aiModelStatus:{loaded:t.loaded,loading:t.loading,moodTracker:t.moodTracker,counselingCoach:t.counselingCoach},errors:r,warnings:n,recentLogs:i,localStorage:{available:"undefined"!=typeof Storage,keys:x},indexedDB:{available:"indexedDB"in window,databases:l},serviceWorker:d,networkStatus:c}}().then(e=>{fetch("http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"DebugLog.tsx:21",message:"generateDebugLog resolved",data:{hasLog:!!e},timestamp:Date.now(),sessionId:"debug-session",runId:"post-fix",hypothesisId:"C"})}).catch(()=>{}),i(e),l(!1)}).catch(e=>{fetch("http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"DebugLog.tsx:27",message:"generateDebugLog rejected - error handler invoked",data:{error:e?.message||String(e),errorType:e?.constructor?.name,willSetLoadingFalse:!0},timestamp:Date.now(),sessionId:"debug-session",runId:"post-fix",hypothesisId:"C"})}).catch(()=>{}),l(!1),i(null)})},[]);const p=e=>{const t=new Set(x);t.has(e)?t.delete(e):t.add(e),m(t)};return o?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-navy-dark/60 backdrop-blur-sm",children:t.jsx("div",{className:"bg-white dark:bg-dark-bg-primary w-full max-w-2xl rounded-[40px] shadow-2xl p-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-navy-primary mx-auto mb-4"}),t.jsx("p",{className:"text-text-secondary dark:text-text-secondary",children:"Generating debug log..."})]})})}):n?t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-navy-dark/60 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-white dark:bg-dark-bg-primary w-full max-w-2xl rounded-[40px] shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:[t.jsxs("div",{className:"p-6 border-b border-border-soft dark:border-dark-border flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-black text-text-primary dark:text-white",children:"Debug Log"}),t.jsx("p",{className:"text-sm text-text-secondary dark:text-text-secondary mt-1",children:"Diagnostic information for troubleshooting"})]}),t.jsx("button",{onClick:r,className:"w-10 h-10 flex items-center justify-center rounded-full bg-bg-secondary dark:bg-dark-bg-secondary text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[t.jsx(v,{title:"System Information",expanded:x.has("system"),onToggle:()=>p("system"),children:t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx(N,{label:"App Version",value:n.appVersion}),t.jsx(N,{label:"Platform",value:n.platform}),t.jsx(N,{label:"Browser",value:`${n.browserInfo.name} ${n.browserInfo.version}`}),t.jsx(N,{label:"Engine",value:n.browserInfo.engine}),t.jsx(N,{label:"Language",value:n.language}),t.jsx(N,{label:"Timezone",value:n.timezone}),t.jsx(N,{label:"Screen",value:n.screenResolution})]})}),t.jsx(v,{title:"Browser Compatibility",expanded:x.has("compatibility"),onToggle:()=>p("compatibility"),children:t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx(S,{label:"SharedArrayBuffer",value:n.compatibility.sharedArrayBuffer}),t.jsx(S,{label:"Cross-Origin Isolated",value:n.compatibility.crossOriginIsolated}),t.jsx(S,{label:"WebGPU",value:n.compatibility.webGPU}),t.jsx(S,{label:"WebAssembly",value:n.compatibility.webAssembly}),t.jsx(N,{label:"Estimated Memory",value:`${n.compatibility.estimatedMemory} MB`}),t.jsx(N,{label:"Device",value:n.compatibility.device}),t.jsx(N,{label:"Browser",value:n.compatibility.browser})]})}),t.jsx(v,{title:"AI Model Status",expanded:x.has("ai"),onToggle:()=>p("ai"),children:t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx(S,{label:"Models Loaded",value:n.aiModelStatus.loaded}),t.jsx(N,{label:"Loading",value:n.aiModelStatus.loading?"Yes":"No"}),t.jsx(S,{label:"Mood Tracker",value:n.aiModelStatus.moodTracker}),t.jsx(S,{label:"Counseling Coach",value:n.aiModelStatus.counselingCoach})]})}),t.jsx(v,{title:"Storage",expanded:x.has("storage"),onToggle:()=>p("storage"),children:t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx(S,{label:"LocalStorage",value:n.localStorage.available}),t.jsx(N,{label:"Keys",value:n.localStorage.keys.join(", ")||"None"}),t.jsx(S,{label:"IndexedDB",value:n.indexedDB.available}),t.jsx(N,{label:"Databases",value:n.indexedDB.databases.join(", ")||"None"})]})}),t.jsx(v,{title:"Service Worker",expanded:x.has("sw"),onToggle:()=>p("sw"),children:t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx(S,{label:"Available",value:n.serviceWorker.available}),t.jsx(S,{label:"Registered",value:n.serviceWorker.registered}),n.serviceWorker.scope&&t.jsx(N,{label:"Scope",value:n.serviceWorker.scope})]})}),t.jsx(v,{title:"Network",expanded:x.has("network"),onToggle:()=>p("network"),children:t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx(S,{label:"Online",value:n.networkStatus.online}),n.networkStatus.connectionType&&t.jsx(N,{label:"Connection",value:n.networkStatus.connectionType})]})}),n.errors.length>0&&t.jsx(v,{title:`Errors (${n.errors.length})`,expanded:x.has("errors"),onToggle:()=>p("errors"),children:t.jsx("div",{className:"space-y-3 text-sm",children:n.errors.map((e,r)=>t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg border border-red-200 dark:border-red-800",children:[t.jsx("p",{className:"font-semibold text-red-800 dark:text-red-200",children:e.message}),t.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:e.timestamp}),e.stack&&t.jsx("pre",{className:"text-xs text-red-600 dark:text-red-400 mt-2 whitespace-pre-wrap break-all",children:e.stack.split("\n").slice(0,3).join("\n")})]},r))})}),n.warnings.length>0&&t.jsx(v,{title:`Warnings (${n.warnings.length})`,expanded:x.has("warnings"),onToggle:()=>p("warnings"),children:t.jsx("div",{className:"space-y-3 text-sm",children:n.warnings.map((e,r)=>t.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[t.jsx("p",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:e.message}),t.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:e.timestamp})]},r))})})]}),t.jsxs("div",{className:"p-6 border-t border-border-soft dark:border-dark-border space-y-3",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:async()=>{if(!n)return;const e=f(n);try{await navigator.clipboard.writeText(e),c(!0),setTimeout(()=>c(!1),2e3)}catch(t){alert("Failed to copy to clipboard. Please use the email button instead.")}},className:"flex-1 px-4 py-3 bg-bg-secondary dark:bg-dark-bg-secondary text-text-primary dark:text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-bg-tertiary dark:hover:bg-dark-bg-tertiary",children:d?"âœ“ Copied!":"Copy Log"}),t.jsx("button",{onClick:()=>{if(!n)return;const e=function(e){return`mailto:ac.minds.ai@gmail.com?subject=${encodeURIComponent("Grounded App Debug Log - Support Request")}&body=${encodeURIComponent(`Hello,\n\nI'm experiencing issues with the Grounded app. Please find the debug log attached below.\n\n---\n\n${f(e)}\n\n---\n\nThank you for your help!`)}`}(n);window.location.href=e},className:"flex-1 px-4 py-3 bg-navy-primary text-white rounded-xl text-xs font-black uppercase tracking-widest hover:opacity-90",children:"ðŸ“§ Email Support"})]}),t.jsx("p",{className:"text-xs text-text-tertiary dark:text-text-tertiary text-center",children:'Click "Email Support" to open your email client with the debug log attached'})]})]})}):t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-navy-dark/60 backdrop-blur-sm",children:t.jsx("div",{className:"bg-white dark:bg-dark-bg-primary w-full max-w-2xl rounded-[40px] shadow-2xl p-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-text-secondary dark:text-text-secondary",children:"Failed to generate debug log."}),t.jsx("button",{onClick:r,className:"mt-4 px-6 py-3 bg-navy-primary text-white rounded-xl font-black uppercase tracking-widest",children:"Close"})]})})})},v=({title:e,expanded:r,onToggle:s,children:a})=>t.jsxs("div",{className:"bg-bg-secondary dark:bg-dark-bg-secondary rounded-xl border border-border-soft dark:border-dark-border overflow-hidden",children:[t.jsxs("button",{onClick:s,className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-bg-tertiary dark:hover:bg-dark-bg-tertiary transition-colors",children:[t.jsx("span",{className:"text-sm font-black text-text-primary dark:text-white uppercase tracking-widest",children:e}),t.jsx("svg",{className:"w-5 h-5 text-text-tertiary dark:text-text-tertiary transition-transform "+(r?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&t.jsx("div",{className:"px-4 py-3 border-t border-border-soft dark:border-dark-border",children:a})]}),N=({label:e,value:r})=>t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-text-secondary dark:text-text-secondary",children:[e,":"]}),t.jsx("span",{className:"font-semibold text-text-primary dark:text-white",children:r})]}),S=({label:e,value:r})=>t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-text-secondary dark:text-text-secondary",children:[e,":"]}),t.jsx("span",{className:"font-semibold "+(r?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:r?"âœ“":"âœ—"})]}),C=({onClose:r})=>{const[s,a]=e.useState(!1);return t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 bg-navy-dark/60 backdrop-blur-sm animate-fade-in",children:[t.jsxs("div",{className:"bg-white dark:bg-dark-bg-primary w-full max-w-lg rounded-[40px] shadow-2xl overflow-hidden animate-pop relative border border-border-soft dark:border-dark-border",onClick:e=>e.stopPropagation(),children:[t.jsx("button",{onClick:r,className:"absolute top-6 right-6 w-10 h-10 flex items-center justify-center rounded-full bg-bg-secondary dark:bg-dark-bg-secondary text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})}),t.jsxs("div",{className:"p-10 space-y-8 max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("h2",{className:"text-3xl font-black text-text-primary dark:text-white tracking-tight",children:"How to navigate"}),t.jsx("p",{className:"text-text-secondary dark:text-text-secondary font-medium",children:"Mastering Grounded in 3 steps."})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex gap-6",children:[t.jsx("div",{className:"w-12 h-12 rounded-2xl bg-navy-primary dark:bg-navy-primary flex items-center justify-center text-white font-black shrink-0 shadow-lg",children:"1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-text-primary dark:text-white text-lg",children:"Define & Rank"}),t.jsxs("p",{className:"text-text-secondary dark:text-text-secondary text-sm leading-relaxed",children:["Pick up to 10 values in the ",t.jsx("b",{children:"Values"}),' tab. Rank them by dragging. Your top value becomes your "North Star" for the Dashboard guidance.']})]})]}),t.jsxs("div",{className:"flex gap-6",children:[t.jsx("div",{className:"w-12 h-12 rounded-2xl bg-yellow-warm dark:bg-yellow-warm flex items-center justify-center text-navy-primary dark:text-navy-primary font-black shrink-0 shadow-lg",children:"2"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-text-primary dark:text-white text-lg",children:"Embody Daily"}),t.jsxs("p",{className:"text-text-secondary dark:text-text-secondary text-sm leading-relaxed",children:["In the ",t.jsx("b",{children:"Dashboard"}),', open a value to reflect on your progress. Log a win or set a "Next Aim" (micro-goal) to build momentum.']})]})]}),t.jsxs("div",{className:"flex gap-6",children:[t.jsx("div",{className:"w-12 h-12 rounded-2xl bg-calm-sage dark:bg-calm-sage flex items-center justify-center text-white dark:text-navy-primary font-black shrink-0 shadow-lg",children:"3"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-text-primary dark:text-white text-lg",children:"Synthesize"}),t.jsxs("p",{className:"text-text-secondary dark:text-text-secondary text-sm leading-relaxed",children:["Use ",t.jsx("b",{children:"Reports"})," to generate clinical-style summaries (SOAP/DAP) of your journey to share with a therapist or for personal growth audits."]})]})]})]}),t.jsxs("div",{className:"pt-4 border-t border-border-soft dark:border-dark-border space-y-4",children:[t.jsx("h3",{className:"text-lg font-black text-text-primary dark:text-white",children:"Tips & Best Practices"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"bg-bg-secondary dark:bg-dark-bg-secondary p-6 rounded-3xl flex items-start gap-4",children:[t.jsx("div",{className:"text-2xl mt-1",children:"ðŸ’¡"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest",children:"Pro Tip"}),t.jsxs("p",{className:"text-xs text-text-secondary dark:text-text-secondary leading-relaxed font-medium",children:["Head to ",t.jsx("b",{children:"Settings"}),' to enable "Growth and Progress" nudgesâ€”system notifications that keep your North Star top-of-mind.']})]})]}),t.jsxs("div",{className:"bg-bg-secondary dark:bg-dark-bg-secondary p-6 rounded-3xl flex items-start gap-4",children:[t.jsx("div",{className:"text-2xl mt-1",children:"ðŸ“±"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest",children:"Daily Practice"}),t.jsx("p",{className:"text-xs text-text-secondary dark:text-text-secondary leading-relaxed font-medium",children:"Check your Dashboard daily to log wins and set micro-goals. Small consistent actions build lasting change."})]})]}),t.jsxs("div",{className:"bg-bg-secondary dark:bg-dark-bg-secondary p-6 rounded-3xl flex items-start gap-4",children:[t.jsx("div",{className:"text-2xl mt-1",children:"ðŸ“Š"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest",children:"Therapy Integration"}),t.jsxs("p",{className:"text-xs text-text-secondary dark:text-text-secondary leading-relaxed font-medium",children:["Use the ",t.jsx("b",{children:"Reports"})," feature to generate summaries you can share with your therapist during sessions."]})]})]})]})]}),t.jsxs("div",{className:"pt-4 border-t border-border-soft dark:border-dark-border space-y-4",children:[t.jsx("h3",{className:"text-lg font-black text-text-primary dark:text-white",children:"AI Model Information"}),t.jsxs("div",{className:"bg-bg-secondary dark:bg-dark-bg-secondary p-6 rounded-3xl space-y-3",children:[t.jsx("p",{className:"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2",children:"On-Device AI Processing"}),t.jsxs("div",{className:"space-y-2 text-xs text-text-secondary dark:text-text-secondary leading-relaxed",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Privacy First:"})," All AI processing happens entirely on your device. No data is sent to external servers."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Fast Loading:"})," AI models begin downloading immediately when the app starts, so they're ready when you need them."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Offline Capable:"})," Once downloaded, models are cached locally for instant loading and offline use."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Progress Tracking:"})," Watch the progress bar during first launch to see model download status."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Fallback Mode:"})," If models fail to load, the app continues with rule-based responses. Core functionality remains available."]})]})]})]}),t.jsxs("div",{className:"pt-4 border-t border-border-soft dark:border-dark-border space-y-4",children:[t.jsx("h3",{className:"text-lg font-black text-text-primary dark:text-white",children:"Support & Troubleshooting"}),t.jsx("div",{className:"bg-yellow-warm/10 dark:bg-yellow-warm/20 p-6 rounded-3xl border-2 border-yellow-warm/30 space-y-3",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"text-2xl",children:"ðŸ”§"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-black text-text-primary dark:text-white mb-1",children:"Experiencing Issues?"}),t.jsx("p",{className:"text-xs text-text-secondary dark:text-text-secondary leading-relaxed mb-3",children:"Generate a debug log with diagnostic information. Debug logging starts automatically when the app launches."}),t.jsxs("button",{onClick:()=>a(!0),className:"w-full px-4 py-3 bg-navy-primary text-white rounded-xl text-xs font-black uppercase tracking-widest hover:opacity-90 flex items-center justify-center gap-2 shadow-lg",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Generate Debug Log"]})]})]})}),t.jsxs("div",{className:"bg-bg-secondary dark:bg-dark-bg-secondary p-6 rounded-3xl space-y-2",children:[t.jsx("p",{className:"text-sm text-text-secondary dark:text-text-secondary leading-relaxed",children:"Need help or have questions? We're here to assist you."}),t.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[t.jsx("svg",{className:"w-5 h-5 text-navy-primary dark:text-yellow-warm flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),t.jsx("a",{href:"mailto:ac.minds.ai@gmail.com?subject=Grounded App Support",className:"text-sm font-bold text-navy-primary dark:text-yellow-warm hover:underline",children:"ac.minds.ai@gmail.com"})]})]})]}),t.jsxs("div",{className:"pt-4 border-t border-border-soft dark:border-dark-border space-y-4",children:[t.jsx("h3",{className:"text-lg font-black text-text-primary dark:text-white",children:"License"}),t.jsxs("div",{className:"bg-bg-secondary dark:bg-dark-bg-secondary p-6 rounded-3xl space-y-3",children:[t.jsx("p",{className:"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest",children:"Apache License 2.0"}),t.jsxs("div",{className:"space-y-2 text-xs text-text-secondary dark:text-text-secondary leading-relaxed",children:[t.jsxs("p",{children:["Copyright ",(new Date).getFullYear()," AC MiNDS"]}),t.jsx("p",{children:'Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at:'}),t.jsx("a",{href:"http://www.apache.org/licenses/LICENSE-2.0",target:"_blank",rel:"noopener noreferrer",className:"text-navy-primary dark:text-yellow-warm hover:underline break-all",children:"http://www.apache.org/licenses/LICENSE-2.0"}),t.jsx("p",{children:'Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.'})]})]})]}),t.jsx("div",{className:"pt-4",children:t.jsx("button",{onClick:r,className:"w-full py-5 bg-navy-primary dark:bg-navy-primary text-white dark:text-white rounded-[24px] font-black uppercase tracking-[0.2em] shadow-xl hover:opacity-90 transition-all active:scale-[0.98]",children:"Got it, Let's grow"})})]})]}),t.jsx("div",{className:"absolute inset-0 -z-10",onClick:r}),s&&t.jsx(j,{onClose:()=>a(!1)})]})},I=e.createContext(void 0),L=({children:r})=>{const[s,a]=e.useState(()=>localStorage.getItem("theme")||"light");return e.useEffect(()=>{const e=document.documentElement;"dark"===s?e.classList.add("dark"):e.classList.remove("dark"),localStorage.setItem("theme",s)},[s]),t.jsx(I.Provider,{value:{theme:s,toggleTheme:()=>{a(e=>"light"===e?"dark":"light")},setTheme:e=>{a(e)}},children:r})},A=()=>{const{theme:r,toggleTheme:s}=(()=>{const t=e.useContext(I);if(void 0===t)throw new Error("useTheme must be used within a ThemeProvider");return t})();return t.jsx("button",{onClick:s,className:"w-8 h-8 flex items-center justify-center rounded-full transition-colors hover:bg-opacity-20 dark:hover:bg-opacity-20","aria-label":"Toggle theme",title:"light"===r?"Switch to dark mode":"Switch to light mode",children:"light"===r?t.jsx("svg",{className:"w-5 h-5 text-yellow-warm",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):t.jsx("svg",{className:"w-5 h-5 text-yellow-warm",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})},D=new class{constructor(){this.dbName="com.acminds.grounded.therapy.db",this.dbVersion=1,this.db=null}async init(){return new Promise((e,t)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>t(r.error),r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("users")){const e=t.createObjectStore("users",{keyPath:"id"});e.createIndex("username","username",{unique:!0}),e.createIndex("email","email",{unique:!0})}if(t.objectStoreNames.contains("appData")||t.createObjectStore("appData",{keyPath:"userId"}).createIndex("userId","userId",{unique:!0}),!t.objectStoreNames.contains("resetTokens")){const e=t.createObjectStore("resetTokens",{keyPath:"token"});e.createIndex("userId","userId",{unique:!1}),e.createIndex("expires","expires",{unique:!1})}}})}async ensureDB(){if(this.db||await this.init(),!this.db)throw new Error("Database initialization failed");return this.db}async createUser(e){const t=await this.ensureDB(),r={...e,id:crypto.randomUUID(),createdAt:(new Date).toISOString()};return new Promise((e,s)=>{const a=t.transaction(["users"],"readwrite").objectStore("users").add(r);a.onsuccess=()=>e(r.id),a.onerror=()=>s(a.error)})}async getUserByUsername(e){const t=await this.ensureDB();return new Promise((r,s)=>{const a=t.transaction(["users"],"readonly").objectStore("users").index("username").get(e);a.onsuccess=()=>r(a.result||null),a.onerror=()=>s(a.error)})}async getUserByEmail(e){const t=await this.ensureDB();return new Promise((r,s)=>{const a=t.transaction(["users"],"readonly").objectStore("users").index("email").get(e);a.onsuccess=()=>r(a.result||null),a.onerror=()=>s(a.error)})}async getUserById(e){const t=await this.ensureDB();return new Promise((r,s)=>{const a=t.transaction(["users"],"readonly").objectStore("users").get(e);a.onsuccess=()=>r(a.result||null),a.onerror=()=>s(a.error)})}async updateUser(e,t){const r=await this.ensureDB();return new Promise(async(s,a)=>{const n=await this.getUserById(e);if(!n)return void a(new Error("User not found"));const i=r.transaction(["users"],"readwrite").objectStore("users"),o={...n,...t},l=i.put(o);l.onsuccess=()=>s(),l.onerror=()=>a(l.error)})}async getAppData(e){const t=await this.ensureDB();return new Promise((r,s)=>{const a=t.transaction(["appData"],"readonly").objectStore("appData").get(e);a.onsuccess=()=>{const e=a.result;r(e?e.data:null)},a.onerror=()=>s(a.error)})}async saveAppData(e,t){const r=await this.ensureDB();return new Promise((s,a)=>{const n=r.transaction(["appData"],"readwrite").objectStore("appData").put({userId:e,data:t});n.onsuccess=()=>s(),n.onerror=()=>a(n.error)})}async createResetToken(e,t){const r=await this.ensureDB(),s=crypto.randomUUID(),a=Date.now()+864e5;return new Promise((n,i)=>{const o=r.transaction(["resetTokens"],"readwrite").objectStore("resetTokens").add({token:s,userId:e,email:t,expires:a,createdAt:(new Date).toISOString()});o.onsuccess=()=>n(s),o.onerror=()=>i(o.error)})}async getResetToken(e){const t=await this.ensureDB();return new Promise((r,s)=>{const a=t.transaction(["resetTokens"],"readonly").objectStore("resetTokens").get(e);a.onsuccess=()=>{const e=a.result;e?e.expires<Date.now()?r(null):r({userId:e.userId,email:e.email}):r(null)},a.onerror=()=>s(a.error)})}async deleteResetToken(e){const t=await this.ensureDB();return new Promise((r,s)=>{const a=t.transaction(["resetTokens"],"readwrite").objectStore("resetTokens").delete(e);a.onsuccess=()=>r(),a.onerror=()=>s(a.error)})}async cleanupExpiredTokens(){const e=await this.ensureDB();return new Promise((t,r)=>{const s=e.transaction(["resetTokens"],"readwrite").objectStore("resetTokens").index("expires").openCursor();s.onsuccess=e=>{const r=e.target.result;r?(r.value.expires<Date.now()&&r.delete(),r.continue()):t()},s.onerror=()=>r(s.error)})}};async function T(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,"0")).join("")}async function M(e){try{if(!e.username||!e.password)return{success:!1,error:"Please enter username and password"};const t=await D.getUserByUsername(e.username);return t&&await async function(e,t){return await T(e)===t}(e.password,t.passwordHash)?(await D.updateUser(t.id,{lastLogin:(new Date).toISOString()}),sessionStorage.setItem("userId",t.id),sessionStorage.setItem("username",t.username),{success:!0,userId:t.id}):{success:!1,error:"Invalid username or password"}}catch(t){return{success:!1,error:"Login failed. Please try again."}}}function E(){sessionStorage.removeItem("userId"),sessionStorage.removeItem("username")}async function B(){const e=sessionStorage.getItem("userId");return e?await D.getUserById(e):null}const P=({onLogin:r})=>{const[s,a]=e.useState("login"),[n,i]=e.useState(""),[o,l]=e.useState(""),[d,c]=e.useState(""),[x,m]=e.useState(""),[p,h]=e.useState(""),[u,g]=e.useState(""),[b,y]=e.useState(""),[w,k]=e.useState(!1),[f,j]=e.useState(""),[v,N]=e.useState(!1),[S,C]=e.useState(!1),[I,L]=e.useState(!1),[A,E]=e.useState(!1);return e.useEffect(()=>{const e=window.location.hash.match(/^#reset\/(.+)$/);e&&(h(e[1]),a("reset"),window.history.replaceState(null,"",window.location.pathname))},[]),t.jsx("div",{className:"min-h-screen bg-bg-primary dark:bg-dark-bg-primary flex items-center justify-center p-4 sm:p-6",children:t.jsx("div",{className:"max-w-md w-full bg-white dark:bg-dark-bg-primary rounded-xl sm:rounded-2xl shadow-2xl border border-border-soft dark:border-dark-border/30 overflow-hidden",children:t.jsxs("div",{className:"p-6 sm:p-8 space-y-6",children:[t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("img",{src:"/ac-minds-logo.png",alt:"AC MINDS",className:"w-12 h-12 sm:w-16 sm:h-16 object-contain mx-auto"}),t.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-text-primary dark:text-white tracking-tight",children:"Grounded"}),t.jsxs("p",{className:"text-sm sm:text-base text-text-primary/60 dark:text-white/60",children:["login"===s&&"Sign in to continue","register"===s&&"Create your account","forgot"===s&&"Reset your password","reset"===s&&"Set new password"]})]}),b&&t.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 sm:p-4",children:t.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:b})}),f&&"forgot"===s&&t.jsxs("div",{className:"bg-yellow-warm/20 dark:bg-yellow-warm/30 border border-yellow-warm/50 rounded-lg p-4 space-y-3",children:[t.jsx("p",{className:"text-sm font-bold text-text-primary dark:text-white",children:"Reset Link Generated"}),t.jsx("p",{className:"text-xs text-text-primary/70 dark:text-white/70",children:"Copy this link to reset your password. It will expire in 24 hours."}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:f,readOnly:!0,className:"flex-1 px-3 py-2 bg-white dark:bg-dark-bg-primary rounded-lg text-xs border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white"}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(f),alert("Reset link copied to clipboard! Save this link to reset your password.")},className:"px-4 py-2 bg-yellow-warm text-text-primary rounded-lg text-xs font-bold uppercase tracking-widest hover:opacity-90",children:"Copy"})]})]}),"login"===s&&t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),y(""),k(!0);const t=await M({username:n,password:o});k(!1),t.success&&t.userId?r(t.userId):y(t.error||"Login failed")},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2",children:"Username"}),t.jsx("input",{type:"text",value:n,onChange:e=>i(e.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none",placeholder:"Enter your username"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:v?"text":"password",value:o,onChange:e=>l(e.target.value),required:!0,className:"w-full px-4 py-3 pr-12 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none",placeholder:"Enter your password"}),t.jsx("button",{type:"button",onClick:()=>N(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors","aria-label":v?"Hide password":"Show password",children:v?t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):t.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),t.jsx("button",{type:"submit",disabled:w,className:"w-full py-3 sm:py-4 bg-yellow-warm text-text-primary rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-90 transition-all disabled:opacity-50 shadow-lg",children:w?"Signing in...":"Sign In"}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-2 text-center",children:[t.jsx("button",{type:"button",onClick:()=>a("register"),className:"text-xs sm:text-sm text-yellow-warm hover:underline",children:"Create Account"}),t.jsx("button",{type:"button",onClick:()=>a("forgot"),className:"text-xs sm:text-sm text-text-primary/60 dark:text-white/60 hover:underline",children:"Forgot Password?"})]})]}),"register"===s&&t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),y(""),k(!0),o!==x)return y("Passwords do not match"),void k(!1);const t=await async function(e){try{if(!e.username||e.username.length<3)return{success:!1,error:"Username must be at least 3 characters"};if(!e.password||e.password.length<6)return{success:!1,error:"Password must be at least 6 characters"};if(!e.email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email))return{success:!1,error:"Please enter a valid email address"};if(await D.getUserByUsername(e.username))return{success:!1,error:"Username already exists"};if(await D.getUserByEmail(e.email))return{success:!1,error:"Email already registered"};const t=await T(e.password);return{success:!0,userId:await D.createUser({username:e.username,passwordHash:t,email:e.email,termsAccepted:!1})}}catch(b){return{success:!1,error:"Registration failed. Please try again."}}}({username:n,password:o,email:d});if(k(!1),t.success){const e=await M({username:n,password:o});e.success&&e.userId&&r(e.userId)}else y(t.error||"Registration failed")},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2",children:"Username"}),t.jsx("input",{type:"text",value:n,onChange:e=>i(e.target.value),required:!0,minLength:3,className:"w-full px-4 py-3 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none",placeholder:"Choose a username (min 3 characters)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2",children:"Email"}),t.jsx("input",{type:"email",value:d,onChange:e=>c(e.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none",placeholder:"your.email@example.com"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2",children:"Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:v?"text":"password",value:o,onChange:e=>l(e.target.value),required:!0,minLength:6,className:"w-full px-4 py-3 pr-12 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none",placeholder:"Choose a password (min 6 characters)"}),t.jsx("button",{type:"button",onClick:()=>N(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors","aria-label":v?"Hide password":"Show password",children:v?t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):t.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2",children:"Confirm Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:S?"text":"password",value:x,onChange:e=>m(e.target.value),required:!0,minLength:6,className:"w-full px-4 py-3 pr-12 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none",placeholder:"Confirm your password"}),t.jsx("button",{type:"button",onClick:()=>C(!S),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors","aria-label":S?"Hide password":"Show password",children:S?t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):t.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),t.jsx("button",{type:"submit",disabled:w,className:"w-full py-3 sm:py-4 bg-yellow-warm text-text-primary rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-90 transition-all disabled:opacity-50 shadow-lg",children:w?"Creating Account...":"Create Account"}),t.jsx("div",{className:"text-center",children:t.jsx("button",{type:"button",onClick:()=>a("login"),className:"text-xs sm:text-sm text-yellow-warm hover:underline",children:"Already have an account? Sign In"})})]}),"forgot"===s&&t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),y(""),k(!0);const t=await async function(e){try{const t=await D.getUserByEmail(e);if(!t)return{success:!0};const r=await D.createResetToken(t.id,e);return{success:!0,resetLink:`${window.location.origin}${window.location.pathname}#reset/${r}`}}catch(b){return{success:!1,error:"Failed to generate reset link"}}}(d);k(!1),t.success&&t.resetLink?(j(t.resetLink),y("")):y(t.error||"Failed to generate reset link")},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2",children:"Email Address"}),t.jsx("input",{type:"email",value:d,onChange:e=>c(e.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none",placeholder:"Enter your email address"})]}),t.jsx("p",{className:"text-xs text-text-primary/60 dark:text-white/60",children:"A reset link will be generated. Copy and save it to reset your password."}),t.jsx("button",{type:"submit",disabled:w,className:"w-full py-3 sm:py-4 bg-yellow-warm text-text-primary rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-90 transition-all disabled:opacity-50 shadow-lg",children:w?"Generating Link...":"Generate Reset Link"}),t.jsx("div",{className:"text-center",children:t.jsx("button",{type:"button",onClick:()=>{a("login"),c(""),j("")},className:"text-xs sm:text-sm text-yellow-warm hover:underline",children:"Back to Sign In"})})]}),"reset"===s&&t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),y(""),k(!0),u!==x)return y("Passwords do not match"),void k(!1);const t=await async function(e,t){try{if(!t||t.length<6)return{success:!1,error:"Password must be at least 6 characters"};const r=await D.getResetToken(e);if(!r)return{success:!1,error:"Invalid or expired reset token"};const s=await T(t);return await D.updateUser(r.userId,{passwordHash:s}),await D.deleteResetToken(e),{success:!0,userId:r.userId}}catch(b){return{success:!1,error:"Failed to reset password"}}}(p,u);k(!1),t.success?(y(""),alert("Password reset successful! Please login with your new password."),a("login"),h(""),g(""),m("")):y(t.error||"Failed to reset password")},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2",children:"New Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:I?"text":"password",value:u,onChange:e=>g(e.target.value),required:!0,minLength:6,className:"w-full px-4 py-3 pr-12 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none",placeholder:"Enter new password (min 6 characters)"}),t.jsx("button",{type:"button",onClick:()=>L(!I),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors","aria-label":I?"Hide password":"Show password",children:I?t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):t.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2",children:"Confirm New Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:A?"text":"password",value:x,onChange:e=>m(e.target.value),required:!0,minLength:6,className:"w-full px-4 py-3 pr-12 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none",placeholder:"Confirm new password"}),t.jsx("button",{type:"button",onClick:()=>E(!A),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors","aria-label":A?"Hide password":"Show password",children:A?t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):t.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),t.jsx("button",{type:"submit",disabled:w,className:"w-full py-3 sm:py-4 bg-yellow-warm text-text-primary rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-90 transition-all disabled:opacity-50 shadow-lg",children:w?"Resetting Password...":"Reset Password"})]})]})})})},O=({onAccept:r,onDecline:s})=>{const[a,o]=e.useState(!1),[l,d]=e.useState(!1),c=a&&l;return t.jsxs("div",{className:"min-h-screen bg-bg-primary dark:bg-dark-bg-primary flex items-center justify-center p-4 sm:p-6",children:[t.jsx("div",{className:"max-w-2xl w-full bg-white dark:bg-dark-bg-primary rounded-xl sm:rounded-2xl shadow-2xl border border-border-soft dark:border-dark-border/30 overflow-hidden",children:t.jsxs("div",{className:"p-6 sm:p-8 lg:p-10 space-y-6 sm:space-y-8 max-h-[90vh] overflow-y-auto custom-scrollbar",children:[t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-text-primary dark:text-white tracking-tight",children:"Acceptance of Terms and Conditions"}),t.jsx("p",{className:"text-sm sm:text-base text-text-primary/60 dark:text-white/60",children:"Please read the following information carefully before using this app."})]}),t.jsxs("div",{className:"space-y-4 text-text-primary dark:text-white",children:[t.jsx("p",{className:"text-sm sm:text-base leading-relaxed",children:'By selecting "I Accept," you confirm that you have read, understood, and agree to the Terms and Conditions governing the use of this application ("the App").'}),t.jsxs("div",{className:"space-y-4 pt-4 border-t border-border-soft dark:border-dark-border/30",children:[t.jsx("h2",{className:"text-lg sm:text-xl font-black text-text-primary dark:text-white",children:"DISCLAIMER"}),t.jsxs("div",{className:"space-y-3 text-sm sm:text-base leading-relaxed",children:[t.jsxs("p",{children:["This App is designed for general wellness and informational purposes only. It is ",t.jsx("strong",{children:"not"})," a substitute for professional therapy, medical advice, diagnosis, or treatment."]}),t.jsx("p",{children:"You should always seek help from a licensed therapist, counselor, psychiatrist, or other qualified healthcare provider for mental health concerns."}),t.jsx("p",{children:"If you are in crisis or believe you may be in danger, do not use this App as a source of emergency support. Please contact local emergency services or crisis resources immediately."})]}),t.jsxs("div",{className:"bg-bg-primary dark:bg-dark-bg-primary/50 rounded-lg p-4 sm:p-5 space-y-2",children:[t.jsx("p",{className:"font-bold text-sm sm:text-base",children:"In the United States:"}),t.jsxs("ul",{className:"space-y-2 text-sm sm:text-base list-disc list-inside ml-2",children:[t.jsxs("li",{children:["Call ",t.jsx("strong",{children:"911"})," for emergencies"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"988 Suicide and Crisis Lifeline"})," â€“ Dial 988 (24/7, free, confidential)"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Crisis Text Line"})," â€“ Text HOME to 741741"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"National Domestic Violence Hotline"})," â€“ 1-800-799-SAFE (7233)"]})]})]}),t.jsx("p",{className:"text-sm sm:text-base leading-relaxed pt-2",children:"By proceeding, you acknowledge that you understand and agree to these terms and that you accept full responsibility for your use of the App."})]}),t.jsxs("div",{className:"space-y-4 pt-4 border-t border-border-soft dark:border-dark-border/30",children:[t.jsx("h2",{className:"text-lg sm:text-xl font-black text-text-primary dark:text-white",children:"CRISIS DETECTION & SAFETY"}),t.jsxs("div",{className:"space-y-3 text-sm sm:text-base leading-relaxed",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"This app includes automatic crisis detection"})," to help protect your safety and wellbeing. The app monitors your journal entries and reflections for language that may indicate you are in crisis or at risk of self-harm."]}),t.jsx("p",{children:t.jsx("strong",{children:"If the app detects crisis language, it will:"})}),t.jsxs("ul",{className:"list-disc list-inside ml-2 space-y-1",children:[t.jsx("li",{children:"Immediately stop normal AI responses"}),t.jsx("li",{children:"Display crisis resources and emergency contact information"}),t.jsx("li",{children:"Encourage you to contact professional help or emergency services"}),t.jsx("li",{children:"Provide direct links to crisis hotlines and support resources"})]}),t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 rounded",children:[t.jsx("p",{className:"font-bold text-red-800 dark:text-red-300 mb-2",children:"âš ï¸ Important Safety Information"}),t.jsxs("p",{className:"text-red-700 dark:text-red-200 text-sm",children:["The app treats ",t.jsx("strong",{children:"any direct or indirect self-harm language as a crisis trigger"}),", even if used hypothetically or in a joking manner. This is to ensure your safety. All suicide and self-harm mentions are taken seriously and will trigger immediate crisis guidance."]})]}),t.jsxs("details",{className:"mt-4",children:[t.jsx("summary",{className:"cursor-pointer font-bold text-text-primary dark:text-white hover:text-yellow-warm",children:"View Crisis Detection Categories (Click to expand)"}),t.jsx("div",{className:"mt-3 space-y-4 pl-4 border-l-2 border-border-soft dark:border-dark-border/30",children:Array.from(new Set(n.map(e=>e.category))).map(e=>{const r=n.filter(t=>t.category===e),s=r[0]?.severity||"moderate";return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("h3",{className:"font-bold text-sm",children:[i(e),t.jsx("span",{className:"ml-2 px-2 py-0.5 rounded text-xs "+("critical"===s?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300":"high"===s?"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300"),children:s.toUpperCase()})]}),t.jsxs("p",{className:"text-xs text-text-primary/70 dark:text-white/70",children:['The app monitors for phrases like: "',r.slice(0,3).map(e=>e.phrase).join('", "'),'" and ',r.length-3>0?r.length-3+" more similar phrases":"similar phrases","."]})]},e)})})]}),t.jsx("p",{className:"text-xs text-text-primary/60 dark:text-white/60 italic pt-2",children:"These crisis detection phrases are hardcoded into the app and cannot be modified or disabled. This ensures consistent safety monitoring regardless of settings."})]})]})]}),t.jsxs("div",{className:"space-y-4 pt-4 border-t border-border-soft dark:border-dark-border/30",children:[t.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[t.jsx("input",{type:"checkbox",checked:a,onChange:e=>o(e.target.checked),className:"mt-1 w-5 h-5 rounded border-2 border-text-primary/30 dark:border-white/30 text-yellow-warm focus:ring-2 focus:ring-yellow-warm/50 cursor-pointer"}),t.jsx("span",{className:"text-sm sm:text-base text-text-primary dark:text-white leading-relaxed flex-1",children:"I have read and understand the Terms and Conditions."})]}),t.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[t.jsx("input",{type:"checkbox",checked:l,onChange:e=>d(e.target.checked),className:"mt-1 w-5 h-5 rounded border-2 border-text-primary/30 dark:border-white/30 text-yellow-warm focus:ring-2 focus:ring-yellow-warm/50 cursor-pointer"}),t.jsx("span",{className:"text-sm sm:text-base text-text-primary dark:text-white leading-relaxed flex-1",children:"I acknowledge this App does not replace professional therapy or emergency resources."})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-4",children:[t.jsx("button",{onClick:s,className:"flex-1 px-6 py-3 sm:py-4 bg-bg-primary dark:bg-dark-bg-primary/50 text-text-primary dark:text-white rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-80 transition-all border border-border-soft dark:border-dark-border/30",children:"Decline"}),t.jsx("button",{onClick:r,disabled:!c,className:"flex-1 px-6 py-3 sm:py-4 rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base transition-all "+(c?"bg-yellow-warm text-text-primary hover:opacity-90 shadow-lg active:scale-[0.98]":"bg-border-soft dark:bg-dark-bg-primary/30 text-text-tertiary dark:text-white/30 cursor-not-allowed"),children:"Accept"})]})]})}),t.jsx("style",{children:"\n        .custom-scrollbar::-webkit-scrollbar { width: 6px; }\n        .custom-scrollbar::-webkit-scrollbar-thumb { \n          background: #cbd5e1; \n          border-radius: 10px; \n        }\n        .dark .custom-scrollbar::-webkit-scrollbar-thumb { \n          background: #4a5568; \n        }\n      "})]})},R=({currentView:e,onViewChange:r})=>t.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-dark-bg-primary border-t border-border-soft dark:border-dark-border shadow-lg z-50 safe-area-inset-bottom",children:t.jsx("div",{className:"max-w-4xl mx-auto px-2",children:t.jsx("div",{className:"flex items-center justify-around",children:[{id:"home",label:"Home",icon:"ðŸ "},{id:"values",label:"Values",icon:"ðŸ’›"},{id:"report",label:"Reports",icon:"ðŸ“Š"},{id:"vault",label:"Vault",icon:"ðŸ”’"}].map(s=>{const a=e===s.id;return t.jsxs("button",{onClick:()=>r(s.id),className:`\n                  flex flex-col items-center justify-center py-3 px-4 min-w-[60px] min-h-[60px]\n                  transition-all duration-200\n                  ${a?"text-navy-primary dark:text-yellow-warm":"text-text-secondary dark:text-white/60"}\n                  active:scale-95\n                `,"aria-label":s.label,children:[t.jsx("span",{className:"text-2xl mb-1",children:s.icon}),t.jsx("span",{className:`\n                  text-xs font-medium\n                  ${a?"font-semibold":""}\n                `,children:s.label}),a&&t.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-8 h-1 bg-navy-primary dark:bg-yellow-warm rounded-t-full"})]},s.id)})})})}),$=({error:e,errorInfo:r,onReset:s})=>t.jsx("div",{className:"min-h-screen bg-bg-primary dark:bg-dark-bg-primary flex items-center justify-center p-4",children:t.jsx("div",{className:"bg-white dark:bg-dark-bg-secondary rounded-2xl sm:rounded-3xl border border-border-soft dark:border-dark-border shadow-2xl p-6 sm:p-8 max-w-2xl w-full",children:t.jsxs("div",{className:"text-center space-y-4 sm:space-y-6",children:[t.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto",children:t.jsx("span",{className:"text-3xl sm:text-4xl",children:"âš ï¸"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-black text-text-primary dark:text-white mb-2",children:"Something went wrong"}),t.jsx("p",{className:"text-text-secondary dark:text-text-secondary text-sm sm:text-base",children:"We encountered an unexpected error. Don't worry, your data is safe."})]}),e&&t.jsxs("div",{className:"bg-bg-secondary dark:bg-dark-bg-primary rounded-xl p-4 text-left",children:[t.jsx("p",{className:"text-xs font-black text-text-primary/60 dark:text-white/60 uppercase tracking-widest mb-2",children:"Error Details"}),t.jsx("p",{className:"text-xs sm:text-sm text-text-primary dark:text-white font-mono break-all",children:e.message})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[t.jsx("button",{onClick:s,className:"px-6 py-3 sm:py-4 bg-navy-primary dark:bg-navy-primary text-white dark:text-white rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-90 active:scale-[0.98] transition-all shadow-lg",children:"Try Again"}),t.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 sm:py-4 bg-bg-primary dark:bg-dark-bg-primary/50 text-text-primary dark:text-white rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-80 transition-all border border-border-soft dark:border-dark-border/30",children:"Reload Page"})]}),t.jsx("p",{className:"text-xs text-text-tertiary dark:text-text-tertiary",children:"If this problem persists, please contact support."})]})})});class W extends e.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:t.jsx($,{error:this.state.error,errorInfo:this.state.errorInfo,onReset:this.handleReset}):this.props.children}}const U=({className:e="",width:r="100%",height:s="1rem"})=>t.jsx("div",{className:`animate-pulse bg-bg-tertiary dark:bg-dark-bg-tertiary rounded ${e}`,style:{width:r,height:s}}),z=({lines:e=3,showHeader:r=!0,showFooter:s=!1})=>t.jsxs("div",{className:"bg-white dark:bg-dark-bg-secondary rounded-xl sm:rounded-2xl border border-border-soft dark:border-dark-border shadow-sm p-4 sm:p-5 space-y-3",children:[r&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(U,{width:"60%",height:"1.25rem"}),t.jsx(U,{width:"40%",height:"0.875rem"})]}),t.jsx("div",{className:"space-y-2",children:Array.from({length:e}).map((r,s)=>t.jsx(U,{width:s===e-1?"80%":"100%",height:"0.875rem"},s))}),s&&t.jsx("div",{className:"pt-2",children:t.jsx(U,{width:"30%",height:"0.75rem"})})]}),G=()=>{const[r,s]=e.useState(null),[a,n]=e.useState(!1),[i,o]=e.useState(!1);e.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)return void o(!0);const e=e=>{e.preventDefault(),s(e),setTimeout(()=>n(!0),3e3)};window.addEventListener("beforeinstallprompt",e);const t=localStorage.getItem("pwa-install-dismissed");if(t){const e=parseInt(t,10);(Date.now()-e)/864e5<7&&n(!1)}return()=>{window.removeEventListener("beforeinstallprompt",e)}},[]);const l=()=>{localStorage.setItem("pwa-install-dismissed",Date.now().toString()),n(!1)};return!i&&a&&r?t.jsx("div",{className:"fixed bottom-20 left-0 right-0 z-50 px-4 sm:px-6 lg:bottom-4 lg:left-auto lg:right-4 lg:max-w-sm",children:t.jsxs("div",{className:"bg-white dark:bg-dark-bg-primary border border-border-soft dark:border-dark-border rounded-xl shadow-2xl p-4 sm:p-6 space-y-3",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-navy-primary dark:bg-yellow-warm rounded-lg flex items-center justify-center",children:t.jsx("img",{src:"/ac-minds-logo.png",alt:"AC MINDS",className:"w-8 h-8 object-contain"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-sm font-black text-text-primary dark:text-white mb-1",children:"Install Grounded"}),t.jsx("p",{className:"text-xs text-text-secondary dark:text-text-secondary",children:"Install this app on your device for a better experience. Works offline and loads faster."})]}),t.jsx("button",{onClick:l,className:"flex-shrink-0 w-6 h-6 flex items-center justify-center text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white","aria-label":"Dismiss",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:l,className:"flex-1 px-4 py-2 text-xs font-bold text-text-secondary dark:text-text-secondary hover:text-text-primary dark:hover:text-white border border-border-soft dark:border-dark-border rounded-lg",children:"Not Now"}),t.jsx("button",{onClick:async()=>{if(!r)return;r.prompt();const{outcome:e}=await r.userChoice;"accepted"===e?(o(!0),n(!1)):(localStorage.setItem("pwa-install-dismissed",Date.now().toString()),n(!1)),s(null)},className:"flex-1 px-4 py-2 bg-navy-primary text-white text-xs font-black uppercase tracking-widest rounded-lg hover:opacity-90",children:"Install"})]})]})}):null},H=({className:r=""})=>{const[s,a]=e.useState(!1),[n,i]=e.useState(null),[o,l]=e.useState(""),[d,c]=e.useState(!1),x=[{emoji:"ðŸ˜",label:"Love it"},{emoji:"ðŸ˜Š",label:"Happy"},{emoji:"ðŸ˜",label:"Neutral"},{emoji:"ðŸ˜•",label:"Unhappy"},{emoji:"ðŸ˜¢",label:"Very unhappy"}];return t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>a(!0),className:`\n          fixed bottom-20 right-4 sm:bottom-6 sm:right-6\n          w-14 h-14 sm:w-16 sm:h-16\n          bg-navy-primary dark:bg-navy-primary\n          text-white\n          rounded-full\n          shadow-2xl\n          flex items-center justify-center\n          hover:scale-110 active:scale-95\n          transition-all duration-200\n          z-40\n          ${r}\n        `,"aria-label":"Send Feedback",title:"Send Feedback",children:t.jsx("svg",{className:"w-6 h-6 sm:w-7 sm:h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),s&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-navy-dark/60 backdrop-blur-sm animate-fade-in",onClick:()=>!d&&a(!1),children:t.jsx("div",{className:"bg-white dark:bg-dark-bg-primary w-full max-w-md rounded-[40px] shadow-2xl overflow-hidden animate-pop relative border border-border-soft dark:border-dark-border",onClick:e=>e.stopPropagation(),children:d?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("span",{className:"text-4xl",children:"âœ…"})}),t.jsx("h3",{className:"text-xl font-black text-text-primary dark:text-white mb-2",children:"Thank You!"}),t.jsx("p",{className:"text-sm text-text-secondary dark:text-text-secondary",children:"Your feedback has been prepared. Check your email client to send it."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-6 border-b border-border-soft dark:border-dark-border flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-black text-text-primary dark:text-white",children:"Send Feedback"}),t.jsx("p",{className:"text-sm text-text-secondary dark:text-text-secondary mt-1",children:"Help us improve Grounded"})]}),t.jsx("button",{onClick:()=>a(!1),className:"w-10 h-10 flex items-center justify-center rounded-full bg-bg-secondary dark:bg-dark-bg-secondary text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-3 block",children:"How do you feel about Grounded?"}),t.jsx("div",{className:"flex items-center justify-around gap-2",children:x.map(e=>t.jsxs("button",{onClick:()=>i(e.emoji),className:`\n                            flex flex-col items-center justify-center\n                            w-16 h-16 sm:w-20 sm:h-20\n                            rounded-2xl\n                            transition-all duration-200\n                            ${n===e.emoji?"bg-yellow-warm dark:bg-yellow-warm scale-110 shadow-lg":"bg-bg-secondary dark:bg-dark-bg-secondary hover:bg-bg-tertiary dark:hover:bg-dark-bg-tertiary"}\n                            active:scale-95\n                          `,"aria-label":e.label,children:[t.jsx("span",{className:"text-3xl sm:text-4xl mb-1",children:e.emoji}),t.jsx("span",{className:"text-[9px] font-semibold "+(n===e.emoji?"text-text-primary dark:text-text-primary":"text-text-secondary dark:text-text-secondary"),children:e.label})]},e.emoji))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-3 block",children:"Additional Feedback (Optional)"}),t.jsx("textarea",{value:o,onChange:e=>l(e.target.value),placeholder:"Tell us what you think, what you'd like to see, or any issues you've encountered...",className:"w-full p-4 rounded-2xl bg-bg-secondary dark:bg-dark-bg-secondary border border-border-soft dark:border-dark-border focus:ring-2 focus:ring-navy-primary/30 dark:focus:ring-navy-primary/50 outline-none text-text-primary dark:text-white min-h-[120px] resize-none text-sm",maxLength:1e3}),t.jsxs("p",{className:"text-xs text-text-tertiary dark:text-text-tertiary mt-2 text-right",children:[o.length,"/1000"]})]})]}),t.jsxs("div",{className:"p-6 border-t border-border-soft dark:border-dark-border",children:[t.jsx("button",{onClick:()=>{if(!n&&!o.trim())return;const e=x.find(e=>e.emoji===n)?.label||"None",t=`mailto:ac.minds.ai@gmail.com?subject=${encodeURIComponent("Grounded App Feedback")}&body=${encodeURIComponent(`Feedback for Grounded App\n\nRating: ${n||"None"} (${e})\n\nFeedback:\n${o.trim()||"(No additional feedback provided)"}\n\n---\nApp Version: 1.12.25\nTimestamp: ${(new Date).toISOString()}`)}`;window.location.href=t,c(!0),setTimeout(()=>{a(!1),c(!1),i(null),l("")},2e3)},disabled:!n&&!o.trim(),className:`\n                      w-full px-6 py-4 rounded-2xl text-xs font-black uppercase tracking-widest\n                      transition-all\n                      ${n||o.trim()?"bg-navy-primary text-white hover:opacity-90 shadow-lg":"bg-bg-secondary dark:bg-dark-bg-secondary text-text-tertiary dark:text-text-tertiary cursor-not-allowed"}\n                    `,children:"Send Feedback"}),t.jsx("p",{className:"text-xs text-text-tertiary dark:text-text-tertiary text-center mt-3",children:"Opens your email client to send feedback"})]})]})})})]})};function V(){return"undefined"!=typeof window&&"__TAURI__"in window}let F=null;async function q(){if(V())try{const e=()=>"@tauri-apps/plugin-store",t=await import(e()),{Store:r}=t;F=new r(".settings.dat")}catch(e){F=null}}let _=!1;async function Y(e){_||await q();try{if(V()&&F)return await F.get(e);{const t=localStorage.getItem(e);if(null===t)return null;try{return JSON.parse(t)}catch{return t}}}catch(t){try{const t=localStorage.getItem(e);if(null===t)return null;try{return JSON.parse(t)}catch{return t}}catch{return null}}}async function J(e,t){_||await q();try{if(V()&&F)await F.set(e,t),await F.save();else{const r="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,r)}}catch(r){try{const r="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,r)}catch(s){}}}async function K(e){_||await q();try{V()&&F?(await F.delete(e),await F.save()):localStorage.removeItem(e)}catch(t){try{localStorage.removeItem(e)}catch(r){}}}async function Z(){if("undefined"==typeof window||!("Notification"in window))return"denied";if(!V())return"default"===Notification.permission?await Notification.requestPermission():Notification.permission;try{return"default"===Notification.permission?await Notification.requestPermission():Notification.permission}catch(e){return"denied"}}function Q(){return"undefined"!=typeof window&&"Notification"in window&&"granted"===Notification.permission}async function X(e,t){if(Q()||"granted"===await Z())try{if(V())try{const r=()=>"@tauri-apps/plugin-notification",s=await import(r()),{sendNotification:a}=s;await a({title:e,body:t?.body||"",icon:t?.icon})}catch(r){new Notification(e,t)}else new Notification(e,t)}catch(r){}}"undefined"!=typeof window&&q().then(()=>{_=!0}).catch(()=>{_=!0});const ee=({progress:e,status:r="loading",label:s,showPercentage:a=!0,className:n="",height:i="md"})=>{const o=Math.max(0,Math.min(100,e)),l={sm:"h-1",md:"h-2",lg:"h-3"};return t.jsxs("div",{className:`w-full ${n}`,children:[(s||a)&&t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s&&t.jsx("span",{className:"text-xs font-semibold text-text-primary dark:text-white",children:s}),a&&t.jsx("span",{className:"text-xs font-bold "+("success"===r?"text-green-600 dark:text-green-400":"error"===r?"text-red-600 dark:text-red-400":"text-text-primary dark:text-white"),children:"success"===r?"Complete":"error"===r?"Failed":`${Math.round(o)}%`})]}),t.jsxs("div",{className:`relative w-full ${l[i]} ${(()=>{switch(r){case"success":return"bg-green-50 dark:bg-green-900/20";case"error":return"bg-red-50 dark:bg-red-900/20";default:return"bg-bg-secondary dark:bg-dark-bg-secondary"}})()} rounded-full overflow-hidden`,children:[t.jsx("div",{className:`absolute top-0 left-0 ${l[i]} ${(()=>{switch(r){case"success":return"bg-green-500 dark:bg-green-400";case"error":return"bg-red-500 dark:bg-red-400";case"loading":return"bg-navy-primary dark:bg-navy-primary";default:return"bg-gray-400 dark:bg-gray-500"}})()} rounded-full transition-all duration-300 ease-out ${"loading"===r?"animate-pulse":""}`,style:{width:`${o}%`}}),"loading"===r&&o>0&&o<100&&t.jsx("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden rounded-full",children:t.jsx("div",{className:"h-full w-1/3 bg-white/30 dark:bg-white/20 animate-shimmer"})})]}),"idle"!==r&&t.jsx("div",{className:"flex items-center justify-center mt-2",children:(()=>{switch(r){case"success":return t.jsx("svg",{className:"w-5 h-5 text-green-500 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})});case"error":return t.jsx("svg",{className:"w-5 h-5 text-red-500 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})});case"loading":return t.jsxs("svg",{className:"w-5 h-5 text-navy-primary dark:text-navy-primary animate-spin",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});default:return null}})()})]})},te=e.lazy(()=>o(()=>import("./Dashboard-C2MrqrfV.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),re=e.lazy(()=>o(()=>import("./ReportView-CnnHcIaX.js"),__vite__mapDeps([8,6,1,2,7,9]))),se=e.lazy(()=>o(()=>import("./VaultControl-BxmuxeCp.js"),__vite__mapDeps([10,1,2,7,6,3,9]))),ae=e.lazy(()=>o(()=>import("./LCSWConfig-CDUAZG3u.js"),__vite__mapDeps([11,6,1,2,7,5,12]))),ne=()=>{const[r,s]=e.useState("checking"),[a,n]=e.useState(null),[i,h]=e.useState([]),[f,j]=e.useState([]),[v,N]=e.useState([]),[S,I]=e.useState({reminders:{enabled:!1,frequency:"daily",time:"09:00"}}),[L,T]=e.useState("onboarding"),[M,$]=e.useState(!1),[U,V]=e.useState(!1);e.useEffect(()=>{let e=!0,t=null;return(async()=>{try{if(u||(g||(g=function(){}.bind()),b||(b=function(){}.bind()),console.error=(...e)=>{k("error",e.join(" "),{args:e}),g.apply(console,e)},console.warn=(...e)=>{k("warning",e.join(" "),{args:e}),b.apply(console,e)},window.addEventListener("error",y),window.addEventListener("unhandledrejection",w),u=!0),l().catch(()=>{}),await D.init(),D.cleanupExpiredTokens().catch(console.error),t=setInterval(()=>{D.cleanupExpiredTokens().catch(console.error)},36e5),!e)return;if(sessionStorage.getItem("userId")){const t=await B();if(!e)return;if(t){n(t.id);const r=await D.getAppData(t.id);if(!e)return;if(r){h(r.values||[]),j(r.logs||[]),N(r.goals||[]);const e=r.settings||{reminders:{enabled:!1,frequency:"daily",time:"09:00"}};e.reminders&&!e.reminders.frequency&&(e.reminders.frequency="daily"),e.aiModel||(e.aiModel="tinyllama"),I(e),e.aiModel&&(c(e.aiModel),x(!1,e.aiModel).catch(()=>{}))}t.termsAccepted?s("app"):s("terms")}else s("login")}else s("login")}catch(r){e&&s("login")}})(),()=>{e=!1,t&&clearInterval(t)}},[]),e.useEffect(()=>{if(a&&"app"===r){const e=setTimeout(async()=>{try{await D.saveAppData(a,{settings:S,logs:f,goals:v,values:i,lcswConfig:S.lcswConfig})}catch(e){}},500);return()=>clearTimeout(e)}},[a,S,f,v,i,r]),e.useEffect(()=>{if("app"===r){const e=setTimeout(()=>{l().catch(()=>{})},1e3);return()=>clearTimeout(e)}},[r]),e.useEffect(()=>{if(!S.reminders.enabled)return;const e=()=>{const e=new Date,t=e.getHours(),r=e.getMinutes();t.toString().padStart(2,"0"),r.toString().padStart(2,"0");const s=e.toISOString().split("T")[0],a=e.getDay(),n=e.getDate();if(!Q())return;const l=i.length>0&&m.find(e=>e.id===i[0])?.name||"your values";let d=!1,c="";const x=S.reminders.frequency||"daily";switch(x){case"hourly":t>=8&&t<20&&0===r&&S.reminders.lastNotifiedHour!==t&&(d=!0,c=`ðŸ’› Hourly Pulse: Are your actions right now aligned with your North Star (${l})?`);break;case"daily":const[e,i]=S.reminders.time.split(":").map(Number);t===e&&r===i&&S.reminders.lastNotifiedDay!==s&&(d=!0,c=`ðŸ’› Time for your daily Grounded check-in. Your North Star is ${l}.`);break;case"weekly":const o=S.reminders.dayOfWeek??0,[x,m]=S.reminders.time.split(":").map(Number);a===o&&t===x&&r===m&&S.reminders.lastNotifiedWeek!==s&&(d=!0,c=`ðŸ’› Weekly Reflection: Time to check in with your North Star (${l}).`);break;case"monthly":const p=S.reminders.dayOfMonth??1,[h,u]=S.reminders.time.split(":").map(Number);n===p&&t===h&&r===u&&S.reminders.lastNotifiedMonth!==s&&(d=!0,c=`ðŸ’› Monthly Reflection: Time to reflect on your North Star (${l}).`);break;default:const[g,b]=S.reminders.time.split(":").map(Number);t===g&&r===b&&S.reminders.lastNotifiedDay!==s&&(d=!0,c=`ðŸ’› Time for your daily Grounded check-in. Your North Star is ${l}.`)}if(d){if(X("Grounded",{body:c,icon:"/favicon.ico"}).catch(e=>{}),S.reminders.useNtfyPush&&S.reminders.ntfyTopic&&o(async()=>{const{sendNtfyNotification:e}=await import("./ntfyService-DcHFu_a1.js");return{sendNtfyNotification:e}},[]).then(({sendNtfyNotification:e})=>{e(c,"Grounded Reminder",{topic:S.reminders.ntfyTopic,server:S.reminders.ntfyServer}).catch(e=>{})}),S.reminders.useDeviceCalendar&&"hourly"!==x){const[e,t]=S.reminders.time.split(":").map(Number),r=new Date;r.setHours(e,t,0,0);const s=`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(`Grounded ${x.charAt(0).toUpperCase()+x.slice(1)} Check-in`)}&details=${encodeURIComponent(c)}&dates=${r.toISOString().replace(/[-:]|\.\d{3}/g,"")}/${new Date(r.getTime()+18e5).toISOString().replace(/[-:]|\.\d{3}/g,"")}`;S.reminders.calendarEventId||(window.open(s,"_blank"),I(e=>({...e,reminders:{...e.reminders,calendarEventId:Date.now().toString()}})))}const e={};"hourly"===x?e.lastNotifiedHour=t:"daily"===x?e.lastNotifiedDay=s:"weekly"===x?e.lastNotifiedWeek=s:"monthly"===x&&(e.lastNotifiedMonth=s),I(t=>({...t,reminders:{...t.reminders,...e}}))}},t=setInterval(e,6e4);return e(),()=>clearInterval(t)},[S.reminders,i]),e.useEffect(()=>{"app"===r&&i.length>0&&"onboarding"===L&&T("home")},[i,L,r]);const F=e=>{h(e),T("home")},q=i.map(e=>m.find(t=>t.id===e)).filter(Boolean),_=i.length>0&&"onboarding"!==L,[Y,J]=e.useState({progress:0,status:"idle",label:"Initializing...",details:""});return e.useEffect(()=>{fetch("http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"App.tsx:454",message:"Progress subscription setup",data:{initialState:Y},timestamp:Date.now(),sessionId:"debug-session",runId:"post-fix",hypothesisId:"A"})}).catch(()=>{});let e=!0;return d(t=>{if(fetch("http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"App.tsx:457",message:"Progress callback invoked",data:{receivedStatus:t.status,receivedLabel:t.label,receivedProgress:t.progress,isFirstCallback:e,willTransform:"idle"===t.status},timestamp:Date.now(),sessionId:"debug-session",runId:"post-fix",hypothesisId:"A"})}).catch(()=>{}),e&&"idle"===t.status&&!t.label)return fetch("http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"App.tsx:461",message:"Skipping first idle callback to preserve initial state",data:{preservedLabel:"Initializing..."},timestamp:Date.now(),sessionId:"debug-session",runId:"post-fix",hypothesisId:"A"})}).catch(()=>{}),void(e=!1);e=!1;const r="idle"===t.status?"loading":t.status;fetch("http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"App.tsx:468",message:"State transformation result",data:{originalStatus:t.status,transformedStatus:r,newLabel:t.label||"Loading..."},timestamp:Date.now(),sessionId:"debug-session",runId:"post-fix",hypothesisId:"A"})}).catch(()=>{}),J({progress:t.progress,status:r,label:t.label||"Loading...",details:t.details||""})})},[]),"checking"===r?t.jsx("div",{className:"min-h-screen bg-bg-primary dark:bg-dark-bg-primary flex items-center justify-center p-4",children:t.jsxs("div",{className:"text-center space-y-6 w-full max-w-md",children:[t.jsx("img",{src:"/ac-minds-logo.png",alt:"AC MINDS",className:"w-20 h-20 object-contain mx-auto"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-xl font-black text-text-primary dark:text-white",children:Y.label}),Y.details&&t.jsx("p",{className:"text-sm text-text-secondary dark:text-text-secondary",children:Y.details}),t.jsx(ee,{progress:Y.progress,status:Y.status,showPercentage:!0,height:"lg",className:"mt-4"})]})]})}):"login"===r?t.jsx(P,{onLogin:async e=>{n(e);const t=await B();if(t)if(t.termsAccepted){const t=await D.getAppData(e);if(t){h(t.values||[]),j(t.logs||[]),N(t.goals||[]);const e=t.settings||{reminders:{enabled:!1,frequency:"daily",time:"09:00"}};e.reminders&&!e.reminders.frequency&&(e.reminders.frequency="daily"),I(e)}s("app")}else s("terms")}}):"terms"===r?t.jsx(O,{onAccept:async()=>{a&&(await async function(e){await D.updateUser(e,{termsAccepted:!0,termsAcceptedDate:(new Date).toISOString()})}(a),s("app"),l().catch(()=>{}))},onDecline:()=>{E(),s("login"),n(null)}}):t.jsx(W,{children:t.jsxs("div",{className:"min-h-screen bg-bg-primary dark:bg-dark-bg-primary text-text-primary dark:text-white flex flex-col transition-colors duration-300",children:[t.jsx("header",{className:"bg-white dark:bg-dark-bg-primary border-b border-border-soft dark:border-dark-border sticky top-0 z-40 shadow-sm dark:shadow-lg",children:t.jsxs("div",{className:"max-w-4xl mx-auto px-3 sm:px-4 h-14 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("img",{src:"/ac-minds-logo.png",alt:"AC MINDS",className:"w-7 h-7 object-contain"}),t.jsx("span",{className:"font-bold text-base sm:text-lg tracking-tight text-text-primary dark:text-white hidden sm:inline",children:"Grounded"})]}),t.jsxs("div",{className:"flex items-center space-x-1.5 sm:space-x-2",children:[_&&t.jsxs("nav",{className:"hidden lg:flex items-center space-x-0.5 sm:space-x-1",children:[t.jsxs("button",{onClick:()=>T("home"),className:"px-2 sm:px-3 py-1.5 rounded-lg text-[10px] sm:text-xs font-bold transition-colors "+("home"===L?"bg-yellow-warm/20 dark:bg-yellow-warm/30 text-yellow-warm dark:text-yellow-warm":"text-text-secondary dark:text-text-secondary hover:text-text-primary dark:hover:text-white hover:bg-bg-secondary dark:hover:bg-dark-bg-secondary"),children:[t.jsx("span",{className:"hidden sm:inline",children:"Home"}),t.jsx("span",{className:"sm:hidden",children:"H"})]}),t.jsxs("button",{onClick:()=>T("values"),className:"px-2 sm:px-3 py-1.5 rounded-lg text-[10px] sm:text-xs font-bold transition-colors "+("values"===L?"bg-yellow-warm/20 dark:bg-yellow-warm/30 text-yellow-warm dark:text-yellow-warm":"text-text-secondary dark:text-text-secondary hover:text-text-primary dark:hover:text-white hover:bg-bg-secondary dark:hover:bg-dark-bg-secondary"),children:[t.jsx("span",{className:"hidden sm:inline",children:"Values"}),t.jsx("span",{className:"sm:hidden",children:"V"})]}),t.jsxs("button",{onClick:()=>T("report"),className:"px-2 sm:px-3 py-1.5 rounded-lg text-[10px] sm:text-xs font-bold transition-colors "+("report"===L?"bg-yellow-warm/20 dark:bg-yellow-warm/30 text-yellow-warm dark:text-yellow-warm":"text-text-secondary dark:text-text-secondary hover:text-text-primary dark:hover:text-white hover:bg-bg-secondary dark:hover:bg-dark-bg-secondary"),children:[t.jsx("span",{className:"hidden sm:inline",children:"Reports"}),t.jsx("span",{className:"sm:hidden",children:"R"})]}),t.jsxs("button",{onClick:()=>T("vault"),className:"px-2 sm:px-3 py-1.5 rounded-lg text-[10px] sm:text-xs font-bold transition-colors "+("vault"===L?"bg-yellow-warm/20 dark:bg-yellow-warm/30 text-yellow-warm dark:text-yellow-warm":"text-text-secondary dark:text-text-secondary hover:text-text-primary dark:hover:text-white hover:bg-bg-secondary dark:hover:bg-dark-bg-secondary"),children:[t.jsx("span",{className:"hidden sm:inline",children:"Vault"}),t.jsx("span",{className:"sm:hidden",children:"V"})]})]}),_&&t.jsx("button",{onClick:()=>V(!0),className:"w-8 h-8 flex items-center justify-center rounded-full text-text-secondary dark:text-text-secondary hover:text-yellow-warm dark:hover:text-yellow-warm hover:bg-yellow-warm/10 dark:hover:bg-yellow-warm/20 transition-all","aria-label":"Configuration",title:"Configuration",children:t.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),t.jsx(A,{}),t.jsx("button",{onClick:()=>$(!0),className:"w-8 h-8 flex items-center justify-center rounded-full text-text-secondary dark:text-text-secondary hover:text-yellow-warm dark:hover:text-yellow-warm hover:bg-yellow-warm/10 dark:hover:bg-yellow-warm/20 transition-all","aria-label":"Help",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsx("button",{onClick:()=>{E(),s("login"),n(null),h([]),j([]),N([]),I({reminders:{enabled:!1,frequency:"daily",time:"09:00"}}),T("onboarding")},className:"w-8 h-8 flex items-center justify-center rounded-full text-text-secondary dark:text-text-secondary hover:text-red-500 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all","aria-label":"Logout",title:"Logout",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})}),t.jsxs("main",{className:"flex-grow max-w-4xl w-full mx-auto px-3 sm:px-4 py-4 sm:py-6 pb-24 lg:pb-6",children:["onboarding"===L&&t.jsx(p,{initialSelected:i,onComplete:F}),"values"===L&&t.jsx(p,{initialSelected:i,onComplete:F}),"home"===L&&t.jsx(e.Suspense,{fallback:t.jsx(z,{lines:5,showHeader:!0}),children:t.jsx(te,{values:q,onLog:e=>{j(t=>[e,...t])},goals:v,onUpdateGoals:e=>{N(e)},logs:f,lcswConfig:S.lcswConfig,onNavigate:e=>T(e)})}),"report"===L&&t.jsx(e.Suspense,{fallback:t.jsx(z,{lines:5,showHeader:!0}),children:t.jsx(re,{logs:f,values:q,lcswConfig:S.lcswConfig})}),"vault"===L&&t.jsx(e.Suspense,{fallback:t.jsx(z,{lines:5,showHeader:!0}),children:t.jsx(se,{logs:f,goals:v,settings:S,onUpdateSettings:I,onClearData:()=>{j([]),h([]),N([]),I({reminders:{enabled:!1,frequency:"daily",time:"09:00"}}),T("onboarding")},selectedValueIds:i})})]}),_&&t.jsx(R,{currentView:L,onViewChange:e=>T(e)}),M&&t.jsx(C,{onClose:()=>$(!1)}),t.jsx(G,{}),"app"===r&&t.jsx(H,{}),U&&t.jsx(e.Suspense,{fallback:t.jsx(z,{lines:5,showHeader:!0}),children:t.jsx(ae,{config:S.lcswConfig,onUpdate:e=>I({...S,lcswConfig:e}),onClose:()=>V(!1),settings:S,onUpdateSettings:I})}),t.jsx("footer",{className:"py-4 text-center text-text-tertiary dark:text-text-tertiary text-[10px] font-medium tracking-wide",children:t.jsx("p",{children:"Private & Secure. All AI processing happens on your device."})})]})})},ie=document.getElementById("root");if(!ie)throw new Error("Could not find root element to mount to");r.createRoot(ie).render(t.jsx(L,{children:t.jsx(ne,{})}));export{m as A,z as S,U as a,Y as b,J as c,K as d,B as g,Q as h,Z as r,X as s};
//# sourceMappingURL=index-C1iKWUY7.js.map
