var N=Object.defineProperty;var r=(s,p)=>N(s,"name",{value:p,configurable:!0});import{r as x,j as e}from"./react-vendor-ByHOp49b.js";import{g as S,A as u}from"./index-WGdxYKHL.js";import{i as D,a as C,s as E}from"./emailService-BJmZKHwj.js";import{EMOTIONAL_STATES as T}from"./emotionalStates-CHdd7_6Z.js";import{V as A}from"./VirtualList-CAMr-1S6.js";import"./vendor-CFU3Mex3.js";import"./transformers-CgLRIXTl.js";import"@tauri-apps/api/core";import"./ai-services-4hnf0_d4.js";const _=r(({logs:s,goals:p,settings:L,onUpdateSettings:R,onClearData:w,selectedValueIds:I=[]})=>{const[V,y]=x.useState(null),[d,h]=x.useState(""),[n,b]=x.useState(""),[g,k]=x.useState(!1);x.useEffect(()=>{S().then(t=>{t&&y(t.id)})},[]);const j=r(async()=>{let t=s;if((d||n)&&(t=s.filter(i=>{const l=new Date(i.date).toISOString().split("T")[0];return!(d&&l<d||n&&l>n)}),t.length===0)){alert("No entries found in the selected date range.");return}const o=u.filter(i=>t.some(l=>l.valueId===i.id)),c=C(t,[],o);await E(c,[])||alert("Could not open email. Please try again.")},"handleEmailExport"),f=[...s].sort((t,o)=>new Date(o.date).getTime()-new Date(t.date).getTime());return e.jsxs("div",{className:"space-y-12 animate-fade-in pb-20 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-bg-primary rounded-xl sm:rounded-2xl border border-border-soft dark:border-dark-border/30 shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 sm:p-8 lg:p-10",children:[e.jsx("h1",{className:"text-2xl sm:text-4xl font-black text-text-primary dark:text-white tracking-tight mb-2",children:"Total Impact"}),e.jsx("p",{className:"text-text-primary/60 dark:text-white/60 text-sm sm:text-lg mb-6",children:"Your journey in numbers"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 sm:gap-6",children:[e.jsx("div",{className:"text-center sm:text-left",children:e.jsxs("p",{className:"text-2xl sm:text-3xl font-black text-text-primary dark:text-white",children:[s.length," Entries"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:r(()=>k(!g),"onClick"),className:"flex-1 sm:flex-none px-4 sm:px-6 py-3 bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-primary dark:text-white rounded-xl sm:rounded-2xl text-xs sm:text-sm font-black uppercase tracking-widest hover:opacity-80 transition-colors",children:d||n?"ðŸ“… Date Range":"ðŸ“… Select Dates"}),e.jsx("button",{onClick:j,className:"flex-1 sm:flex-none px-4 sm:px-6 py-3 bg-yellow-warm text-text-primary rounded-xl sm:rounded-2xl text-xs sm:text-sm font-black uppercase tracking-widest hover:opacity-90 transition-colors",children:D()?"ðŸ“§ Share":"ðŸ“§ Email"}),e.jsx("button",{onClick:w,className:"flex-1 sm:flex-none px-4 sm:px-6 py-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl sm:rounded-2xl text-xs sm:text-sm font-black uppercase tracking-widest hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:"Wipe Data"})]}),g&&e.jsxs("div",{className:"bg-bg-secondary dark:bg-dark-bg-primary/50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-black text-text-primary/60 dark:text-white/60 uppercase tracking-widest block mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:d,onChange:r(t=>h(t.target.value),"onChange"),className:"w-full p-2 rounded-lg bg-white dark:bg-dark-bg-primary border border-border-soft dark:border-dark-border/30 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-black text-text-primary/60 dark:text-white/60 uppercase tracking-widest block mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:n,onChange:r(t=>b(t.target.value),"onChange"),className:"w-full p-2 rounded-lg bg-white dark:bg-dark-bg-primary border border-border-soft dark:border-dark-border/30 text-xs"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:r(()=>{h(""),b("")},"onClick"),className:"flex-1 px-3 py-2 bg-border-soft dark:bg-dark-bg-primary text-text-primary dark:text-white rounded-lg text-xs sm:text-sm font-black uppercase tracking-widest",children:"Clear"}),e.jsx("button",{onClick:r(()=>k(!1),"onClick"),className:"flex-1 px-3 py-2 bg-yellow-warm text-text-primary rounded-lg text-xs sm:text-sm font-black uppercase tracking-widest",children:"Done"})]})]})]})]})]}),e.jsx("div",{className:"p-6 sm:p-8 lg:p-10",children:f.length===0?e.jsxs("div",{className:"text-center py-16 sm:py-20 text-text-primary/30 dark:text-white/30 space-y-4",children:[e.jsx("svg",{className:"w-12 sm:w-16 h-12 sm:h-16 mx-auto opacity-20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),e.jsx("p",{className:"font-bold text-lg sm:text-xl text-text-primary dark:text-white",children:"The Vault is currently empty."}),e.jsx("p",{className:"text-xs sm:text-sm text-text-primary/60 dark:text-white/60",children:"Start by reflecting on your values in the Dashboard."})]}):e.jsx(A,{items:f,itemHeight:100,containerHeight:typeof window<"u"?Math.min(600,window.innerHeight*.6):600,overscan:2,className:"space-y-2",threshold:5,renderItem:r((t,o)=>{const c=u.find(m=>m.id===t.valueId),a=t.type==="goal-completion",i=t.goalText&&!a,l=a?"Goal Achieved":i?"Goal Set":"Reflection",v=new Date(t.date).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});return e.jsxs("details",{className:"group bg-white dark:bg-dark-bg-secondary border border-border-soft dark:border-dark-border rounded-xl overflow-hidden transition-all hover:shadow-md",children:[e.jsx("summary",{className:"cursor-pointer list-none",children:e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24 sm:w-32",children:e.jsx("p",{className:"text-xs sm:text-sm font-black text-text-primary dark:text-white",children:v})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg sm:text-xl flex-shrink-0",title:t.mood||t.emotionalState,children:t.mood||(t.emotionalState?T.find(m=>m.state===t.emotionalState)?.emoji:"âœ¨")}),e.jsx("p",{className:"text-xs sm:text-sm font-black text-text-primary dark:text-white truncate",children:c?.name||"Reflection"})]})}),e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[e.jsx("span",{className:`text-xs sm:text-sm font-black px-2 sm:px-3 py-1 rounded-full uppercase tracking-widest ${a?"bg-calm-sage text-white dark:text-white":i?"bg-yellow-warm text-text-primary dark:text-text-primary":"bg-bg-tertiary dark:bg-dark-bg-tertiary text-text-secondary dark:text-text-secondary"}`,children:l}),e.jsx("svg",{className:"w-4 h-4 text-text-tertiary dark:text-text-tertiary transition-transform group-open:rotate-180 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),e.jsxs("div",{className:"px-4 sm:px-5 pb-4 sm:pb-5 pt-0 space-y-4 border-t border-border-soft dark:border-dark-border",children:[t.note&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-black text-text-primary/60 dark:text-white/60 uppercase tracking-widest mb-2",children:"Reflection"}),e.jsxs("p",{className:"text-sm sm:text-base text-text-primary dark:text-white leading-relaxed italic",children:['"',t.note,'"']})]}),t.deepReflection&&e.jsxs("div",{className:"p-3 sm:p-4 bg-yellow-warm/10 dark:bg-yellow-warm/20 rounded-lg border border-yellow-warm/30",children:[e.jsx("p",{className:"text-xs sm:text-sm font-black text-yellow-warm uppercase tracking-widest mb-2",children:"Deep Reflection"}),e.jsx("p",{className:"text-xs sm:text-sm text-text-primary/80 dark:text-white/80 leading-relaxed",children:t.deepReflection})]}),t.reflectionAnalysis&&e.jsxs("div",{className:"p-3 sm:p-4 bg-bg-secondary dark:bg-dark-bg-primary/50 rounded-lg border border-border-soft dark:border-dark-border/30",children:[e.jsx("p",{className:"text-xs sm:text-sm font-black text-text-primary/60 dark:text-white/60 uppercase tracking-widest mb-2",children:"Reflection Analysis"}),e.jsx("div",{className:"text-xs sm:text-sm text-text-primary/70 dark:text-white/70 leading-relaxed whitespace-pre-line",children:t.reflectionAnalysis})]}),t.goalText&&e.jsxs("div",{className:`p-3 sm:p-4 rounded-lg border ${a?"bg-calm-sage/10 dark:bg-calm-sage/20 border-calm-sage/30":"bg-yellow-warm/10 dark:bg-yellow-warm/20 border-yellow-warm/30"}`,children:[e.jsx("p",{className:`text-xs sm:text-sm font-black uppercase tracking-widest mb-2 ${a?"text-calm-sage":"text-yellow-warm"}`,children:a?"Accomplished Target":"Commitment Target"}),e.jsx("p",{className:`text-xs sm:text-sm font-bold ${a?"text-calm-sage dark:text-calm-sage":"text-text-primary dark:text-white"}`,children:t.goalText})]})]})]},t.id)},"renderItem")})})]}),e.jsx("div",{className:"text-center text-xs text-text-primary/50 dark:text-white/50 font-medium",children:"Encrypted local storage. Your data remains strictly on your device."})]})},"VaultControl");export{_ as default};
