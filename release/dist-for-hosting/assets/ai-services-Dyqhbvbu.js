const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/transformers-CDIsii5h.js","assets/vendor-JrpKAf2Q.js","assets/react-vendor-CQK77wC2.js"])))=>i.map(i=>d[i]);
const e={},t=function(t,i,n){let r=Promise.resolve();if(i&&i.length>0){let t=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),o=n?.nonce||n?.getAttribute("nonce");r=t(i.map(t=>{if((t=function(e){return"/"+e}(t))in e)return;e[t]=!0;const i=t.endsWith(".css"),n=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const r=document.createElement("link");return r.rel=i?"stylesheet":"modulepreload",i||(r.as="script"),r.crossOrigin="",r.href=t,o&&r.setAttribute("nonce",o),document.head.appendChild(r),i?new Promise((e,i)=>{r.addEventListener("load",e),r.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${t}`)))}):void 0}))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(e=>{for(const t of e||[])"rejected"===t.status&&o(t.reason);return t().catch(o)})};function i(){return function(e,t,i,n,r,o,a,s){const c=[],l=[];let h=!0,u="standard";return e||(c.push("SharedArrayBuffer is not available"),l.push("Enable COOP/COEP headers on your server (see SERVER_CONFIG.md)"),h=!1,u="single-threaded"),t||(c.push("Cross-origin isolation is not enabled"),e||l.push("Set Cross-Origin-Opener-Policy: same-origin and Cross-Origin-Embedder-Policy: require-corp headers")),n||(c.push("WebAssembly is not supported"),l.push("Use a modern browser that supports WebAssembly"),h=!1,u="unavailable"),null!==r&&(r<1024?(c.push(`Low device memory detected (${Math.round(r)}MB)`),l.push("Use smaller models or close other applications"),u="low-memory"):r<2048&&(c.push(`Limited device memory (${Math.round(r)}MB)`),l.push("Consider using smaller models for better performance"),"standard"===u&&(u="low-memory"))),i||(c.push("WebGPU is not available"),l.push("GPU acceleration unavailable - will use CPU only"),"standard"===u&&(u="cpu-only")),"mobile"===o&&null!==r&&r<3072&&(c.push("Mobile device with limited memory"),l.push("AI models may be slow or unavailable on this device"),"standard"===u&&(u="low-memory")),n?e||t||(h=!0,u="single-threaded"):(h=!1,u="unavailable"),{sharedArrayBuffer:e,crossOriginIsolated:t,webGPU:i,wasm:n,estimatedMemory:r,deviceType:o,browser:a,os:s,isCompatible:n&&(e||t),issues:c,recommendations:l,canUseAI:h,suggestedStrategy:u}}(function(){try{return"undefined"!=typeof SharedArrayBuffer}catch{return!1}}(),function(){try{return!0===self.crossOriginIsolated}catch{return!1}}(),function(){try{return"gpu"in navigator&&void 0!==navigator.gpu}catch{return!1}}(),function(){try{return"undefined"!=typeof WebAssembly&&"function"==typeof WebAssembly.instantiate}catch{return!1}}(),function(){try{if("deviceMemory"in navigator&&navigator.deviceMemory)return 1024*navigator.deviceMemory;const e=navigator.userAgent.toLowerCase();return/mobile|android|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e)?2048:4096}catch{return null}}(),function(){try{const e=navigator.userAgent.toLowerCase();return/tablet|ipad|playbook|silk/i.test(e)?"tablet":/mobile|android|iphone|ipod|blackberry|iemobile|opera mini/i.test(e)?"mobile":/windows|macintosh|linux/i.test(e)?"desktop":"unknown"}catch{return"unknown"}}(),function(){try{const e=navigator.userAgent;return e.includes("Chrome")&&!e.includes("Edg")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")&&!e.includes("Chrome")?"Safari":e.includes("Edg")?"Edge":e.includes("Opera")||e.includes("OPR")?"Opera":"Unknown"}catch{return"Unknown"}}(),function(){try{const e=navigator.userAgent;return e.includes("Windows")?"Windows":e.includes("Mac OS")?"macOS":e.includes("Linux")?"Linux":e.includes("Android")?"Android":e.includes("iOS")||e.includes("iPhone")||e.includes("iPad")?"iOS":"Unknown"}catch{return"Unknown"}}())}function n(e){return e.canUseAI?"unavailable"===e.suggestedStrategy?"AI models unavailable - WebAssembly not supported":"single-threaded"===e.suggestedStrategy?"AI models available (single-threaded mode) - enable COOP/COEP headers for better performance":"low-memory"===e.suggestedStrategy?"AI models available (low-memory mode) - may be slower":"cpu-only"===e.suggestedStrategy?"AI models available (CPU-only mode) - GPU acceleration unavailable":"AI models available - all features supported":"AI models unavailable - browser compatibility issue"}let r={progress:0,status:"idle",label:""};const o=new Set;function a(e){return fetch("http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"progressTracker.ts:28",message:"subscribeToProgress called",data:{currentStatus:r.status,currentLabel:r.label,currentProgress:r.progress},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{}),o.add(e),fetch("http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"progressTracker.ts:31",message:"Immediately invoking callback with current state",data:{status:r.status,label:r.label,progress:r.progress},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{}),e(r),()=>{o.delete(e)}}function s(e){r=e,o.forEach(t=>{try{t(e)}catch(i){}})}function c(e,t,i){s({progress:Math.max(0,Math.min(100,e)),status:"loading",label:t,details:i})}function l(e="Error",t){s({progress:r.progress,status:"error",label:e,details:t})}const h={distilbert:{name:"DistilBERT",path:"Xenova/distilbert-base-uncased-finetuned-sst-2-english",task:"text-classification",description:"Fast sentiment analysis and mood classification",size:"~67MB"},tinyllama:{name:"TinyLlama",path:"Xenova/TinyLlama-1.1B-Chat-v1.0",task:"text-generation",description:"Best for healthcare/psychology - balanced quality and performance",size:"~637MB"},minicpm:{name:"MiniCPM",path:"Xenova/MiniCPM-2-4B-ONNX",task:"text-generation",description:"Higher quality for complex analysis and detailed reports",size:"~1.5GB"}};let u=null,d=null,y=new Map,m="tinyllama",g=!1,p=null,I=null,S=null;function f(){return u}function _(){return d}function E(){return g}function R(e){m=e}function w(){return h}async function v(){if(u=null,d=null,y.clear(),g=!1,p=null,"caches"in window){const e=await caches.keys();for(const t of e)(t.includes("transformers")||t.includes("model")||t.includes("onnx"))&&await caches.delete(t)}}async function C(e=!1,r){r&&r!==m&&(m=r,(u||d)&&(e=!0));const o=r||m;if(e&&await v(),u&&d&&m===o&&!e)return!0;if(g&&p&&!e)try{return await p,null!==u&&null!==d}catch{return!1}r&&r!==m&&(m=r),g=!0;let a=null;return a=setTimeout(()=>{g&&(g=!1,l("Model loading timeout","Models took too long to load. Using rule-based responses."))},6e4),p=(async()=>{try{if(I=i(),S=null,n(I),!I.canUseAI)return I.wasm?I.sharedArrayBuffer||(S="coop-coep"):S="wasm",g=!1,l("AI models unavailable","SharedArrayBuffer not available. Use HTTP/HTTPS server with COOP/COEP headers."),!1;let _;"undefined"!=typeof window&&(window.__TRANSFORMERS_ENV__=window.__TRANSFORMERS_ENV__||{});try{if(_=await t(()=>import("./transformers-CDIsii5h.js"),__vite__mapDeps([0,1,2])),!_||!_.pipeline)return!1}catch(e){const t=e?.message||String(e),i=e?.stack||"";return t.includes("registerBackend")||t.includes("ort-web")||i.includes("ort-web")?(S="coop-coep",I&&I.sharedArrayBuffer):S=t.includes("memory")||t.includes("OOM")||t.includes("out of memory")?"memory":t.includes("network")||t.includes("fetch")||t.includes("Failed to fetch")?"network":"unknown",!1}const{pipeline:E,env:R}=_;if(!E||!R)throw new Error("Transformers module did not load correctly");if("function"!=typeof E)throw new Error("Pipeline function not available in transformers module");try{if(R.allowLocalModels=!0,R.allowRemoteModels=!0,R.useBrowserCache=!0,R.useCustomCache=!1,R.cacheDir="./models-cache",R.useBrowserCache=!0,R.allowRemoteModels=!0,I){if(!I.webGPU)try{R.backends=R.backends||{}}catch(r){}I.sharedArrayBuffer}}catch(m){}await new Promise(e=>setTimeout(e,100));let w=0,v=0;const C=2,A=e=>{if("progress"===e.status){const t=e.progress?Math.round(100*e.progress):0,i=Math.round(v/C*100+t/C);w=Math.min(100,i);const n=e.name||"model";c(w,"Loading AI models...",`${n}: ${t}%`)}else if("done"===e.status){v++;const t=Math.round(v/C*100);w=Math.min(100,t);const i=e.name||"model";c(w,"Loading AI models...",`${i} loaded`)}},T=h[o];"low-memory"===(I?.suggestedStrategy||"standard")||null!==I?.estimatedMemory&&I.estimatedMemory;try{u=await E(T.task,T.path,{quantized:!0,progress_callback:A}),y.set(o,u)}catch(p){const e=p?.message||String(p),t=p?.stack||"";e.includes("registerBackend")||e.includes("ort-web")||t.includes("ort-web")||e.includes("Cannot read properties")?(S="coop-coep",I&&I.sharedArrayBuffer,u=null):e.includes("memory")||e.includes("OOM")?(S="memory",u=null):(S="unknown",u=null)}let D=!1;if(u)try{"text-generation"===u.task&&(D=!0)}catch{D=!1}if(D)d=u;else{const e="distilbert"===o?"tinyllama":o,t=h[e];if(y.has(e))d=y.get(e);else try{d=await E("text-generation",t.path,{quantized:!0,progress_callback:A}),y.set(e,d)}catch(f){const e=f?.message||String(f),t=f?.stack||"";e.includes("registerBackend")||e.includes("ort-web")||t.includes("ort-web")?(S="coop-coep",d=null):e.includes("memory")||e.includes("OOM")?(S="memory",d=null):(S="unknown",d=null)}}const b=null!==u&&null!==d;return a&&clearTimeout(a),g=!1,b?function(e="Complete"){s({progress:100,status:"success",label:e,details:"All models are ready to use"})}("AI models loaded successfully!"):l("AI models unavailable","App will use rule-based responses"),b}catch(_){a&&clearTimeout(a),g=!1,u=null,d=null,l("Model loading failed","App will use rule-based responses");const e=_ instanceof Error?_.message:String(_);return S||(S=e.includes("registerBackend")||e.includes("backend")||e.includes("ort-web")?"coop-coep":e.includes("memory")||e.includes("OOM")||e.includes("out of memory")?"memory":e.includes("network")||e.includes("fetch")||e.includes("Failed to fetch")?"network":e.includes("WebAssembly")||e.includes("WASM")?"wasm":"unknown"),"coop-coep"===S&&I&&I.sharedArrayBuffer,!1}})(),p}async function A(){try{if(T())return!0;let t=0;const i=4;let n=null;for(;t<i;){t++;try{if(await C())return!0;f(),_()}catch(e){n=e,e instanceof Error?e.message:String(e)}if(t<i){const e=Math.min(1e3*Math.pow(2,t-1),5e3);await new Promise(t=>setTimeout(t,e))}}const r=f(),o=_();if(r||o);else if(n){const e=n instanceof Error?n.message:String(n);e.includes("registerBackend")||e.includes("ort-web")}return!1}catch(e){return!1}}function T(e=!0){return e?null!==u&&null!==d:null!==u||null!==d}function D(){return{loaded:T(),loading:g,moodTracker:null!==u,counselingCoach:null!==d,compatibility:I,errorCategory:S}}function b(){return I}const N=[{phrase:"i want to die",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i want to kill myself",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i am going to kill myself",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i'm suicidal",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i have suicidal thoughts",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i've been thinking about suicide",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i am planning to end my life",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i'm going to end it all",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i'm going to end my life",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i want to end it",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i'm done with life",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i don't want to live anymore",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"life is not worth living",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i'm better off dead",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"everyone would be better off without me",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i wish i hadn't been born",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i wish i were dead",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i wish i didn't exist",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i'm thinking about ending everything",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i just want it all to stop permanently",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i can't go on living like this",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i have no reason to live",category:"CRISIS_SUICIDAL_IDEATION_DIRECT",severity:"critical"},{phrase:"i can't go on",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i can't do this anymore",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i'm at the end of my rope",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i feel trapped",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"there's no way out",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i'm done",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i'm finished",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i'm so tired of this life",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i just want to disappear",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i just want to go to sleep and not wake up",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i don't want to be here anymore",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i don't see a future for myself",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"nothing will ever get better",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"there's no point in trying anymore",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i have nothing to live for",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i'm such a burden",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"people would be better off without me",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"the world would be better if i were gone",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"soon this will all be over",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"if i see you again",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i won't be around much longer",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"you won't have to worry about me soon",category:"CRISIS_SUICIDAL_IDEATION_INDIRECT",severity:"high"},{phrase:"i'm going to jump",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"jump off a bridge",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"jump in front of a train",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"i'm going to take all my pills",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"i'm going to overdose",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"use gun on myself",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"use knife on myself",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"use razor on myself",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"i'm going to hang myself",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"i'm going to drown myself",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"researching painless ways to die",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"looking up how to kill myself",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"how many pills it takes to overdose",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"most effective suicide methods",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"bought a gun for myself",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"bought a rope",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"saving my meds for when i'm ready",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"wrote my suicide note",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"picked the day i'm going to do it",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"i know exactly how i'm going to end my life",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"i have everything ready to end it",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"tried to overdose before",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"tried to cut before",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"tried to jump before",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"tried to hang myself before",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"last time i tried to kill myself",category:"CRISIS_PLANNING_OR_METHOD",severity:"critical"},{phrase:"i've been cutting myself",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i cut myself to cope",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i hurt myself on purpose",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"scratching myself until i bleed",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i've been burning myself",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i punch myself",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i hit my head",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i pull out my hair when i'm upset",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i starve myself on purpose",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i binge and then make myself throw up",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i want to hurt myself",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i'm scared i might hurt myself",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i can't stop hurting myself",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i like seeing myself bleed",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i deserve to be hurt",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i'm thinking about cutting again",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i have the blade ready",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i have the knife ready",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i have the razor ready",category:"CRISIS_SELF_HARM",severity:"high"},{phrase:"i feel hopeless",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"nothing will ever change",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"i feel completely alone",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"i feel empty all the time",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"i'm useless",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"i'm worthless",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"i'm a failure at everything",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"i hate myself",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"i'm disgusting",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"i'm a burden to everyone",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"everyone hates me",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"nobody cares if i live or die",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"no one would miss me",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"i don't matter",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"i have no purpose",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"i'm broken beyond repair",category:"RISK_SEVERE_HOPELESSNESS",severity:"moderate"},{phrase:"i've been giving away my stuff",category:"RISK_BEHAVIORAL_RED_FLAGS",severity:"moderate"},{phrase:"i'm saying goodbye to people",category:"RISK_BEHAVIORAL_RED_FLAGS",severity:"moderate"},{phrase:"i've been writing letters to everyone",category:"RISK_BEHAVIORAL_RED_FLAGS",severity:"moderate"},{phrase:"making sure everything is in order for when i'm gone",category:"RISK_BEHAVIORAL_RED_FLAGS",severity:"moderate"},{phrase:"i quit my job and don't care what happens",category:"RISK_BEHAVIORAL_RED_FLAGS",severity:"moderate"},{phrase:"i've been isolating from everyone",category:"RISK_BEHAVIORAL_RED_FLAGS",severity:"moderate"},{phrase:"i don't talk to my friends or family anymore",category:"RISK_BEHAVIORAL_RED_FLAGS",severity:"moderate"},{phrase:"i stay in my room all day",category:"RISK_BEHAVIORAL_RED_FLAGS",severity:"moderate"},{phrase:"i started drinking a lot more",category:"RISK_BEHAVIORAL_RED_FLAGS",severity:"moderate"},{phrase:"i'm using drugs to escape",category:"RISK_BEHAVIORAL_RED_FLAGS",severity:"moderate"},{phrase:"i've been driving recklessly on purpose",category:"RISK_BEHAVIORAL_RED_FLAGS",severity:"moderate"},{phrase:"i don't care if i get hurt anymore",category:"RISK_BEHAVIORAL_RED_FLAGS",severity:"moderate"},{phrase:"my friend wants to kill themselves",category:"CRISIS_THIRD_PARTY_SUICIDE_RISK",severity:"high"},{phrase:"my friend is talking about suicide",category:"CRISIS_THIRD_PARTY_SUICIDE_RISK",severity:"high"},{phrase:"my friend said they want to die",category:"CRISIS_THIRD_PARTY_SUICIDE_RISK",severity:"high"},{phrase:"someone i know is going to end their life",category:"CRISIS_THIRD_PARTY_SUICIDE_RISK",severity:"high"},{phrase:"my child keeps saying they wish they were dead",category:"CRISIS_THIRD_PARTY_SUICIDE_RISK",severity:"high"},{phrase:"my partner said the world would be better without them",category:"CRISIS_THIRD_PARTY_SUICIDE_RISK",severity:"high"},{phrase:"a friend told me they are going to overdose",category:"CRISIS_THIRD_PARTY_SUICIDE_RISK",severity:"high"},{phrase:"someone i know is cutting themself",category:"CRISIS_THIRD_PARTY_SUICIDE_RISK",severity:"high"},{phrase:"my friend is talking about how they would do it",category:"CRISIS_THIRD_PARTY_SUICIDE_RISK",severity:"high"},{phrase:"my friend wrote a suicide note",category:"CRISIS_THIRD_PARTY_SUICIDE_RISK",severity:"high"},{phrase:"i'm scared my friend will hurt themselves",category:"CRISIS_THIRD_PARTY_SUICIDE_RISK",severity:"high"},{phrase:"i'm going to do it now",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i'm going to do it tonight",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i can't stop myself",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i don't think i can stay safe",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i'm alone and i'm scared of what i might do",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i already took the pills",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i already cut myself and it won't stop bleeding",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i'm bleeding a lot",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i swallowed a lot of pills",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i just tried to hang myself",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i just tried to kill myself",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i'm sitting here with a gun",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i'm sitting here with a knife",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i'm sitting here with pills",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i'm sitting here with a rope",category:"CRISIS_IMMINENT_DANGER",severity:"critical"},{phrase:"i'm in the car ready to drive off the bridge",category:"CRISIS_IMMINENT_DANGER",severity:"critical"}];function O(e){return{CRISIS_SUICIDAL_IDEATION_DIRECT:"Direct Suicide Statements",CRISIS_SUICIDAL_IDEATION_INDIRECT:"Indirect Suicide Statements",CRISIS_PLANNING_OR_METHOD:"Suicide Planning or Methods",CRISIS_SELF_HARM:"Self-Harm",RISK_SEVERE_HOPELESSNESS:"Severe Hopelessness",RISK_BEHAVIORAL_RED_FLAGS:"Behavioral Warning Signs",CRISIS_THIRD_PARTY_SUICIDE_RISK:"Concern for Others",CRISIS_IMMINENT_DANGER:"Immediate Danger"}[e]||e}function L(e,t){const i=e.toLowerCase(),n=[],r=[];let o="low";for(const h of N)i.includes(h.phrase)&&(n.push(h.phrase),r.includes(h.category)||r.push(h.category),"critical"===h.severity?o="critical":"high"===h.severity&&"critical"!==o?o="high":"moderate"===h.severity&&"low"===o&&(o="moderate"));const a=r.some(e=>"RISK_SEVERE_HOPELESSNESS"===e||"RISK_BEHAVIORAL_RED_FLAGS"===e),s=r.some(e=>e.startsWith("CRISIS_"));a&&s&&"moderate"===o&&(o="high");const c=n.length>0;let l="continue";return"critical"===o?l="emergency":"high"===o||r.includes("CRISIS_SELF_HARM")||r.includes("CRISIS_THIRD_PARTY_SUICIDE_RISK")?l="contact_lcsw":c&&(l="show_crisis_info"),{isCrisis:c,severity:o,detectedPhrases:n,recommendedAction:l,categories:r}}function k(e,t){const i=t?.emergencyContact,n=i?`${i.name||"Your therapist"}: ${i.phone}`:"Your therapist or healthcare provider";if("critical"===e.severity||"emergency"===e.recommendedAction)return e.categories?.includes("CRISIS_IMMINENT_DANGER")||e.categories?.includes("CRISIS_PLANNING_OR_METHOD")?`ðŸš¨ **IMMEDIATE SAFETY CONCERN**\n\n**Your safety is the most important thing right now.**\n\n**If you are in immediate danger or feel you might act on thoughts of ending your life, please contact emergency services (911 in the U.S.) or the 988 Suicide & Crisis Lifeline right now.**\n\n**This app cannot help in an emergency. If you are about to harm yourself or someone else, please call 911 or 988, or your local emergency number, immediately.**\n\n**Please also reach out to someone you trust right now**â€”a close friend, family member, or someone who can be with you or check in on you. You don't have to go through this alone.\n\n**Resources available right now:**\nâ€¢ **988 Suicide & Crisis Lifeline** - Dial 988 (24/7, free, confidential)\nâ€¢ **Crisis Text Line** - Text HOME to 741741\nâ€¢ **Emergency Services** - 911 (U.S.) or your local emergency number\nâ€¢ **Your Therapist**: ${n}\n\n**If you have started to carry out a plan to end your life, stop using this app and contact 911, 988, or your local crisis service for urgent help.**\n\n*Feeling suicidal is a medical and emotional emergency, not a personal failure. You deserve support, and help is available.*`:`ðŸš¨ **SAFETY CHECK**\n\n**It sounds like you may be thinking about ending your life or hurting yourself.**\n\n**Are you having thoughts of suicide right now?**\n\n**If you are thinking about suicide or have a plan, your safety is the priority. Please contact emergency services (911 in the U.S.) or the 988 Suicide & Crisis Lifeline right now.**\n\n**This app cannot help in an emergency. If you are about to harm yourself, please call 911 or 988, or your local emergency number, immediately.**\n\n**Please also reach out to someone you trust right now**â€”a close friend, family member, or someone who can be with you. You don't have to go through this alone.\n\n**Resources available right now:**\nâ€¢ **988 Suicide & Crisis Lifeline** - Dial 988 (24/7, free, confidential)\nâ€¢ **Crisis Text Line** - Text HOME to 741741\nâ€¢ **Emergency Services** - 911 (U.S.) or your local emergency number\nâ€¢ **Your Therapist**: ${n}\n\n*You are not alone in feeling this way, and it is OK to talk about suicide. Reaching out for help can make a difference. Many people have thoughts of suicide when pain feels overwhelming. Talking with a trained crisis counselor or mental health professional can help you stay safe.*`;if("high"===e.severity||"contact_lcsw"===e.recommendedAction){const t=e.categories?.includes("CRISIS_SELF_HARM"),i=e.categories?.includes("CRISIS_THIRD_PARTY_SUICIDE_RISK");return t?`âš ï¸ **SUPPORT NEEDED**\n\n**Thank you for sharing this. It sounds like you may be hurting yourself or thinking about self-harm.**\n\n**What has helped you stay safe so far when you've had thoughts of suicide or self-harm?**\n\n**Your safety matters. Please reach out for help:**\n\n1. **Contact your therapist as soon as possible**: ${n}\n2. **988 Suicide & Crisis Lifeline** - Dial 988 (24/7, free, confidential)\n3. **Crisis Text Line** - Text HOME to 741741\n4. **Reach out to someone you trust**â€”a close friend, family member, or someone who can support you right now\n\n**This app is not a crisis or emergency service and cannot keep you safe in an emergency. For urgent help, contact 988, 911, or your local crisis line.**\n\n**If you feel you might act on thoughts of self-harm, please contact a crisis line, emergency services, or your local equivalent immediately.**\n\n*Feeling suicidal is a medical and emotional emergency, not a personal failure. You deserve support, and help is available.*`:i?`âš ï¸ **CONCERN FOR SOMEONE ELSE**\n\n**It sounds like you're concerned about someone else who may be thinking about suicide or self-harm.**\n\n**If someone you know is in immediate danger, please contact emergency services (911) or a crisis line right away.**\n\n**Resources to help:**\nâ€¢ **988 Suicide & Crisis Lifeline** - Dial 988 (24/7, free, confidential)\nâ€¢ **Crisis Text Line** - Text HOME to 741741\nâ€¢ **Emergency Services** - 911 (U.S.) or your local emergency number\nâ€¢ **Your Therapist**: ${n}\n\n**You can also encourage the person to reach out to a trusted friend, family member, or mental health professional.**\n\n*This app is not a crisis or emergency service. For urgent situations, contact local emergency services or crisis lines.*`:`âš ï¸ **SUPPORT AVAILABLE**\n\n**It sounds like you're going through a very difficult time right now.**\n\n**Who in your life (family, friends, professionals) could you contact today to talk about how you're feeling?**\n\n**Please reach out for help:**\n\n1. **Contact your therapist as soon as possible**: ${n}\n2. **988 Suicide & Crisis Lifeline** - Dial 988 (24/7, free, confidential)\n3. **Crisis Text Line** - Text HOME to 741741\n4. **Reach out to a trusted person**â€”a close friend, family member, or someone you trustâ€”and let them know you need support right now\n\n**This app is not a crisis or emergency service and cannot keep you safe in an emergency. For urgent help, contact 988, 911, or your local crisis line.**\n\n**If you are thinking about suicide or self-harm, this app cannot keep you safe. Please call a crisis hotline or emergency services immediately.**\n\n*You are not alone in feeling this way. Reaching out for help can make a difference. Would you consider creating or updating a safety plan with a mental health professional or crisis counselor?*`}return`**SUPPORT AVAILABLE**\n\n**It sounds like you're going through a difficult time. Thank you for sharing this.**\n\n**Please know that support is available:**\n\n1. **Discuss this with your therapist** in your next session: ${n}\n2. **988 Suicide & Crisis Lifeline** - Dial 988 if you need to talk to someone (24/7, free, confidential)\n3. **Crisis Text Line** - Text HOME to 741741\n4. **Consider reaching out to a trusted person**â€”a friend, family member, or someone you trustâ€”and sharing what you're experiencing\n\n**If you are thinking about suicide or self-harm, or feel you might act on harmful thoughts, please stop using the app and reach out to a trusted person or crisis service now.**\n\n**This app cannot help in emergencies. If you are in crisis or considering self-harm, call your local emergency number or a crisis hotline now.**\n\n*This app is not a substitute for professional therapy or crisis support. I can offer general information, but only trained people and local services can provide the immediate help you deserve when you feel suicidal.*`}function P(e,t){const i={},n={};e.forEach(e=>{const r=t.find(t=>t.id===e.valueId)?.name||"Unknown";i[r]=(i[r]||0)+1,e.mood&&(n[e.mood]=(n[e.mood]||0)+1)});const r=Object.entries(i).sort((e,t)=>t[1]-e[1])[0]?.[0]||"N/A",o=Object.entries(n).sort((e,t)=>t[1]-e[1])[0]?.[0]||"N/A";return`# Clinical Summary\n\n## SOAP Format\n\n**Subjective**: Client has logged ${e.length} reflection entries, with primary focus on ${r}. Most common mood indicator: ${o}.\n\n**Objective**: Patterns show engagement with value-based reflection practice. Entries span ${new Date(e[e.length-1]?.date||Date.now()).toLocaleDateString()} to ${new Date(e[0]?.date||Date.now()).toLocaleDateString()}.\n\n**Assessment**: Client is actively engaging in self-reflection and value alignment work.\n\n**Plan**: Continue value-based reflection. Review patterns with LCSW in next session.\n\n---\n\n## DAP Format\n\n**Data**: ${e.length} entries, ${Object.keys(i).length} values engaged, mood tracking active.\n\n**Assessment**: Consistent engagement with reflection practice. Primary value focus: ${r}.\n\n**Plan**: Maintain current practice. Discuss themes and patterns with LCSW.\n\n---\n\n## BIRP Format\n\n**Behavior**: Client consistently logs reflections and tracks mood states.\n\n**Intervention**: Value-based reflection practice, self-monitoring.\n\n**Response**: Active engagement, ${e.length} entries completed.\n\n**Plan**: Continue practice, review with LCSW.\n\n---\n\n*This is a basic summary. For detailed analysis, please review entries manually or discuss with your LCSW.*`}async function M(e,t,i){try{if(0===e.length)return"No logs available for synthesis.";const o=L(e.map(e=>e.note).join(" "));if(o.isCrisis&&"critical"===o.severity){const e=i?.emergencyContact;return`# ðŸš¨ SAFETY CONCERN DETECTED IN LOGS\n\n**Your safety is the priority.** These logs contain language that suggests you may be thinking about ending your life or hurting yourself.\n\n**If you are in immediate danger or feel you might act on thoughts of suicide, please contact emergency services (911 in the U.S.) or the 988 Suicide & Crisis Lifeline right now.**\n\n**This app cannot help in an emergency. If you are about to harm yourself, please call 911 or 988, or your local emergency number, immediately.**\n\n**Please also reach out to someone you trust right now**â€”a close friend, family member, or someone who can be with you. You don't have to go through this alone.\n\n**Resources available right now:**\nâ€¢ **988 Suicide & Crisis Lifeline** - Dial 988 (24/7, free, confidential)\nâ€¢ **Crisis Text Line** - Text HOME to 741741\nâ€¢ **Emergency Services** - 911 (U.S.) or your local emergency number\nâ€¢ **Your Therapist**: ${e?`${e.name||"Your therapist"}: ${e.phone}`:"Your therapist or healthcare provider"}\n\n---\n\n# Clinical Summary\n\nDue to safety concerns detected in these logs, a full clinical summary should be reviewed with your LCSW or mental health professional in person.\n\n*Feeling suicidal is a medical and emotional emergency, not a personal failure. You deserve support, and help is available.*`}if(!_()&&!(await C())){return`${P(e,t)}\n\n---\n\n*This report was generated using rule-based analysis. All processing happens on your device for privacy.*`}const a=`You are a therapy integration assistant helping synthesize a client's reflection logs for review with their LCSW.\n\nGenerate a comprehensive report in SOAP, DAP, and BIRP formats.\n      \nLogs:\n      ${e.map(e=>{const i=t.find(t=>t.id===e.valueId)?.name||"General";return`[${e.date.split("T")[0]}] Value: ${i}, Mood: ${e.mood||"N/A"}, Note: ${e.note}`}).join("\n")}\n      \nFormat your response with clear sections for each format. Keep the tone supportive, clinical yet human, and focused on patterns and themes that would be useful for therapy integration.`;let s=P(e,t),c=_();if(!c)if(E()){const e=3e4,t=Date.now();for(;!c&&Date.now()-t<e;)await new Promise(e=>setTimeout(e,500)),c=_()}else await C(),c=_();if(c)try{const e=await c(a,{max_new_tokens:1e3,temperature:.7,do_sample:!0}),t=(e[0]?.generated_text||"").replace(a,"").trim();t&&(s=t)}catch(n){if(n instanceof Error&&(n.message.includes("not a function")||n.message.includes("Cannot read"))){await C(!0);const e=_();if(e)try{const t=await e(a,{max_new_tokens:1e3,temperature:.7,do_sample:!0}),i=(t[0]?.generated_text||"").replace(a,"").trim();i&&(s=i)}catch(r){}}}return s+"\n\n---\n\n*This report is generated on-device for your personal review and discussion with your LCSW. It is not a substitute for professional clinical assessment.*"}catch(n){return`${P(e,t)}\n\n---\n\n*This report was generated using rule-based analysis. All processing happens on your device for privacy.*`}}function H(e,t,i){const n=e.toLowerCase(),r=[];(n.includes("anxious")||n.includes("worried")||n.includes("stress"))&&r.push("Anxiety/Stress"),(n.includes("sad")||n.includes("down")||n.includes("depressed"))&&r.push("Mood/Low Energy"),(n.includes("work")||n.includes("job")||n.includes("colleague"))&&r.push("Work Environment"),(n.includes("family")||n.includes("relationship")||n.includes("friend"))&&r.push("Interpersonal Relationships"),(n.includes("sleep")||n.includes("tired")||n.includes("exhausted"))&&r.push("Physical Well-being"),0===r.length&&r.push("Self-Reflection","Personal Growth");let o="";o=n.includes("work")||n.includes("office")?"Your work environment appears to be influencing your mental state. Notice how your physical space and work relationships impact your internal experience.":n.includes("home")||n.includes("house")?"Your home environment seems significant in this reflection. Consider how your physical space and home relationships affect your well-being.":"Consider how your environmentâ€”whether work, home, or social spacesâ€”connects to what you're experiencing internally.";const a="quarterly"===t?"monthly":t,s=r.length>0?`Bring the theme of "${r[0]}" to your next session. Consider discussing how your environment and coping strategies are working (or not working) for you right now.`:`Focus on discussing your reflection about ${a} patterns with your therapist. Consider what you want to explore more deeply.`;return`## Core Themes\n${r.slice(0,3).map(e=>`- ${e}`).join("\n")}\n\n## The 'LCSW Lens'\n${o}\n\n## Reflective Inquiry\n${["What specific coping mechanism did you use (or could you use) in response to what you observed?","How might advocating for yourself in this situation look different than what you've done before?"].map((e,t)=>`${t+1}. ${e}`).join("\n")}\n\n## Session Prep\n${s}`}async function U(e,t,i){try{const n=L(e);if(n.isCrisis)return k(n,i);if(!e.trim())return"Please enter your reflection to receive analysis.";const r=i?.protocols||[];return r.length>0&&r.join(", "),H(e,t)}catch(n){return H(e,t)}}async function $(e,t,i,n){try{const a=L(i);if(a.isCrisis)return k(a,n);let s=_();const c=E();if(!s)if(c){const e=3e4,t=Date.now();for(;!s&&Date.now()-t<e;)await new Promise(e=>setTimeout(e,500)),s=_()}else await C(),s=_();const l=n?.protocols||[],h=`You are a supportive therapy integration assistant helping a client between sessions with their LCSW.\n\n${l.length>0?`The user is working with an LCSW using ${l.join(", ")} protocols.`:"The user is working with a licensed clinical social worker."}\n\nYour role is to:\n- Help the client remember and practice what was discussed in therapy\n- Provide structured reflection prompts aligned with their treatment plan\n- Offer psychoeducation and coping skills (NOT diagnoses or crisis handling)\n- Support value-based living and goal achievement\n\nThe client is focusing on the value: "${e.name}" (${e.description}).\nTheir current mood indicator: ${t}\nTheir reflection: "${i}"\n\nProvide a brief, warm, and structured response (2-3 sentences) that:\n1. Validates their experience\n2. Connects to their value\n3. Suggests a small, actionable step they can take before their next session\n\nRemember: You are supporting therapy integration, not providing therapy. Keep responses educational and supportive.`;let u="Your commitment to reflecting on your values is a meaningful step in your journey.";if(s)try{const e=await s(h,{max_new_tokens:150,temperature:.7,do_sample:!0,top_p:.9}),t=(e[0]?.generated_text||"").replace(h,"").trim();t&&(u=t)}catch(r){if(r instanceof Error&&(r.message.includes("not a function")||r.message.includes("Cannot read")||r.message.includes("is not a function"))){await C(!0);const e=_();if(e)try{const t=await e(h,{max_new_tokens:150,temperature:.7,do_sample:!0,top_p:.9}),i=(t[0]?.generated_text||"").replace(h,"").trim();i&&(u=i)}catch(o){}}}return"Your commitment to reflecting on your values is a meaningful step in your journey."===u&&(u=function(e,t){const i={"ðŸŒ±":"growth and adaptation","ðŸ”¥":"momentum and action","âœ¨":"alignment and flow","ðŸ§—":"challenge and resilience"}[t]||"your journey";return`Your focus on ${e.name} during this time of ${i} shows self-awareness. Consider how this reflection connects to what you've discussed with your LCSW. What small step can you take today that aligns with your treatment plan?`}(e,t)),u}catch(r){return`Your focus on ${e.name} shows self-awareness. Consider discussing this reflection with your therapist in your next session.`}}async function F(e,t="âœ¨",i){return $(e,t,"",i)}async function G(e,i,n,r,o){const{getEmotionalState:a}=await t(async()=>{const{getEmotionalState:e}=await import("./emotionalStates-BgybEvQ3.js");return{getEmotionalState:e}},[]),s=a(e);if(!s)return"You're doing important work. Keep going, one step at a time.";const c=r?.protocols||[],l=c.length>0?`The user is working with an LCSW using ${c.join(", ")} protocols.`:"The user is working with a licensed clinical social worker.",h=i?` They're specifically feeling ${i}.`:"",u="morning"===o.timeOfDay?" It is morningâ€”a time for fresh starts and forward momentum.":"evening"===o.timeOfDay||"night"===o.timeOfDay?" It is evening/nightâ€”a time for reflection and rest.":" It is afternoonâ€”a time for continued engagement.",d=o?.recentJournalText?` Recent reflection: "${o.recentJournalText.substring(0,200)}"`:"",y=o?.userPatterns&&o.userPatterns.frequentStates.length>0?` The user has been feeling ${o.userPatterns.frequentStates.join(", ")} frequently.`:"",m="drained"===e||"heavy"===e||"overwhelmed"===e,g=m&&n>=3,p=g?" Strongly encourage them to reach out to a trusted person, their therapist, or a support line (988). Emphasize that they don't have to go through this alone.":m?" Gently suggest that connecting with someone they trust might be helpful.":"",I=s.encouragementPrompt.instruction,S=`You are a supportive therapy integration assistant.${u}${d}${y}\n\nThe user is feeling ${s.label.toLowerCase()}.${h}\n\n${l}\n\n${I}${p}\n\nProvide warm, compassionate encouragement (30-60 words, 2-3 sentences) that:\n1. Acknowledges what they're experiencing\n2. Helps them see possibilities and opportunities ahead\n3. Offers gentle support and next steps${g?"\n4. Strongly encourages reaching out to someone for support":""}\n\nBe genuine, hopeful, and supportive. Avoid platitudes or toxic positivity.`;let f="";f="drained"===e?"Feeling drained is real and valid. Right now might feel heavy, but there are opportunities ahead. Consider reaching out to someone you trustâ€”you don't have to carry this alone. Small steps forward are still progress."+(g?" Please consider reaching out to your therapist, a trusted friend, or the 988 Crisis & Suicide Lifeline. You deserve support.":""):"heavy"===e?"Feeling heavy is understandable. These moments can feel overwhelming, but they also show your capacity to feel deeply. There are possibilities and opportunities waiting for you."+(g?" Please consider reaching out to your therapist, a trusted friend, or a support line (988). You deserve support.":" Consider connecting with someone who cares about you."):"overwhelmed"===e?"Feeling overwhelmed is completely understandable when there's so much happening. Take a moment to breathe. You can break things down into smaller, manageable steps. There are opportunities ahead, and you have the capacity to navigate them."+(g?" Consider reaching out to someone you trust for support.":""):"mixed"===e?"Mixed feelings are completely normal and valid. This in-between space can actually be a place of growth and possibility. There are opportunities ahead, and you have the capacity to navigate them. Consider what feels most authentic to you right now.":"calm"===e?"It's wonderful that you're feeling calm and centered. This peaceful state is a giftâ€”take time to appreciate it and notice what brought you here. There are opportunities to build on this sense of stability.":"hopeful"===e?"Feeling hopeful is a sign of resilience and possibility. This forward-looking energy is valuableâ€”there are opportunities ahead that align with your values and goals. How can you channel this hope into meaningful action?":"positive"===e?"It's wonderful that you're feeling positive and grounded. This is a great time to explore opportunities and possibilities. Consider what you'd like to build on or move toward. You have momentumâ€”how can you channel this energy in meaningful ways?":"You're feeling energized and motivatedâ€”that's powerful! This is a great time to explore opportunities and take meaningful action. What possibilities are calling to you? How can you channel this energy toward what matters most to you?";let R=_();if(!R)if(E()){const e=5e3,t=Date.now();for(;!R&&Date.now()-t<e&&(await new Promise(e=>setTimeout(e,500)),R=_(),E()||R););}else try{const e=C(),t=new Promise((e,t)=>setTimeout(()=>t(new Error("Model initialization timeout")),1e4));await Promise.race([e,t]),R=_()}catch(w){}if(R)try{const e=await R(S,{max_new_tokens:200,temperature:.8,do_sample:!0,top_p:.9}),t=(e[0]?.generated_text||"").replace(S,"").trim();if(t&&t.length>20)return t}catch(w){if(w instanceof Error&&(w.message.includes("not a function")||w.message.includes("Cannot read")||w.message.includes("is not a function"))){await C(!0);const e=_();if(e)try{const t=await e(S,{max_new_tokens:200,temperature:.8,do_sample:!0,top_p:.9}),i=(t[0]?.generated_text||"").replace(S,"").trim();if(i&&i.length>20)return i}catch(v){}}}return f}async function x(e){return{Integrity:"Truth guides me",Family:"Love connects us",Creativity:"Ideas flow freely",Health:"Body and mind unite",Freedom:"I choose my path",Justice:"Fairness for all",Kindness:"Compassion in action",Learning:"Growth through curiosity",Nature:"Earth sustains me",Peace:"Calm within",Respect:"Dignity for all",Service:"Help others rise",Spirituality:"Connection beyond self",Success:"Progress over perfection",Wealth:"Abundance flows",Wisdom:"Insight guides",Authenticity:"Be true to self",Compassion:"Kindness in action",Humor:"Joy lightens the load",Leadership:"Guide with heart",Resilience:"Bounce back stronger",Responsibility:"Own my choices",Courage:"Face fears bravely",Humility:"Learn from all",Loyalty:"Stand by others",Community:"Together we thrive",Artistry:"Create with soul",Curiosity:"Wonder opens doors",Balance:"Harmony in motion",Sustainability:"Care for tomorrow","Open-Mindedness":"Embrace new views",Impact:"Make a difference",Adventure:"Explore boldly"}[e.name]||`Honor ${e.name} today`}async function B(e,t,i="",n){try{if(L(i).isCrisis)return"### Safety First\n- **Description**: Contact your therapist or emergency services if you're in crisis\n- **What this helps with**: Immediate support and safety\n- **How do I measure progress**:\n  1. Reached out to a professional\n  2. Followed your safety plan\n  3. Engaged with your support network";let n=_();if(!n)if(E()){const e=3e4,t=Date.now();for(;!n&&Date.now()-t<e;)await new Promise(e=>setTimeout(e,500)),n=_()}else await C(),n=_();const a=i.includes("Deep Reflection:")||i.trim().length>50,s=i.includes("## Core Themes")||i.includes("## The 'LCSW Lens'")||i.includes("Reflection Analysis:"),c=a||s?`Based on the following deep reflection and analysis, suggest a specific, achievable "commit to do" next step that helps the user see they have options and different approaches to their growth and success.\n\nThe user is focusing on the value: "${e.name}" (${e.description})\nFrequency: ${t}\n\n${i}\n\nActing as a supportive and insightful reflective partner, generate a "commit to do" next guidance that:\n1. Directly addresses the specific themes, insights, and observations from their DEEP REFLECTION\n2. Shows them they have OPTIONS and different approaches (not just one path forward)\n3. Connects to their value: ${e.name}\n4. Is actionable and achievable within the ${t} timeframe\n5. Supports their therapy work and personal growth\n\nThe goal is to help them see multiple pathways and approaches, not just one solution. Show them options.\n\nFormat the response as:\n### Structured Aim\n- **Description**: [One specific action they can commit to do - show them this is ONE option among many]\n- **What this helps with**: [Brief benefit related to their value and the reflection themes - emphasize this is one approach]\n- **How do I measure progress**:\n  1. [First milestone]\n  2. [Second milestone]\n  3. [Third milestone]\n\nKeep it small, specific, and aligned with the insights from their deep reflection. Help them see they have choices.`:`Suggest a specific, achievable micro-goal for someone focusing on the value "${e.name}" (${e.description}).\n\nFrequency: ${t}\nRecent reflection: "${i}"\n\nFormat the response as:\n### Structured Aim\n- **Description**: [One specific action they can take]\n- **What this helps with**: [Brief benefit related to their value]\n- **How do I measure progress**:\n  1. [First milestone]\n  2. [Second milestone]\n  3. [Third milestone]\n\nKeep it small, specific, and aligned with therapy integration.`;let l=`### Structured Aim\n- **Description**: Take one small action today that aligns with ${e.name}\n- **What this helps with**: Building consistency and self-efficacy\n- **How do I measure progress**:\n  1. Identified the action\n  2. Completed the action\n  3. Reflected on the experience`;if(n)try{const e=await n(c,{max_new_tokens:200,temperature:.8,do_sample:!0}),t=(e[0]?.generated_text||"").replace(c,"").trim();t&&(l=t)}catch(r){if(r instanceof Error&&(r.message.includes("not a function")||r.message.includes("Cannot read"))){await C(!0);const e=_();if(e)try{const t=await e(c,{max_new_tokens:200,temperature:.8,do_sample:!0}),i=(t[0]?.generated_text||"").replace(c,"").trim();i&&(l=i)}catch(o){}}}return l}catch(r){return`### Structured Aim\n- **Description**: Practice ${e.name} in one specific way today\n- **What this helps with**: Building value-aligned habits\n- **How do I measure progress**:\n  1. Planned the action\n  2. Took the action\n  3. Noted the outcome`}}export{N as A,t as _,D as a,b,n as c,w as d,U as e,F as f,M as g,x as h,C as i,L as j,B as k,G as l,O as m,a as n,v as o,A as p,T as q,f as r,R as s,_ as t,E as u,i as v,k as w,P as x,$ as y};
//# sourceMappingURL=ai-services-Dyqhbvbu.js.map
