{"version":3,"file":"Dashboard-C2MrqrfV.js","sources":["../../components/MoodTrendChart.tsx","../../components/EmotionSelector.tsx","../../components/AIResponseBubble.tsx","../../components/EncourageSection.tsx","../../components/ReflectionForm.tsx","../../components/ValueCard.tsx","../../components/GoalsSection.tsx","../../components/CrisisResourcesModal.tsx","../../hooks/useDebounce.ts","../../components/Dashboard.tsx","../../hooks/useDashboard.ts"],"sourcesContent":["import React from 'react';\nimport { motion } from 'framer-motion';\nimport { EMOTIONAL_STATES } from '../services/emotionalStates';\n\ninterface MoodData {\n  state: string;\n  emoji: string;\n  label: string;\n  percentage: number;\n  color: string;\n}\n\ninterface MoodTrendChartProps {\n  data: MoodData[];\n}\n\nconst MoodTrendChart: React.FC<MoodTrendChartProps> = ({ data }) => {\n  if (data.length === 0) {\n    return (\n      <div className=\"bg-white dark:bg-dark-bg-secondary rounded-2xl p-6 shadow-sm\">\n        <h3 className=\"text-lg font-semibold text-text-primary dark:text-white mb-4\">\n          Mood Trends\n        </h3>\n        <p className=\"text-text-secondary dark:text-white/70 text-sm\">\n          No mood data available yet. Start logging your reflections to see trends.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white dark:bg-dark-bg-secondary rounded-2xl p-6 space-y-4 shadow-sm\">\n      <h3 className=\"text-lg font-semibold text-text-primary dark:text-white\">\n        Mood Trends\n      </h3>\n      \n      <div className=\"space-y-3\">\n        {data.map((mood, index) => (\n          <div key={`${mood.state}-${index}`} className=\"space-y-1\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"flex items-center space-x-2\">\n                <span className=\"text-xl\">{mood.emoji}</span>\n                <span className=\"text-text-secondary dark:text-white/70\">\n                  {mood.label}\n                </span>\n              </span>\n              <span className=\"font-semibold text-text-primary dark:text-white\">\n                {mood.percentage}%\n              </span>\n            </div>\n            \n            <div className=\"w-full bg-bg-tertiary dark:bg-dark-bg-tertiary rounded-full h-2 overflow-hidden\">\n              <motion.div\n                initial={{ width: 0 }}\n                animate={{ width: `${mood.percentage}%` }}\n                transition={{ duration: 0.5, delay: index * 0.1 }}\n                className=\"h-full rounded-full\"\n                style={{ backgroundColor: mood.color }}\n              />\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(MoodTrendChart);\n\n","import React, { useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport { EMOTIONAL_STATES, EmotionalState } from '../services/emotionalStates';\nimport { hapticFeedback } from '../utils/animations';\n\ninterface EmotionSelectorProps {\n  onSelect: (emotionId: EmotionalState) => void;\n  selected?: EmotionalState;\n  disabled?: boolean;\n}\n\nconst EmotionSelector: React.FC<EmotionSelectorProps> = ({ onSelect, selected, disabled = false }) => {\n  const handleSelect = useCallback((emotionId: EmotionalState) => {\n    if (disabled) return;\n    hapticFeedback('light');\n    onSelect(emotionId);\n  }, [disabled, onSelect]);\n\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-xl font-semibold text-text-primary dark:text-white\">\n        How are you feeling?\n      </h2>\n      \n      {/* 8 states in 4x2 grid on mobile, 4 cols tablet, 8 cols desktop */}\n      <div className=\"grid grid-cols-4 sm:grid-cols-4 lg:grid-cols-8 gap-3\">\n        {EMOTIONAL_STATES.map((emotion, index) => {\n          const isSelected = selected === emotion.state;\n          \n          return (\n            <motion.button\n              key={emotion.state}\n              onClick={() => handleSelect(emotion.state)}\n              disabled={disabled}\n              whileTap={{ scale: 0.95 }}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.3, delay: index * 0.05 }}\n              className={`\n                flex flex-col items-center justify-center p-4 sm:p-5 rounded-2xl\n                transition-all duration-200\n                min-h-[88px] min-w-[88px] sm:min-h-[100px] sm:min-w-[100px]\n                ${isSelected \n                  ? 'ring-4 ring-navy-primary dark:ring-yellow-warm shadow-lg scale-105' \n                  : 'shadow-sm hover:shadow-md'\n                }\n                ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\n                bg-white dark:bg-dark-bg-secondary\n                border-2 ${isSelected \n                  ? 'border-navy-primary dark:border-yellow-warm' \n                  : 'border-border-soft dark:border-dark-border'\n                }\n              `}\n            >\n              <div \n                className=\"w-full h-10 sm:h-12 rounded-lg mb-2 transition-all\"\n                style={{\n                  backgroundColor: emotion.color,\n                  boxShadow: isSelected \n                    ? `0 0 0 2px ${emotion.color}, 0 2px 4px rgba(0,0,0,0.1)` \n                    : 'none'\n                }}\n              />\n              <span className=\"text-2xl sm:text-3xl mb-1\">{emotion.emoji}</span>\n              <span className={`\n                text-xs sm:text-sm font-semibold text-center leading-tight\n                ${isSelected \n                  ? 'text-navy-primary dark:text-yellow-warm' \n                  : 'text-text-primary dark:text-white/70'\n                }\n              `}>\n                {emotion.shortLabel}\n              </span>\n            </motion.button>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(EmotionSelector);\n\n","import React, { useEffect, useState, useCallback } from 'react';\nimport { motion } from 'framer-motion';\n\ninterface AIResponseBubbleProps {\n  message: string;\n  emotion?: string;\n  onActionClick?: (action: 'reflection' | 'values' | 'resources') => void;\n}\n\nconst AIResponseBubble: React.FC<AIResponseBubbleProps> = ({ message, emotion, onActionClick }) => {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    // Fade-in animation\n    const timer = setTimeout(() => setIsVisible(true), 100);\n    return () => clearTimeout(timer);\n  }, []);\n\n  const handleActionClick = useCallback((action: 'reflection' | 'values' | 'resources') => {\n    onActionClick?.(action);\n  }, [onActionClick]);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: isVisible ? 1 : 0, y: isVisible ? 0 : 20 }}\n      transition={{ duration: 0.5, ease: 'easeOut' }}\n      className=\"bg-navy-light/10 dark:bg-dark-bg-secondary rounded-3xl p-6 space-y-4\"\n    >\n      <div className=\"flex items-center space-x-2\">\n        <div className=\"w-8 h-8 bg-navy-primary dark:bg-yellow-warm rounded-full flex items-center justify-center flex-shrink-0\">\n          <span className=\"text-white dark:text-navy-dark text-sm\">üíô</span>\n        </div>\n        <span className=\"text-sm font-semibold text-navy-primary dark:text-yellow-warm\">\n          AI Reflection\n        </span>\n      </div>\n      \n      <p className=\"text-text-primary dark:text-white leading-relaxed\">\n        {message}\n      </p>\n\n      {onActionClick && (\n        <div className=\"space-y-2 pt-2\">\n          <p className=\"text-sm text-text-secondary dark:text-white/70\">\n            Would you like to:\n          </p>\n          <div className=\"space-y-2\">\n            <button\n              onClick={() => handleActionClick('reflection')}\n              className=\"w-full bg-white dark:bg-dark-bg-tertiary text-text-primary dark:text-white rounded-xl p-4 text-left font-medium shadow-sm hover:shadow-md transition-all active:scale-98\"\n            >\n              üìù Write a reflection\n            </button>\n            <button\n              onClick={() => handleActionClick('values')}\n              className=\"w-full bg-white dark:bg-dark-bg-tertiary text-text-primary dark:text-white rounded-xl p-4 text-left font-medium shadow-sm hover:shadow-md transition-all active:scale-98\"\n            >\n              üéØ See your values\n            </button>\n            <button\n              onClick={() => handleActionClick('resources')}\n              className=\"w-full bg-white dark:bg-dark-bg-tertiary text-text-primary dark:text-white rounded-xl p-4 text-left font-medium shadow-sm hover:shadow-md transition-all active:scale-98\"\n            >\n              üìû View resources\n            </button>\n          </div>\n        </div>\n      )}\n    </motion.div>\n  );\n};\n\nexport default React.memo(AIResponseBubble);\n\n","import React from 'react';\nimport { EmotionalState } from '../services/emotionalStates';\nimport { LCSWConfig } from '../types';\nimport EmotionSelector from './EmotionSelector';\nimport AIResponseBubble from './AIResponseBubble';\nimport SkeletonCard from './SkeletonCard';\n\ninterface EncourageSectionProps {\n  encouragementText: string | null;\n  encouragementLoading: boolean;\n  lastEncouragedState: string | null;\n  lowStateCount: number;\n  lcswConfig?: LCSWConfig;\n  values: Array<{ id: string }>;\n  onSelectEmotion: (state: EmotionalState) => void;\n  onActionClick: (action: 'reflection' | 'values' | 'resources') => void;\n  onResetEncouragement: () => void;\n  onOpenFirstValue: () => void;\n}\n\nconst EncourageSection: React.FC<EncourageSectionProps> = ({\n  encouragementText,\n  encouragementLoading,\n  lastEncouragedState,\n  lowStateCount,\n  lcswConfig,\n  values,\n  onSelectEmotion,\n  onActionClick,\n  onResetEncouragement,\n  onOpenFirstValue,\n}) => {\n  return (\n    <div className=\"bg-white dark:bg-dark-bg-secondary rounded-xl sm:rounded-2xl border border-border-soft dark:border-dark-border shadow-sm p-4 sm:p-5\">\n      {!encouragementText && (\n        <EmotionSelector\n          onSelect={onSelectEmotion}\n          selected={lastEncouragedState as EmotionalState | undefined}\n          disabled={encouragementLoading}\n        />\n      )}\n\n      {/* Display AI encouragement message */}\n      {encouragementText && (\n        <div className=\"space-y-4\">\n          <AIResponseBubble\n            message={encouragementText}\n            emotion={lastEncouragedState || undefined}\n            onActionClick={(action) => {\n              if (action === 'reflection') {\n                onOpenFirstValue();\n              } else {\n                onActionClick(action);\n              }\n            }}\n          />\n          \n          {/* Safety net message for repeated low states */}\n          {lowStateCount >= 3 && (lastEncouragedState === 'drained' || lastEncouragedState === 'heavy' || lastEncouragedState === 'overwhelmed') && (\n            <div className=\"mt-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800\">\n              <p className=\"text-sm text-blue-900 dark:text-blue-200 font-medium\">\n                üíô <strong>Consider reaching out:</strong> You've been feeling low several times. Your therapist ({lcswConfig?.emergencyContact?.phone || 'contact them'}), a trusted friend, or the 988 Crisis & Suicide Lifeline can provide support. You don't have to go through this alone.\n              </p>\n            </div>\n          )}\n\n          <button\n            onClick={onResetEncouragement}\n            className=\"w-full py-2 text-sm text-text-secondary dark:text-white/70 hover:text-text-primary dark:hover:text-white transition-colors\"\n          >\n            Choose a different feeling\n          </button>\n        </div>\n      )}\n\n      {encouragementLoading && (\n        <div className=\"space-y-3\">\n          <SkeletonCard lines={2} showHeader={true} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EncourageSection;\n\n","import React from 'react';\nimport { EmotionalState, EMOTIONAL_STATES, getEmotionalState } from '../services/emotionalStates';\nimport { GoalFrequency, ValueItem, LCSWConfig } from '../types';\nimport SkeletonLoader from './SkeletonLoader';\n\ninterface ReflectionFormProps {\n  value: ValueItem;\n  emotionalState: EmotionalState;\n  selectedFeeling: string | null;\n  showFeelingsList: boolean;\n  reflectionText: string;\n  goalText: string;\n  goalFreq: GoalFrequency;\n  reflectionAnalysis: string | null;\n  analyzingReflection: boolean;\n  coachInsight: string | null;\n  valueMantra: string | null;\n  loading: boolean;\n  aiGoalLoading: boolean;\n  lcswConfig?: LCSWConfig;\n  onEmotionalStateChange: (state: EmotionalState) => void;\n  onShowFeelingsListToggle: () => void;\n  onSelectedFeelingChange: (feeling: string) => void;\n  onReflectionTextChange: (text: string) => void;\n  onGoalTextChange: (text: string) => void;\n  onGoalFreqChange: (freq: GoalFrequency) => void;\n  onSuggestGoal: () => void;\n  onCommit: () => void;\n  getReflectionPlaceholder: (freq: GoalFrequency) => string;\n}\n\nconst ReflectionForm: React.FC<ReflectionFormProps> = ({\n  value,\n  emotionalState,\n  selectedFeeling,\n  showFeelingsList,\n  reflectionText,\n  goalText,\n  goalFreq,\n  reflectionAnalysis,\n  analyzingReflection,\n  coachInsight,\n  valueMantra,\n  loading,\n  aiGoalLoading,\n  lcswConfig,\n  onEmotionalStateChange,\n  onShowFeelingsListToggle,\n  onSelectedFeelingChange,\n  onReflectionTextChange,\n  onGoalTextChange,\n  onGoalFreqChange,\n  onSuggestGoal,\n  onCommit,\n  getReflectionPlaceholder,\n}) => {\n  return (\n    <div className=\"mt-4 sm:mt-6 space-y-4 sm:space-y-6 animate-pop border-t border-border-soft dark:border-dark-border/30 pt-4 sm:pt-5\">\n      {/* Emotional State Bar - 8 States */}\n      <div className=\"space-y-3\">\n        <label className=\"text-[8px] font-black text-text-primary/50 dark:text-white/50 uppercase tracking-widest block px-1\">\n          How are you feeling right now?\n        </label>\n        <div className=\"grid grid-cols-4 sm:grid-cols-4 lg:grid-cols-8 gap-1.5 sm:gap-2\">\n          {EMOTIONAL_STATES.map((stateConfig) => {\n            const isSelected = emotionalState === stateConfig.state;\n            return (\n              <button\n                key={stateConfig.state}\n                onClick={() => {\n                  onEmotionalStateChange(stateConfig.state);\n                  onShowFeelingsListToggle();\n                }}\n                className={`flex flex-col items-center p-2 sm:p-3 rounded-lg sm:rounded-xl border-2 transition-all active:scale-95 ${\n                  isSelected\n                    ? 'border-navy-primary dark:border-white shadow-md scale-105 bg-white dark:bg-dark-bg-primary'\n                    : 'border-border-soft dark:border-dark-border/30 hover:border-border-soft dark:hover:border-dark-border/50 bg-white dark:bg-dark-bg-primary'\n                }`}\n              >\n                <div \n                  className=\"w-full h-8 sm:h-10 rounded-md mb-1.5 sm:mb-2 transition-all\"\n                  style={{\n                    backgroundColor: stateConfig.color,\n                    boxShadow: isSelected ? `0 0 0 2px ${stateConfig.color}, 0 2px 4px rgba(0,0,0,0.1)` : 'none'\n                  }}\n                />\n                <span className={`text-[7px] sm:text-[8px] font-black uppercase tracking-tight text-center leading-tight ${\n                  isSelected\n                    ? 'text-text-primary dark:text-white'\n                    : 'text-text-primary/60 dark:text-white/60'\n                }`}>\n                  {stateConfig.shortLabel}\n                </span>\n              </button>\n            );\n          })}\n        </div>\n        \n        {/* Feelings List Modal */}\n        {showFeelingsList && (() => {\n          const currentStateConfig = getEmotionalState(emotionalState);\n          if (!currentStateConfig) return null;\n          \n          return (\n            <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-navy-dark/60 backdrop-blur-sm\" onClick={onShowFeelingsListToggle}>\n              <div className=\"bg-white dark:bg-dark-bg-primary rounded-2xl sm:rounded-3xl shadow-2xl max-w-md w-full max-h-[80vh] overflow-hidden\" onClick={(e) => e.stopPropagation()}>\n                <div className=\"p-4 sm:p-6\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div>\n                      <h3 className=\"text-lg sm:text-xl font-black text-text-primary dark:text-white\">\n                        {currentStateConfig.label}\n                      </h3>\n                      <p className=\"text-xs text-text-primary/60 dark:text-white/60 mt-1\">\n                        {currentStateConfig.reflectionPrompt}\n                      </p>\n                    </div>\n                    <button\n                      onClick={onShowFeelingsListToggle}\n                      className=\"w-8 h-8 flex items-center justify-center rounded-full bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-tertiary hover:text-text-primary dark:hover:text-white\"\n                    >\n                      <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" />\n                      </svg>\n                    </button>\n                  </div>\n                  \n                  <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3\">\n                    {currentStateConfig.feelings.map((feeling) => (\n                      <button\n                        key={feeling}\n                        onClick={() => {\n                          onSelectedFeelingChange(feeling);\n                          onShowFeelingsListToggle();\n                        }}\n                        className={`p-3 sm:p-4 rounded-xl sm:rounded-2xl border-2 transition-all active:scale-95 ${\n                          selectedFeeling === feeling\n                            ? 'border-navy-primary dark:border-white font-bold text-white dark:text-text-primary'\n                            : 'border-border-soft dark:border-dark-border/30 bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-primary dark:text-white hover:border-yellow-warm/50'\n                        }`}\n                        style={selectedFeeling === feeling ? {\n                          backgroundColor: currentStateConfig.color\n                        } : {}}\n                      >\n                        <span className=\"text-xs sm:text-sm capitalize\">{feeling}</span>\n                      </button>\n                    ))}\n                  </div>\n                  \n                  {selectedFeeling && (\n                    <div className=\"mt-4 p-3 bg-yellow-warm/10 dark:bg-yellow-warm/20 rounded-xl border border-yellow-warm/30\">\n                      <p className=\"text-xs text-text-primary dark:text-white\">\n                        <span className=\"font-bold\">Selected:</span> {selectedFeeling}\n                      </p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          );\n        })()}\n        \n        {selectedFeeling && (() => {\n          const currentStateConfig = getEmotionalState(emotionalState);\n          if (!currentStateConfig) return null;\n          return (\n            <div className=\"mt-2 p-2 sm:p-3 bg-yellow-warm/10 dark:bg-yellow-warm/20 rounded-lg border border-yellow-warm/30\">\n              <p className=\"text-[9px] sm:text-[10px] text-text-primary dark:text-white\">\n                <span className=\"font-bold\">Feeling:</span> {selectedFeeling} ({currentStateConfig.shortLabel})\n              </p>\n            </div>\n          );\n        })()}\n      </div>\n\n      <div className=\"bg-navy-primary dark:bg-navy-primary rounded-xl sm:rounded-2xl p-3 sm:p-4 shadow-md border border-navy-primary/20 dark:border-dark-border/50 relative overflow-hidden group\">\n        <p className=\"text-[7px] font-black text-yellow-warm/80 uppercase tracking-widest mb-1.5\">Focus Lens</p>\n        {loading ? (\n          <div className=\"space-y-1.5\">\n            <SkeletonLoader width=\"75%\" height=\"0.625rem\" className=\"bg-yellow-warm/30\" />\n            <SkeletonLoader width=\"50%\" height=\"0.625rem\" className=\"bg-yellow-warm/30\" />\n          </div>\n        ) : (\n          <p className=\"text-white dark:text-white font-medium italic text-[11px] sm:text-xs leading-relaxed relative z-10\">\"{coachInsight}\"</p>\n        )}\n        <div className=\"absolute bottom-2 right-3 sm:right-4 text-[7px] sm:text-[8px] font-black text-yellow-warm/60 uppercase opacity-60\">{valueMantra}</div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4\">\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between px-1\">\n            <label className=\"text-[8px] font-black text-text-primary/50 dark:text-white/50 uppercase tracking-widest\">1. Deep Reflection</label>\n            <span className=\"text-[8px] font-bold text-yellow-warm uppercase tracking-widest\">Systemic Focus</span>\n          </div>\n          <textarea \n            value={reflectionText}\n            onChange={(e) => onReflectionTextChange(e.target.value)}\n            placeholder={getReflectionPlaceholder(goalFreq)}\n            className=\"w-full p-3 sm:p-4 rounded-xl sm:rounded-2xl bg-bg-secondary dark:bg-dark-bg-primary/50 border-none focus:ring-2 focus:ring-yellow-warm/30 outline-none text-text-primary dark:text-white min-h-[140px] sm:min-h-[160px] resize-none text-[10px] sm:text-[11px] leading-relaxed shadow-inner\"\n          />\n          {analyzingReflection && (\n            <div className=\"text-[8px] text-yellow-warm font-bold uppercase tracking-widest animate-pulse\">\n              Analyzing reflection...\n            </div>\n          )}\n          {reflectionAnalysis && !analyzingReflection && (\n            <div className=\"mt-3 p-3 sm:p-4 bg-yellow-warm/10 dark:bg-yellow-warm/20 rounded-xl border border-yellow-warm/30 space-y-3\">\n              <div className=\"text-[8px] font-black text-yellow-warm uppercase tracking-widest\">Reflection Analysis</div>\n              <div className=\"text-[9px] sm:text-[10px] text-text-primary dark:text-white whitespace-pre-line leading-relaxed space-y-2\">\n                {reflectionAnalysis.split('\\n').map((line, idx) => {\n                  if (line.startsWith('##')) {\n                    return <div key={idx} className=\"font-black text-yellow-warm mt-3 first:mt-0\">{line.replace('##', '').trim()}</div>;\n                  } else if (line.startsWith('-') || /^\\d+\\./.test(line.trim())) {\n                    return <div key={idx} className=\"ml-2\">{line}</div>;\n                  } else if (line.trim()) {\n                    return <div key={idx}>{line}</div>;\n                  }\n                  return <br key={idx} />;\n                })}\n              </div>\n            </div>\n          )}\n        </div>\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between items-center px-1\">\n            <label className=\"text-[8px] font-black text-text-primary/50 dark:text-white/50 uppercase tracking-widest\">2. Self-Advocacy Aim</label>\n            <button onClick={onSuggestGoal} disabled={aiGoalLoading} className=\"text-[8px] font-black text-yellow-warm uppercase tracking-widest hover:underline disabled:opacity-50\">\n              {aiGoalLoading ? 'Suggesting...' : '‚ú® Suggest'}\n            </button>\n          </div>\n          <div className=\"space-y-1.5\">\n            <div className=\"flex gap-1\">\n              {(['daily', 'weekly', 'monthly'] as GoalFrequency[]).map(f => (\n                <button key={f} onClick={() => onGoalFreqChange(f)} className={`flex-1 py-1 rounded-lg text-[7px] font-black uppercase tracking-widest transition-all ${goalFreq === f ? 'bg-yellow-warm text-text-primary shadow-sm' : 'bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-primary/40 dark:text-white/40'}`}>{f}</button>\n              ))}\n            </div>\n            <textarea \n              value={goalText}\n              onChange={(e) => onGoalTextChange(e.target.value)}\n              placeholder=\"Define one tool or boundary to implement next.\"\n              className=\"w-full p-3 sm:p-4 rounded-xl sm:rounded-2xl bg-bg-secondary dark:bg-dark-bg-primary/50 border-none focus:ring-2 focus:ring-yellow-warm/30 outline-none text-text-primary dark:text-white min-h-[100px] sm:min-h-[120px] resize-none text-[10px] sm:text-[11px] leading-relaxed shadow-inner\"\n            />\n          </div>\n        </div>\n      </div>\n\n      <button\n        onClick={onCommit}\n        disabled={!reflectionText.trim() && !goalText.trim()}\n        className=\"w-full py-3 sm:py-4 bg-yellow-warm text-text-primary rounded-xl sm:rounded-2xl font-black uppercase tracking-[0.2em] shadow-lg hover:opacity-90 transition-all active:scale-[0.98] disabled:opacity-20 text-[9px] sm:text-[10px]\"\n      >\n        Archive & Commit\n      </button>\n    </div>\n  );\n};\n\nexport default ReflectionForm;\n\n","import React, { useCallback } from 'react';\nimport { ValueItem, Goal, GoalFrequency } from '../types';\nimport ReflectionForm from './ReflectionForm';\n\ninterface ValueCardProps {\n  value: ValueItem;\n  index: number;\n  isActive: boolean;\n  isSuccess: boolean;\n  valueGoals: Goal[];\n  emotionalState: string;\n  selectedFeeling: string | null;\n  showFeelingsList: boolean;\n  reflectionText: string;\n  goalText: string;\n  goalFreq: GoalFrequency;\n  reflectionAnalysis: string | null;\n  analyzingReflection: boolean;\n  coachInsight: string | null;\n  valueMantra: string | null;\n  loading: boolean;\n  aiGoalLoading: boolean;\n  cardRef: (el: HTMLDivElement | null) => void;\n  onToggleActive: () => void;\n  onEmotionalStateChange: (state: string) => void;\n  onShowFeelingsListToggle: () => void;\n  onSelectedFeelingChange: (feeling: string) => void;\n  onReflectionTextChange: (text: string) => void;\n  onGoalTextChange: (text: string) => void;\n  onGoalFreqChange: (freq: GoalFrequency) => void;\n  onSuggestGoal: () => void;\n  onCompleteGoal: (goal: Goal) => void;\n  onCommit: () => void;\n  getReflectionPlaceholder: (freq: GoalFrequency) => string;\n  lcswConfig?: any;\n}\n\nconst ValueCard: React.FC<ValueCardProps> = ({\n  value,\n  index,\n  isActive,\n  isSuccess,\n  valueGoals,\n  emotionalState,\n  selectedFeeling,\n  showFeelingsList,\n  reflectionText,\n  goalText,\n  goalFreq,\n  reflectionAnalysis,\n  analyzingReflection,\n  coachInsight,\n  valueMantra,\n  loading,\n  aiGoalLoading,\n  cardRef,\n  onToggleActive,\n  onEmotionalStateChange,\n  onShowFeelingsListToggle,\n  onSelectedFeelingChange,\n  onReflectionTextChange,\n  onGoalTextChange,\n  onGoalFreqChange,\n  onSuggestGoal,\n  onCompleteGoal,\n  onCommit,\n  getReflectionPlaceholder,\n  lcswConfig,\n}) => {\n  return (\n    <div \n      ref={cardRef}\n      className={`bg-white dark:bg-dark-bg-primary rounded-xl sm:rounded-2xl border transition-all duration-300 ${isActive ? 'border-yellow-warm shadow-lg dark:shadow-xl' : 'border-border-soft dark:border-dark-border/30 shadow-sm hover:border-yellow-warm/50 dark:hover:border-yellow-warm/50'} ${isSuccess ? 'border-calm-sage dark:border-calm-sage ring-2 ring-calm-sage/20 dark:ring-calm-sage/30' : ''}`}\n    >\n      <div className=\"p-3 sm:p-4 md:p-5\">\n        <div className=\"flex items-center justify-between gap-2 sm:gap-3\">\n          <div className=\"flex items-center gap-2 sm:gap-3 flex-grow min-w-0\">\n            <div className={`w-7 h-7 sm:w-8 sm:h-8 rounded-lg flex items-center justify-center text-[10px] sm:text-xs font-black shadow-sm flex-shrink-0 ${index === 0 ? 'bg-yellow-warm text-text-primary' : 'bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-primary/40 dark:text-white/40'}`}>\n              {index + 1}\n            </div>\n            <div className=\"min-w-0 flex-1\">\n              <h3 className=\"text-sm sm:text-base font-black text-text-primary dark:text-white tracking-tight truncate\">{value.name}</h3>\n              <p className=\"text-[7px] font-bold text-text-primary/50 dark:text-white/50 uppercase tracking-widest\">{value.category}</p>\n            </div>\n          </div>\n\n          <button \n            onClick={onToggleActive}\n            className={`px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl font-black text-[8px] sm:text-[9px] uppercase tracking-widest transition-all shadow-sm active:scale-95 flex-shrink-0 ${isActive ? 'bg-navy-primary dark:bg-navy-primary text-white' : 'bg-yellow-warm text-text-primary hover:opacity-90'}`}\n          >\n            <span className=\"hidden sm:inline\">{isActive ? 'Close' : 'Check-in'}</span>\n            <span className=\"sm:hidden\">{isActive ? '‚úï' : '‚úì'}</span>\n          </button>\n        </div>\n\n        {!isActive && valueGoals.length > 0 && (\n          <div className=\"mt-3 pt-3 border-t border-border-soft dark:border-dark-border/30 flex gap-2 overflow-x-auto no-scrollbar pb-1\">\n            {valueGoals.map(goal => (\n              <div key={goal.id} className=\"flex-shrink-0 flex items-center gap-2 bg-bg-secondary dark:bg-dark-bg-primary/50 px-2 sm:px-3 py-1.5 rounded-lg sm:rounded-xl border border-border-soft dark:border-dark-border/30\">\n                <p className=\"text-[9px] sm:text-[10px] font-bold text-text-primary dark:text-white max-w-[100px] sm:max-w-[120px] truncate\">{goal.text}</p>\n                <button \n                  onClick={() => onCompleteGoal(goal)}\n                  className=\"w-5 h-5 bg-calm-sage dark:bg-calm-sage text-white rounded-md flex items-center justify-center shadow-sm active:scale-90 flex-shrink-0\"\n                >\n                  <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={4} d=\"M5 13l4 4L19 7\" /></svg>\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {isActive && (\n          <ReflectionForm\n            value={value}\n            emotionalState={emotionalState as any}\n            selectedFeeling={selectedFeeling}\n            showFeelingsList={showFeelingsList}\n            reflectionText={reflectionText}\n            goalText={goalText}\n            goalFreq={goalFreq}\n            reflectionAnalysis={reflectionAnalysis}\n            analyzingReflection={analyzingReflection}\n            coachInsight={coachInsight}\n            valueMantra={valueMantra}\n            loading={loading}\n            aiGoalLoading={aiGoalLoading}\n            lcswConfig={lcswConfig}\n            onEmotionalStateChange={onEmotionalStateChange as any}\n            onShowFeelingsListToggle={onShowFeelingsListToggle}\n            onSelectedFeelingChange={onSelectedFeelingChange}\n            onReflectionTextChange={onReflectionTextChange}\n            onGoalTextChange={onGoalTextChange}\n            onGoalFreqChange={onGoalFreqChange}\n            onSuggestGoal={onSuggestGoal}\n            onCommit={onCommit}\n            getReflectionPlaceholder={getReflectionPlaceholder}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(ValueCard);\n\n","import React, { useCallback } from 'react';\nimport { Goal, ValueItem } from '../types';\n\ninterface GoalsSectionProps {\n  goals: Goal[];\n  values: ValueItem[];\n  onCompleteGoal: (goal: Goal) => void;\n  onDeleteGoal: (goalId: string) => void;\n}\n\nconst GoalsSection: React.FC<GoalsSectionProps> = ({\n  goals,\n  values,\n  onCompleteGoal,\n  onDeleteGoal,\n}) => {\n  const activeGoals = goals.filter(g => !g.completed);\n\n  if (activeGoals.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"space-y-3 pt-4 sm:pt-6 border-t border-border-soft dark:border-dark-border/30\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-sm sm:text-base font-black text-text-primary dark:text-white tracking-tight\">Active Commitments</h2>\n        <p className=\"text-[8px] font-black text-text-primary/50 dark:text-white/50 uppercase tracking-widest\">The \"Work\"</p>\n      </div>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n        {activeGoals.map(goal => {\n          const val = values.find(v => v.id === goal.valueId);\n          return (\n            <div key={goal.id} className=\"bg-white dark:bg-dark-bg-primary p-3 sm:p-4 rounded-xl sm:rounded-2xl border border-border-soft dark:border-dark-border/30 shadow-sm relative\">\n              <span className=\"absolute top-2 sm:top-3 right-3 sm:right-4 px-1.5 py-0.5 bg-yellow-warm/20 dark:bg-yellow-warm/30 text-yellow-warm rounded-md text-[6px] font-black uppercase tracking-widest\">{goal.frequency}</span>\n              <div className=\"flex items-center gap-1.5 mb-2\">\n                <div className=\"w-1.5 h-1.5 rounded-full bg-yellow-warm\" />\n                <span className=\"text-[8px] font-black text-text-primary/50 dark:text-white/50 uppercase tracking-widest\">{val?.name}</span>\n              </div>\n              <div className=\"text-[10px] sm:text-[11px] font-bold text-text-primary dark:text-white mb-3 sm:mb-4 leading-snug pr-12\">{goal.text}</div>\n              <div className=\"flex gap-2\">\n                <button \n                  onClick={() => onCompleteGoal(goal)}\n                  className=\"flex-1 py-2 bg-calm-sage dark:bg-calm-sage text-white rounded-lg text-[9px] font-black uppercase tracking-widest shadow-sm hover:opacity-90\"\n                >\n                  Done\n                </button>\n                <button \n                  onClick={() => onDeleteGoal(goal.id)}\n                  className=\"w-8 h-8 bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-primary/30 dark:text-white/30 rounded-lg hover:text-red-500 dark:hover:text-red-400 flex items-center justify-center transition-colors\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" /></svg>\n                </button>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(GoalsSection);\n\n","import React from 'react';\nimport { LCSWConfig } from '../types';\n\ninterface CrisisResourcesModalProps {\n  onClose: () => void;\n  lcswConfig?: LCSWConfig;\n}\n\nconst CrisisResourcesModal: React.FC<CrisisResourcesModalProps> = ({ onClose, lcswConfig }) => {\n  return (\n    <div \n      className=\"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 bg-navy-dark/60 backdrop-blur-sm animate-fade-in\"\n      onClick={onClose}\n    >\n      <div \n        className=\"bg-white dark:bg-dark-bg-primary w-full max-w-lg rounded-[40px] shadow-2xl overflow-hidden animate-pop relative border border-border-soft dark:border-dark-border\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <button \n          onClick={onClose}\n          className=\"absolute top-6 right-6 w-10 h-10 flex items-center justify-center rounded-full bg-bg-secondary dark:bg-dark-bg-secondary text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors z-10\"\n        >\n          <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n\n        <div className=\"p-8 sm:p-10 space-y-6 max-h-[90vh] overflow-y-auto\">\n          <div className=\"text-center space-y-2\">\n            <div className=\"text-4xl mb-2\">üìû</div>\n            <h2 className=\"text-2xl sm:text-3xl font-black text-text-primary dark:text-white tracking-tight\">\n              Crisis Resources\n            </h2>\n            <p className=\"text-sm sm:text-base text-text-primary/60 dark:text-white/60\">\n              You're not alone. Help is available 24/7.\n            </p>\n          </div>\n\n          <div className=\"space-y-4\">\n            {/* Emergency Services */}\n            <div className=\"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 sm:p-5 rounded-xl\">\n              <h3 className=\"text-lg font-black text-red-800 dark:text-red-300 mb-2\">\n                üö® Emergency Services\n              </h3>\n              <div className=\"space-y-2 text-sm text-red-700 dark:text-red-200\">\n                <p>\n                  <strong>911</strong> - For immediate emergencies\n                </p>\n                <p className=\"text-xs text-red-600 dark:text-red-300\">\n                  Call 911 if you or someone else is in immediate danger.\n                </p>\n              </div>\n            </div>\n\n            {/* Crisis Hotlines */}\n            <div className=\"bg-yellow-warm/10 dark:bg-yellow-warm/20 border-l-4 border-yellow-warm p-4 sm:p-5 rounded-xl\">\n              <h3 className=\"text-lg font-black text-text-primary dark:text-white mb-3\">\n                üìû Crisis Hotlines (24/7, Free, Confidential)\n              </h3>\n              <div className=\"space-y-3 text-sm text-text-primary dark:text-white\">\n                <div>\n                  <p className=\"font-bold text-base\">988 Suicide & Crisis Lifeline</p>\n                  <p className=\"text-xs text-text-secondary dark:text-text-secondary mt-1\">\n                    Dial <strong>988</strong> or text 988. Available 24/7 for anyone in suicidal crisis or emotional distress.\n                  </p>\n                </div>\n                <div>\n                  <p className=\"font-bold text-base\">Crisis Text Line</p>\n                  <p className=\"text-xs text-text-secondary dark:text-text-secondary mt-1\">\n                    Text <strong>HOME</strong> to <strong>741741</strong>. Free, 24/7 crisis support via text message.\n                  </p>\n                </div>\n                <div>\n                  <p className=\"font-bold text-base\">National Domestic Violence Hotline</p>\n                  <p className=\"text-xs text-text-secondary dark:text-text-secondary mt-1\">\n                    Call <strong>1-800-799-SAFE (7233)</strong> or text START to 88788. 24/7 support for domestic violence.\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Therapist Contact */}\n            {lcswConfig?.emergencyContact?.phone && (\n              <div className=\"bg-navy-primary/10 dark:bg-navy-primary/20 border-l-4 border-navy-primary p-4 sm:p-5 rounded-xl\">\n                <h3 className=\"text-lg font-black text-text-primary dark:text-white mb-2\">\n                  üë§ Your Therapist\n                </h3>\n                <div className=\"space-y-2 text-sm text-text-primary dark:text-white\">\n                  {lcswConfig.emergencyContact.phone && (\n                    <p>\n                      <strong>Phone:</strong> {lcswConfig.emergencyContact.phone}\n                    </p>\n                  )}\n                  {lcswConfig.emergencyContact.email && (\n                    <p>\n                      <strong>Email:</strong> {lcswConfig.emergencyContact.email}\n                    </p>\n                  )}\n                  {lcswConfig.emergencyContact.name && (\n                    <p className=\"text-xs text-text-secondary dark:text-text-secondary mt-1\">\n                      Contact: {lcswConfig.emergencyContact.name}\n                    </p>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* Important Note */}\n            <div className=\"bg-bg-secondary dark:bg-dark-bg-secondary p-4 sm:p-5 rounded-xl border border-border-soft dark:border-dark-border\">\n              <p className=\"text-xs text-text-secondary dark:text-text-secondary leading-relaxed\">\n                <strong>Remember:</strong> These resources are available 24/7. If you're in crisis, don't wait - reach out immediately. Your safety and wellbeing are important.\n              </p>\n            </div>\n          </div>\n\n          <div className=\"pt-4\">\n            <button \n              onClick={onClose}\n              className=\"w-full py-4 bg-navy-primary dark:bg-navy-primary text-white dark:text-white rounded-[24px] font-black uppercase tracking-[0.2em] shadow-xl hover:opacity-90 transition-all active:scale-[0.98]\"\n            >\n              Got it\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CrisisResourcesModal;\n\n","import { useState, useEffect } from 'react';\n\n/**\n * Custom hook to debounce a value\n * Prevents rapid API calls or state updates\n */\nexport function useDebounce<T>(value: T, delay: number): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\n","import React, { useMemo, useState } from 'react';\nimport { ValueItem, LogEntry, Goal, LCSWConfig } from '../types';\nimport { EMOTIONAL_STATES, getEmotionalState } from '../services/emotionalStates';\nimport MoodTrendChart from './MoodTrendChart';\nimport EncourageSection from './EncourageSection';\nimport ValueCard from './ValueCard';\nimport GoalsSection from './GoalsSection';\nimport SkeletonCard from './SkeletonCard';\nimport CrisisResourcesModal from './CrisisResourcesModal';\nimport { useDashboard } from '../hooks/useDashboard';\n\ninterface DashboardProps {\n  values: ValueItem[];\n  onLog: (entry: LogEntry) => void;\n  goals: Goal[];\n  onUpdateGoals: (goals: Goal[]) => void;\n  logs: LogEntry[];\n  lcswConfig?: LCSWConfig;\n  onNavigate?: (view: 'values' | 'report' | 'vault') => void;\n}\n\nconst Dashboard: React.FC<DashboardProps> = ({ values, onLog, goals, onUpdateGoals, logs, lcswConfig, onNavigate }) => {\n  const dashboard = useDashboard(values, goals, logs, lcswConfig, onLog, onUpdateGoals);\n  const [showResourcesModal, setShowResourcesModal] = useState(false);\n\n  // Get personalized greeting based on time of day\n  const getGreeting = () => {\n    const hour = new Date().getHours();\n    if (hour < 12) return 'Good morning';\n    if (hour < 18) return 'Good afternoon';\n    return 'Good evening';\n  };\n\n  const getTimeEmoji = () => {\n    const hour = new Date().getHours();\n    if (hour < 12) return 'üåÖ';\n    if (hour < 18) return '‚òÄÔ∏è';\n    return 'üåô';\n  };\n\n  // Calculate mood trends from logs (last 7 days)\n  const moodData = useMemo(() => {\n    if (logs.length === 0) return [];\n    \n    const sevenDaysAgo = new Date();\n    sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\n    const recentLogs = logs.filter(log => new Date(log.date) >= sevenDaysAgo);\n    \n    const stateCounts: Record<string, number> = {};\n    recentLogs.forEach(log => {\n      if (log.emotionalState) {\n        stateCounts[log.emotionalState] = (stateCounts[log.emotionalState] || 0) + 1;\n      }\n    });\n    \n    const total = recentLogs.length || 1;\n    \n    return EMOTIONAL_STATES.map(state => {\n      const count = stateCounts[state.state] || 0;\n      return {\n        state: state.state,\n        emoji: state.emoji,\n        label: state.shortLabel,\n        percentage: Math.round((count / total) * 100),\n        color: state.color\n      };\n    }).filter(mood => mood.percentage > 0).sort((a, b) => b.percentage - a.percentage).slice(0, 4);\n  }, [logs]);\n\n  const topValue = values.length > 0 ? values[0] : null;\n  const displayMantra = dashboard.valueMantra || dashboard.topValueMantra || \"Be Here Now\";\n\n  const handleActionClick = (action: 'reflection' | 'values' | 'resources') => {\n    if (action === 'reflection') {\n      if (values.length > 0) {\n        dashboard.setActiveValueId(values[0].id);\n      }\n    } else if (action === 'values') {\n      if (onNavigate) {\n        onNavigate('values');\n      }\n    } else if (action === 'resources') {\n      setShowResourcesModal(true);\n    }\n  };\n\n  const handleOpenFirstValue = () => {\n    if (values.length > 0) {\n      dashboard.setActiveValueId(values[0].id);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4 sm:space-y-6 animate-fade-in pb-20 lg:pb-12\">\n      {/* Personalized Greeting */}\n      <div className=\"space-y-2\">\n        <h1 className=\"text-2xl sm:text-3xl font-black text-text-primary dark:text-white\">\n          {getGreeting()} {getTimeEmoji()}\n        </h1>\n        <p className=\"text-text-secondary dark:text-white/70\">\n          How are you feeling today?\n        </p>\n      </div>\n\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0\">\n        <div>\n          <h2 className=\"text-lg sm:text-xl font-black text-text-primary dark:text-white tracking-tight\">Compass Engine</h2>\n          <p className=\"text-[9px] font-black text-text-primary/50 dark:text-white/50 uppercase tracking-widest\">Observe & Document</p>\n        </div>\n        <div className=\"text-left sm:text-right\">\n          <p className=\"text-[9px] font-black text-yellow-warm uppercase tracking-widest\">Active Focus</p>\n          <p className=\"text-sm sm:text-base font-black text-text-primary dark:text-white leading-tight\">{values.length} Core Values</p>\n        </div>\n      </div>\n\n      {/* Encourage Section */}\n      <EncourageSection\n        encouragementText={dashboard.encouragementText}\n        encouragementLoading={dashboard.encouragementLoading}\n        lastEncouragedState={dashboard.lastEncouragedState}\n        lowStateCount={dashboard.lowStateCount}\n        lcswConfig={lcswConfig}\n        values={values}\n        onSelectEmotion={dashboard.handleEmotionalEncourage}\n        onActionClick={handleActionClick}\n        onResetEncouragement={dashboard.resetEncouragement}\n        onOpenFirstValue={handleOpenFirstValue}\n      />\n\n      {/* Mood Trends Section */}\n      {moodData.length > 0 && (\n        <div className=\"space-y-3\">\n          <h3 className=\"text-lg font-semibold text-text-primary dark:text-white\">\n            üìä Your Week at a Glance\n          </h3>\n          <MoodTrendChart data={moodData} />\n        </div>\n      )}\n\n      {/* Today's Focus Section */}\n      {topValue && (\n        <div className=\"bg-gradient-to-br from-yellow-warm/20 to-yellow-light/20 dark:from-yellow-warm/10 dark:to-yellow-light/10 rounded-2xl p-6 space-y-2\">\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-2xl\">üéØ</span>\n            <h3 className=\"text-lg font-semibold text-text-primary dark:text-white\">\n              Today's Focus\n            </h3>\n          </div>\n          <p className=\"text-text-primary dark:text-white font-medium\">\n            {topValue.name}\n          </p>\n          <p className=\"text-text-secondary dark:text-white/70 italic\">\n            \"{displayMantra}\"\n          </p>\n        </div>\n      )}\n\n      {/* Recent Reflections Timeline */}\n      {logs.length > 0 && (\n        <div className=\"space-y-3\">\n          <h3 className=\"text-lg font-semibold text-text-primary dark:text-white\">\n            ‚ú® Recent Reflections\n          </h3>\n          \n          <div className=\"space-y-2\">\n            {logs.slice(0, 3).map((log) => {\n              const logDate = new Date(log.date);\n              const dateStr = logDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n              const value = values.find(v => v.id === log.valueId);\n              const stateConfig = log.emotionalState ? getEmotionalState(log.emotionalState) : null;\n              const emoji = stateConfig ? stateConfig.emoji : 'üìù';\n              \n              return (\n                <div key={log.id} className=\"bg-white dark:bg-dark-bg-secondary rounded-xl p-4 shadow-sm\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className=\"text-sm text-text-secondary dark:text-white/70\">\n                      {dateStr}\n                    </span>\n                    <span className=\"text-xl\">{emoji}</span>\n                  </div>\n                  <p className=\"text-text-primary dark:text-white line-clamp-2 text-sm\">\n                    {log.note || log.deepReflection || 'Reflection entry'}\n                  </p>\n                  {value && (\n                    <p className=\"text-xs text-text-tertiary dark:text-white/50 mt-1\">\n                      {value.name}\n                    </p>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* Value Cards */}\n      <div className=\"grid grid-cols-1 gap-3\">\n        {values.map((value, index) => {\n          const isActive = dashboard.activeValueId === value.id;\n          const isSuccess = dashboard.lastLoggedId === value.id;\n          const valueGoals = goals.filter(g => g.valueId === value.id && !g.completed);\n          const activeValue = values.find(v => v.id === dashboard.activeValueId);\n\n          return (\n            <ValueCard\n              key={value.id}\n              value={value}\n              index={index}\n              isActive={isActive}\n              isSuccess={isSuccess}\n              valueGoals={valueGoals}\n              emotionalState={dashboard.emotionalState}\n              selectedFeeling={dashboard.selectedFeeling}\n              showFeelingsList={dashboard.showFeelingsList}\n              reflectionText={dashboard.reflectionText}\n              goalText={dashboard.goalText}\n              goalFreq={dashboard.goalFreq}\n              reflectionAnalysis={dashboard.reflectionAnalysis}\n              analyzingReflection={dashboard.analyzingReflection}\n              coachInsight={dashboard.coachInsight}\n              valueMantra={dashboard.valueMantra}\n              loading={dashboard.loading}\n              aiGoalLoading={dashboard.aiGoalLoading}\n              cardRef={(el) => {\n                dashboard.valueCardRefs.current[value.id] = el;\n              }}\n              onToggleActive={() => {\n                if (isActive) {\n                  dashboard.setEmotionalState('mixed');\n                  dashboard.setSelectedFeeling(null);\n                  dashboard.setShowFeelingsList(false);\n                }\n                dashboard.setActiveValueId(isActive ? null : value.id);\n              }}\n              onEmotionalStateChange={(state) => dashboard.setEmotionalState(state as any)}\n              onShowFeelingsListToggle={() => dashboard.setShowFeelingsList(!dashboard.showFeelingsList)}\n              onSelectedFeelingChange={(feeling) => dashboard.setSelectedFeeling(feeling)}\n              onReflectionTextChange={(text) => dashboard.setReflectionText(text)}\n              onGoalTextChange={(text) => dashboard.setGoalText(text)}\n              onGoalFreqChange={(freq) => dashboard.setGoalFreq(freq)}\n              onSuggestGoal={() => activeValue && dashboard.handleSuggestGoal(activeValue)}\n              onCompleteGoal={dashboard.handleCompleteGoal}\n              onCommit={() => dashboard.handleCommit(value.id)}\n              getReflectionPlaceholder={dashboard.getReflectionPlaceholder}\n              lcswConfig={lcswConfig}\n            />\n          );\n        })}\n      </div>\n\n      {/* Goals Section */}\n      <GoalsSection\n        goals={goals}\n        values={values}\n        onCompleteGoal={dashboard.handleCompleteGoal}\n        onDeleteGoal={dashboard.handleDeleteGoal}\n      />\n\n      {/* Crisis Resources Modal */}\n      {showResourcesModal && (\n        <CrisisResourcesModal\n          onClose={() => setShowResourcesModal(false)}\n          lcswConfig={lcswConfig}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default React.memo(Dashboard);\n","import { useState, useEffect, useRef, useCallback } from 'react';\nimport { ValueItem, LogEntry, Goal, GoalFrequency, LCSWConfig } from '../types';\nimport { EmotionalState } from '../services/emotionalStates';\nimport { generateEncouragement, generateEmotionalEncouragement, generateValueMantra, suggestGoal, detectCrisis, analyzeReflection } from '../services/aiService';\nimport { shareViaEmail, generateGoalsEmail } from '../services/emailService';\nimport { useDebounce } from './useDebounce';\nimport { getItem, setItem, removeItem } from '../services/storage';\n\nexport function useDashboard(\n  values: ValueItem[],\n  goals: Goal[],\n  logs: LogEntry[],\n  lcswConfig: LCSWConfig | undefined,\n  onLog: (entry: LogEntry) => void,\n  onUpdateGoals: (goals: Goal[]) => void\n) {\n  const [activeValueId, setActiveValueId] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [lastLoggedId, setLastLoggedId] = useState<string | null>(null);\n  \n  const [guideMood, setGuideMood] = useState<'üå±' | 'üî•' | '‚ú®' | 'üßó'>('‚ú®');\n  const [emotionalState, setEmotionalState] = useState<EmotionalState>('mixed');\n  const [selectedFeeling, setSelectedFeeling] = useState<string | null>(null);\n  const [showFeelingsList, setShowFeelingsList] = useState(false);\n  const debouncedGuideMood = useDebounce(guideMood, 500);\n  const [reflectionText, setReflectionText] = useState('');\n  const [goalText, setGoalText] = useState('');\n  const [goalFreq, setGoalFreq] = useState<GoalFrequency>('daily');\n  const [aiGoalLoading, setAiGoalLoading] = useState(false);\n  \n  const [coachInsight, setCoachInsight] = useState<string | null>(null);\n  const [valueMantra, setValueMantra] = useState<string | null>(null);\n  const [reflectionAnalysis, setReflectionAnalysis] = useState<string | null>(null);\n  const [analyzingReflection, setAnalyzingReflection] = useState(false);\n  \n  // Encourage section state\n  const [encouragementText, setEncouragementText] = useState<string | null>(null);\n  const [encouragementLoading, setEncouragementLoading] = useState(false);\n  const [lastEncouragedState, setLastEncouragedState] = useState<string | null>(null);\n  const [lowStateCount, setLowStateCount] = useState(0);\n  \n  const debouncedReflectionText = useDebounce(reflectionText, 2000);\n  \n  // Refs for scrolling to value cards\n  const valueCardRefs = useRef<Record<string, HTMLDivElement | null>>({});\n\n  // Load/save drafts\n  useEffect(() => {\n    if (activeValueId) {\n      Promise.all([\n        getItem<string>(`draft_reflection_${activeValueId}`),\n        getItem<string>(`draft_goal_${activeValueId}`)\n      ]).then(([savedRef, savedGoal]) => {\n        if (savedRef) setReflectionText(savedRef);\n        if (savedGoal) setGoalText(savedGoal);\n      }).catch(console.error);\n    }\n  }, [activeValueId]);\n\n  useEffect(() => {\n    if (activeValueId) {\n      setItem(`draft_reflection_${activeValueId}`, reflectionText).catch(console.error);\n      setItem(`draft_goal_${activeValueId}`, goalText).catch(console.error);\n    }\n  }, [reflectionText, goalText, activeValueId]);\n\n  // Analyze reflection when user stops typing\n  useEffect(() => {\n    if (debouncedReflectionText.trim() && activeValueId) {\n      setAnalyzingReflection(true);\n      analyzeReflection(debouncedReflectionText, goalFreq, lcswConfig)\n        .then(analysis => {\n          setReflectionAnalysis(analysis);\n          setAnalyzingReflection(false);\n        })\n        .catch(error => {\n          console.error('Reflection analysis error:', error);\n          setReflectionAnalysis(null);\n          setAnalyzingReflection(false);\n        });\n    } else {\n      setReflectionAnalysis(null);\n    }\n  }, [debouncedReflectionText, goalFreq, activeValueId, lcswConfig]);\n\n  // AI Motivation Refresh\n  useEffect(() => {\n    if (activeValueId) {\n      const activeValue = values.find(v => v.id === activeValueId);\n      if (activeValue) {\n        setLoading(true);\n        Promise.all([\n          generateEncouragement(activeValue, debouncedGuideMood, lcswConfig),\n          generateValueMantra(activeValue)\n        ]).then(([insight, mantra]) => {\n          setCoachInsight(insight);\n          setValueMantra(mantra);\n          setLoading(false);\n        }).catch(error => {\n          console.error(\"AI Motivation Error:\", error);\n          setCoachInsight(\"There was an issue connecting to the AI coach. Focusing on the present moment is a powerful step.\");\n          setValueMantra(\"Be Here Now\");\n          setLoading(false);\n        });\n      }\n    } else {\n      setCoachInsight(null);\n    }\n  }, [debouncedGuideMood, activeValueId, values, lcswConfig]);\n\n  // Generate mantra for top value on mount\n  const [topValueMantra, setTopValueMantra] = useState<string | null>(null);\n  useEffect(() => {\n    if (values.length > 0 && !topValueMantra) {\n      const topValue = values[0];\n      generateValueMantra(topValue)\n        .then(mantra => setTopValueMantra(mantra))\n        .catch(() => setTopValueMantra(\"Be Here Now\"));\n    }\n  }, [values, topValueMantra]);\n\n  // Scroll to value card when it opens\n  useEffect(() => {\n    if (activeValueId && valueCardRefs.current[activeValueId]) {\n      setTimeout(() => {\n        valueCardRefs.current[activeValueId]?.scrollIntoView({ \n          behavior: 'smooth', \n          block: 'center' \n        });\n      }, 100);\n    }\n  }, [activeValueId]);\n\n  const getReflectionPlaceholder = useCallback((freq: GoalFrequency) => {\n    const daily = [\n      \"The Hour: Dominant mood 'flavor'? Thought, person, or sensation triggered it?\",\n      \"The Day: When did I feel 'connected' vs 'checked out'?\",\n      \"Daily Win: One small boundary set or self-care moment followed through?\",\n      \"Energy Audit: What interaction drained the battery? How to recharge?\"\n    ].join('\\n\\n');\n\n    const weekly = [\n      \"The Narrative: If this week was a book chapter, what would the title be?\",\n      \"Coping Check: Which therapy tools felt like life jackets? Which felt like anchors?\",\n      \"Social Environment: How did my body feel after leaving specific social spaces?\",\n      \"Unfinished Business: What am I still 'chewing on' or feeling heavy about?\"\n    ].join('\\n\\n');\n\n    const monthly = [\n      \"Growth Marker: What feels slightly less daunting than it did 30 days ago?\",\n      \"Recurring Theme: What 'broken record' thought kept appearing? What is it saying?\",\n      \"External Impact: How have systemic factors (finances, work) influenced me?\",\n      \"Goal Alignment: Am I moving toward my treatment plan version of self?\"\n    ].join('\\n\\n');\n\n    if (freq === 'weekly') return weekly;\n    if (freq === 'monthly' || freq === 'quarterly') return monthly;\n    return daily;\n  }, []);\n\n  const handleSuggestGoal = useCallback(async (value: ValueItem) => {\n    setAiGoalLoading(true);\n    try {\n      const crisisCheck = detectCrisis(reflectionText, lcswConfig);\n      if (crisisCheck.isCrisis && crisisCheck.recommendedAction !== 'continue') {\n        setGoalText(`### Safety First\\n\\n‚ö†Ô∏è Your reflection contains concerning content. Please contact your therapist or emergency services if needed.\\n\\nEmergency: ${lcswConfig?.emergencyContact?.phone || '911'}\\nCrisis Line: 988`);\n        setAiGoalLoading(false);\n        return;\n      }\n      const deepReflectionContext = reflectionText.trim() \n        ? `Deep Reflection:\\n${reflectionText}\\n\\n${reflectionAnalysis ? `Reflection Analysis:\\n${reflectionAnalysis}` : ''}`\n        : (reflectionAnalysis || '');\n      const suggestion = await suggestGoal(value, goalFreq, deepReflectionContext, lcswConfig);\n      setGoalText(suggestion);\n    } catch (error) {\n      console.error(\"AI Goal Error:\", error);\n      setGoalText(\"Error suggesting a goal. Try writing a small, simple one yourself!\");\n    } finally {\n      setAiGoalLoading(false);\n    }\n  }, [reflectionText, reflectionAnalysis, goalFreq, lcswConfig]);\n\n  const handleCompleteGoal = useCallback(async (goal: Goal) => {\n    const completedGoal = { ...goal, completed: true };\n    onLog({\n      id: Date.now().toString() + \"-done\",\n      date: new Date().toISOString(),\n      valueId: goal.valueId,\n      livedIt: true,\n      note: `Achieved Commitment: ${goal.text.substring(0, 40)}...`,\n      type: 'goal-completion',\n      goalText: goal.text\n    });\n    onUpdateGoals(goals.map(g => g.id === goal.id ? completedGoal : g));\n\n    if (lcswConfig?.emergencyContact?.phone || lcswConfig?.emergencyContact) {\n      const emailData = generateGoalsEmail([], values, [completedGoal]);\n      const therapistEmails = lcswConfig?.emergencyContact ? [] : [];\n      await shareViaEmail(emailData, therapistEmails);\n    }\n  }, [goals, values, lcswConfig, onLog, onUpdateGoals]);\n\n  const handleDeleteGoal = useCallback((goalId: string) => {\n    onUpdateGoals(goals.filter(g => g.id !== goalId));\n  }, [goals, onUpdateGoals]);\n\n  const handleEmotionalEncourage = useCallback(async (state: EmotionalState) => {\n    setEncouragementLoading(true);\n    setLastEncouragedState(state);\n    setEncouragementText(null);\n    \n    let newLowStateCount: number;\n    if (state === 'drained' || state === 'heavy' || state === 'overwhelmed') {\n      newLowStateCount = lowStateCount + 1;\n      setLowStateCount(newLowStateCount);\n    } else {\n      newLowStateCount = 0;\n      setLowStateCount(0);\n    }\n    \n    const hour = new Date().getHours();\n    const timeOfDay: 'morning' | 'afternoon' | 'evening' | 'night' = \n      hour < 12 ? 'morning' : hour < 18 ? 'afternoon' : hour < 22 ? 'evening' : 'night';\n    \n    const recentJournalText = logs\n      .slice(0, 3)\n      .map(log => log.note || log.deepReflection || '')\n      .filter(Boolean)\n      .join(' ')\n      .substring(0, 500);\n    \n    try {\n      const encouragement = await generateEmotionalEncouragement(\n        state,\n        selectedFeeling,\n        newLowStateCount,\n        lcswConfig,\n        {\n          recentJournalText: recentJournalText || undefined,\n          timeOfDay,\n          userPatterns: {\n            frequentStates: [],\n            progress: 0\n          }\n        }\n      );\n      setEncouragementText(encouragement);\n    } catch (error) {\n      console.error('Encouragement generation error:', error);\n      setEncouragementText(\"You're doing important work. Keep going, one step at a time.\");\n    } finally {\n      setEncouragementLoading(false);\n    }\n  }, [logs, selectedFeeling, lowStateCount, lcswConfig]);\n\n  const handleCommit = useCallback((valueId: string) => {\n    if (!reflectionText.trim() && !goalText.trim()) return;\n\n    const combinedText = `${reflectionText} ${goalText}`.trim();\n    const crisisCheck = detectCrisis(combinedText, lcswConfig);\n    \n    if (crisisCheck.isCrisis && crisisCheck.severity === 'critical') {\n      const crisisMessage = `üö® CRISIS DETECTED\\n\\nYour entry contains crisis indicators. Please:\\n\\n1. Contact emergency services: 911\\n2. Contact your therapist: ${lcswConfig?.emergencyContact?.phone || 'Your therapist\\'s emergency line'}\\n3. Crisis hotline: 988\\n\\nThis app cannot provide crisis support. Please connect with a professional immediately.`;\n      alert(crisisMessage);\n    }\n\n    const timestamp = new Date().toISOString();\n\n    if (goalText.trim()) {\n      const newGoal: Goal = {\n        id: Date.now().toString() + \"-goal\",\n        valueId,\n        text: goalText,\n        frequency: goalFreq,\n        completed: false,\n        createdAt: timestamp,\n        updates: []\n      };\n      onUpdateGoals([newGoal, ...goals]);\n    }\n\n    onLog({\n      id: Date.now().toString() + \"-log\",\n      date: timestamp,\n      valueId,\n      livedIt: true,\n      note: reflectionText.trim() || \"Observed without judgment.\",\n      mood: guideMood,\n      type: goalText.trim() ? 'goal-update' : 'standard',\n      goalText: goalText.trim() || undefined,\n      deepReflection: reflectionText.trim() || undefined,\n      reflectionAnalysis: reflectionAnalysis || undefined,\n      emotionalState: emotionalState,\n      selectedFeeling: selectedFeeling || undefined\n    });\n    \n    setEmotionalState('mixed');\n    setSelectedFeeling(null);\n\n    removeItem(`draft_reflection_${valueId}`).catch(console.error);\n    removeItem(`draft_goal_${valueId}`).catch(console.error);\n\n    setLastLoggedId(valueId);\n    setTimeout(() => setLastLoggedId(null), 2000);\n    \n    setReflectionText('');\n    setGoalText('');\n    setCoachInsight(null);\n    setValueMantra(null);\n    setActiveValueId(null);\n  }, [reflectionText, goalText, goalFreq, emotionalState, selectedFeeling, guideMood, reflectionAnalysis, lcswConfig, goals, onLog, onUpdateGoals]);\n\n  return {\n    // State\n    activeValueId,\n    loading,\n    lastLoggedId,\n    emotionalState,\n    selectedFeeling,\n    showFeelingsList,\n    reflectionText,\n    goalText,\n    goalFreq,\n    aiGoalLoading,\n    coachInsight,\n    valueMantra,\n    reflectionAnalysis,\n    analyzingReflection,\n    encouragementText,\n    encouragementLoading,\n    lastEncouragedState,\n    lowStateCount,\n    topValueMantra,\n    valueCardRefs,\n    \n    // Setters\n    setActiveValueId,\n    setEmotionalState,\n    setSelectedFeeling,\n    setShowFeelingsList,\n    setReflectionText,\n    setGoalText,\n    setGoalFreq,\n    \n    // Handlers\n    handleSuggestGoal,\n    handleCompleteGoal,\n    handleDeleteGoal,\n    handleEmotionalEncourage,\n    handleCommit,\n    getReflectionPlaceholder,\n    \n    // Reset encouragement\n    resetEncouragement: useCallback(() => {\n      setEncouragementText(null);\n      setLastEncouragedState(null);\n    }, []),\n  };\n}\n\n"],"names":["MoodTrendChart$1","React","memo","data","length","jsxs","className","children","jsx","map","mood","index","emoji","label","percentage","motion","div","initial","width","animate","transition","duration","delay","style","backgroundColor","color","state","EmotionSelector$1","onSelect","selected","disabled","handleSelect","useCallback","emotionId","hapticFeedback","emotion","isSelected","button","onClick","whileTap","scale","opacity","y","boxShadow","shortLabel","AIResponseBubble$1","message","onActionClick","isVisible","setIsVisible","useState","useEffect","timer","setTimeout","clearTimeout","handleActionClick","action","ease","EncourageSection","encouragementText","encouragementLoading","lastEncouragedState","lowStateCount","lcswConfig","values","onSelectEmotion","onResetEncouragement","onOpenFirstValue","EmotionSelector","AIResponseBubble","emergencyContact","phone","SkeletonCard","lines","showHeader","ReflectionForm","value","emotionalState","selectedFeeling","showFeelingsList","reflectionText","goalText","goalFreq","reflectionAnalysis","analyzingReflection","coachInsight","valueMantra","loading","aiGoalLoading","onEmotionalStateChange","onShowFeelingsListToggle","onSelectedFeelingChange","onReflectionTextChange","onGoalTextChange","onGoalFreqChange","onSuggestGoal","onCommit","getReflectionPlaceholder","EMOTIONAL_STATES","stateConfig","currentStateConfig","getEmotionalState","e","stopPropagation","reflectionPrompt","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","feelings","feeling","SkeletonLoader","height","onChange","target","placeholder","split","line","idx","startsWith","replace","trim","test","f","ValueCard$1","isActive","isSuccess","valueGoals","cardRef","onToggleActive","onCompleteGoal","ref","name","category","goal","text","id","GoalsSection$1","goals","onDeleteGoal","activeGoals","filter","g","completed","val","find","v","valueId","frequency","CrisisResourcesModal","onClose","email","useDebounce","debouncedValue","setDebouncedValue","handler","Dashboard_default","onLog","onUpdateGoals","logs","onNavigate","dashboard","activeValueId","setActiveValueId","setLoading","lastLoggedId","setLastLoggedId","guideMood","setGuideMood","setEmotionalState","setSelectedFeeling","setShowFeelingsList","debouncedGuideMood","setReflectionText","setGoalText","setGoalFreq","setAiGoalLoading","setCoachInsight","setValueMantra","setReflectionAnalysis","setAnalyzingReflection","setEncouragementText","setEncouragementLoading","setLastEncouragedState","setLowStateCount","debouncedReflectionText","valueCardRefs","useRef","Promise","all","getItem","then","savedRef","savedGoal","catch","console","error","setItem","analyzeReflection","analysis","activeValue","generateEncouragement","generateValueMantra","insight","mantra","topValueMantra","setTopValueMantra","topValue","current","scrollIntoView","behavior","block","freq","daily","join","weekly","monthly","handleSuggestGoal","async","crisisCheck","detectCrisis","isCrisis","recommendedAction","deepReflectionContext","suggestion","suggestGoal","handleCompleteGoal","completedGoal","Date","now","toString","date","toISOString","livedIt","note","substring","type","emailData","generateGoalsEmail","therapistEmails","shareViaEmail","handleDeleteGoal","goalId","handleEmotionalEncourage","newLowStateCount","hour","getHours","timeOfDay","recentJournalText","slice","log","deepReflection","Boolean","encouragement","generateEmotionalEncouragement","userPatterns","frequentStates","progress","handleCommit","combinedText","severity","alert","timestamp","newGoal","createdAt","updates","removeItem","resetEncouragement","useDashboard","showResourcesModal","setShowResourcesModal","moodData","useMemo","sevenDaysAgo","setDate","getDate","recentLogs","stateCounts","forEach","total","count","Math","round","sort","a","b","displayMantra","getGreeting","getTimeEmoji","MoodTrendChart","dateStr","toLocaleDateString","month","day","ValueCard","el","GoalsSection"],"mappings":"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"}