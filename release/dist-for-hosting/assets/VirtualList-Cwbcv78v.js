import{R as e,r as t,j as n}from"./react-vendor-CQK77wC2.js";const i=e.memo(function({items:i,renderItem:l,itemHeight:r=80,containerHeight:o=400,overscan:s=3,className:a="",onScroll:c,threshold:h=10}){const[d,m]=t.useState(0),u=t.useRef(null),f=t.useRef(null),g=i.length>h,{startIndex:x,endIndex:p,totalHeight:v,offsetY:y}=t.useMemo(()=>{if(!g)return{startIndex:0,endIndex:i.length-1,totalHeight:i.length*r,offsetY:0};const e=Math.ceil(o/r),t=Math.max(0,Math.floor(d/r)-s);return{startIndex:t,endIndex:Math.min(i.length-1,t+e+2*s),totalHeight:i.length*r,offsetY:t*r}},[d,i.length,r,o,s,g]),j=t.useMemo(()=>g?i.slice(x,p+1).map((e,t)=>({item:e,index:x+t})):i.map((e,t)=>({item:e,index:t})),[i,x,p,g]),w=t.useCallback(e=>{const t=e.currentTarget.scrollTop;requestAnimationFrame(()=>{m(t)}),c&&(f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{c(t)},16))},[c]);return e.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]),g?n.jsx("div",{ref:u,className:`overflow-auto ${a}`,style:{height:o,willChange:"scroll-position",WebkitOverflowScrolling:"touch"},onScroll:w,children:n.jsx("div",{style:{height:v,position:"relative",willChange:"contents"},children:n.jsx("div",{style:{transform:`translate3d(0, ${y}px, 0)`,position:"absolute",top:0,left:0,right:0,willChange:"transform",backfaceVisibility:"hidden",perspective:1e3,transformOrigin:"top left",contain:"layout style paint"},children:j.map(({item:e,index:t})=>n.jsx("div",{style:{height:r,willChange:"auto",contain:"layout style"},children:l(e,t)},e.id||t))})})}):n.jsx("div",{ref:u,className:`overflow-auto ${a}`,style:{height:o,willChange:"scroll-position"},onScroll:w,children:j.map(({item:e,index:t})=>n.jsx("div",{children:l(e,t)},e.id||t))})});export{i as V};
//# sourceMappingURL=VirtualList-Cwbcv78v.js.map
