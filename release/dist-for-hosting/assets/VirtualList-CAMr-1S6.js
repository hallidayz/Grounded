var S=Object.defineProperty;var w=(l,i)=>S(l,"name",{value:i,configurable:!0});import{R as T,r as o,j as r}from"./react-vendor-ByHOp49b.js";function V({items:l,renderItem:i,itemHeight:n=80,containerHeight:c=400,overscan:u=3,className:h="",onScroll:f,threshold:j=10}){const[p,I]=o.useState(0),x=o.useRef(null),s=o.useRef(null),a=l.length>j,{startIndex:d,endIndex:g,totalHeight:b,offsetY:m}=o.useMemo(()=>{if(!a)return{startIndex:0,endIndex:l.length-1,totalHeight:l.length*n,offsetY:0};const e=Math.ceil(c/n),t=Math.max(0,Math.floor(p/n)-u),C=Math.min(l.length-1,t+e+u*2),R=l.length*n,M=t*n;return{startIndex:t,endIndex:C,totalHeight:R,offsetY:M}},[p,l.length,n,c,u,a]),v=o.useMemo(()=>a?l.slice(d,g+1).map((e,t)=>({item:e,index:d+t})):l.map((e,t)=>({item:e,index:t})),[l,d,g,a]),y=o.useCallback(e=>{const t=e.currentTarget.scrollTop;requestAnimationFrame(()=>{I(t)}),f&&(s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{f(t)},16))},[f]);return T.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]),a?r.jsx("div",{ref:x,className:`overflow-auto ${h}`,style:{height:c,willChange:"scroll-position",WebkitOverflowScrolling:"touch"},onScroll:y,children:r.jsx("div",{style:{height:b,position:"relative",willChange:"contents"},children:r.jsx("div",{style:{transform:`translate3d(0, ${m}px, 0)`,position:"absolute",top:0,left:0,right:0,willChange:"transform",backfaceVisibility:"hidden",perspective:1e3,transformOrigin:"top left",contain:"layout style paint"},children:v.map(({item:e,index:t})=>r.jsx("div",{style:{height:n,willChange:"auto",contain:"layout style"},children:i(e,t)},e.id||t))})})}):r.jsx("div",{ref:x,className:`overflow-auto ${h}`,style:{height:c,willChange:"scroll-position"},onScroll:y,children:v.map(({item:e,index:t})=>r.jsx("div",{children:i(e,t)},e.id||t))})}w(V,"VirtualList");const k=T.memo(V);export{k as V};
