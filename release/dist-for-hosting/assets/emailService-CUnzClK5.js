var h=Object.defineProperty;var c=(a,o)=>h(a,"name",{value:o,configurable:!0});import{x as m,i as $,r as g,u as y,p as S,a as b,b as D,s as G,d as C,y as E,z as M,q as v,B as w,c as T,k as R,C as A,g as L,D as x,h as N,f as I,E as j,j as U,l as k,e as _}from"./ai-services-BeY8le4t.js";const V=Object.freeze(Object.defineProperty({__proto__:null,analyzeReflection:_,areModelsLoaded:S,checkBrowserCompatibility:w,clearModels:m,detectCrisis:R,generateCounselingGuidance:j,generateEmotionalEncouragement:I,generateEncouragement:N,generateFallbackReport:x,generateHumanReports:L,generateValueMantra:U,getAllModelConfigs:C,getCompatibilityReport:D,getCompatibilitySummary:T,getCounselingCoachModel:M,getCrisisResponse:A,getIsModelLoading:v,getModelStatus:b,getMoodTrackerModel:E,initializeModels:$,preloadModels:g,preloadModelsContinuously:y,setSelectedModel:G,suggestGoal:k},Symbol.toStringTag,{value:"Module"})),f=new Map;function O(a,o){if(f.has(a))return f.get(a);const r=o();return f.set(a,r),r}c(O,"getCachedTemplate");function q(){return typeof navigator<"u"&&"share"in navigator}c(q,"isWebShareAvailable");async function W(a,o=[]){try{if(q()){const r={title:a.subject,text:a.body};try{return await navigator.share(r),!0}catch(d){d.name!=="AbortError"&&console.warn("Web Share failed, using mailto fallback:",d)}}return F(a,o)}catch(r){return console.error("Email share error:",r),!1}}c(W,"shareViaEmail");function F(a,o){try{const r=o.length>0?o.join(","):"",d=encodeURIComponent(a.subject),u=encodeURIComponent(a.body),e=`mailto:${r}?subject=${d}&body=${u}`;return window.location.href=e,!0}catch(r){return console.error("Mailto link error:",r),!1}}c(F,"openMailtoLink");function B(a,o,r){const d=a.length>0?`${new Date(a[a.length-1].date).toLocaleDateString()} - ${new Date(a[0].date).toLocaleDateString()}`:"No date range",u=`Grounded Therapy Integration Report - ${d}`;let e=r||"";return e||(e=`Grounded by AC MiNDS - Therapy Integration Summary

`,e+=`Date Range: ${d}
`,e+=`Total Entries: ${a.length}

`,a.length>0&&(e+=`Recent Activity:
`,a.slice(0,10).forEach(t=>{const n=o.find(s=>s.id===t.valueId);let i=`
- ${new Date(t.date).toLocaleDateString()}: ${n?.name||"General"}`;t.deepReflection&&(i+=`
  Deep Reflection: ${t.deepReflection}`),t.goalText&&(i+=`
  Committed Action/Goal: ${t.goalText}`),t.reflectionAnalysis&&(i+=`
  Suggested Next Steps: ${t.reflectionAnalysis}`),t.emotionalState&&(i+=`
  Emotional State: ${t.emotionalState}`,t.selectedFeeling&&(i+=` (${t.selectedFeeling})`)),t.note&&!t.deepReflection&&(i+=`
  Note: ${t.note}`),i+=`
`,e+=i}))),e+=`

---
`,e+=`This report was generated by Grounded by AC MiNDS, a privacy-first therapy integration app.
`,e+=`All data processing happens on-device. This report is for sharing with your LCSW.
`,{subject:u,body:e}}c(B,"generateEmailReport");function H(a,o,r,d=!0){const u=new Date().toLocaleDateString(),e=`Grounded Goals Update - ${u}`;let n=O("goals_email_header",()=>`Grounded by AC MiNDS - Goals & Progress Update

`);n+=`Date: ${u}

`,r.length>0&&(n+=`âœ… Completed Goals:
`,r.forEach(s=>{const p=o.find(l=>l.id===s.valueId);n+=`
- ${p?.name||"General"}: ${s.text}
`,s.updates.length>0&&d?(n+=`  Progress Updates:
`,s.updates.forEach(l=>{n+=`    â€¢ ${new Date(l.timestamp).toLocaleDateString()}${l.mood?` ${l.mood}`:""}: ${l.note}
`})):s.updates.length>0&&(n+=`  Total Updates: ${s.updates.length}
`)}),n+=`
`);const i=a.filter(s=>!s.completed);return i.length>0&&(n+=`ðŸ“‹ Active Goals & Progress:
`,i.forEach(s=>{const p=o.find(l=>l.id===s.valueId);n+=`
- ${p?.name||"General"}: ${s.text}
`,n+=`  Frequency: ${s.frequency}
`,s.updates.length>0?d?(n+=`  Recent Progress Updates:
`,s.updates.slice().reverse().slice(0,5).forEach(l=>{n+=`    â€¢ ${new Date(l.timestamp).toLocaleDateString()}${l.mood?` ${l.mood}`:""}: ${l.note}
`}),s.updates.length>5&&(n+=`    ... and ${s.updates.length-5} more update(s)
`)):n+=`  Total Updates: ${s.updates.length}
`:n+=`  No updates yet
`})),n+=`

---
`,n+=`This update was generated by Grounded by AC MiNDS.
`,n+=`Regular progress updates help track growth and inform therapy sessions.
`,{subject:e,body:n}}c(H,"generateGoalsEmail");function J(a,o,r,d){const u=`Grounded Complete Data Export - ${new Date().toLocaleDateString()}`;let e=`Grounded by AC MiNDS - Complete Data Export

`;return e+=`Export Date: ${new Date().toISOString()}
`,e+=`Total Logs: ${a.length}
`,e+=`Total Goals: ${o.length}
`,e+=`Active Values: ${r.length}

`,e+=`=== LOGS ===

`,a.length===0?e+=`No logs recorded.

`:a.forEach(t=>{const n=r.find(i=>i.id===t.valueId);e+=`[${new Date(t.date).toLocaleDateString()}] ${n?.name||"General"}
`,e+=`Mood: ${t.mood||"N/A"}
`,e+=`Note: ${t.note}
`,t.goalText&&(e+=`Related Goal: ${t.goalText}
`),e+=`
`}),e+=`=== GOALS ===

`,o.length===0?e+=`No goals set.

`:o.forEach(t=>{const n=r.find(i=>i.id===t.valueId);e+=`${t.completed?"âœ…":"ðŸ“‹"} ${n?.name||"General"}
`,e+=`Goal: ${t.text}
`,e+=`Frequency: ${t.frequency}
`,e+=`Created: ${new Date(t.createdAt).toLocaleDateString()}
`,t.updates.length>0&&(e+=`Updates:
`,t.updates.forEach(i=>{e+=`  - ${new Date(i.timestamp).toLocaleDateString()}: ${i.note}
`})),e+=`
`}),e+=`
---
`,e+=`This export contains all your Grounded data.
`,e+=`Keep this email secure and only share with trusted healthcare providers.
`,{subject:u,body:e}}c(J,"generateDataExportEmail");function K(a,o){localStorage.setItem(`emailSchedule_${a}`,JSON.stringify(o))}c(K,"saveEmailSchedule");export{J as a,H as b,K as c,V as d,B as g,q as i,W as s};
