import{r as e,j as t}from"./react-vendor-CQK77wC2.js";import{g as r,A as a}from"./index-C1iKWUY7.js";import{i as s,a as l,s as d}from"./emailService-6vz86vpM.js";import{EMOTIONAL_STATES as i}from"./emotionalStates-BgybEvQ3.js";import{V as x}from"./VirtualList-Cwbcv78v.js";import"./vendor-JrpKAf2Q.js";import"./ai-services-Dyqhbvbu.js";const n=({logs:n,goals:o,settings:c,onUpdateSettings:m,onClearData:p,selectedValueIds:g=[]})=>{const[b,h]=e.useState(null),[k,u]=e.useState(""),[w,f]=e.useState(""),[y,j]=e.useState(!1);e.useEffect(()=>{r().then(e=>{e&&h(e.id)})},[]);const v=[...n].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime());return t.jsxs("div",{className:"space-y-12 animate-fade-in pb-20 max-w-2xl mx-auto",children:[t.jsxs("div",{className:"bg-white dark:bg-dark-bg-primary rounded-xl sm:rounded-2xl border border-border-soft dark:border-dark-border/30 shadow-xl overflow-hidden",children:[t.jsxs("div",{className:"p-6 sm:p-8 lg:p-10",children:[t.jsx("h1",{className:"text-2xl sm:text-4xl font-black text-text-primary dark:text-white tracking-tight mb-2",children:"Total Impact"}),t.jsx("p",{className:"text-text-primary/60 dark:text-white/60 text-sm sm:text-lg mb-6",children:"Your journey in numbers"}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 sm:gap-6",children:[t.jsx("div",{className:"text-center sm:text-left",children:t.jsxs("p",{className:"text-2xl sm:text-3xl font-black text-text-primary dark:text-white",children:[n.length," Entries"]})}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsx("button",{onClick:()=>j(!y),className:"flex-1 sm:flex-none px-4 sm:px-6 py-3 bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-primary dark:text-white rounded-xl sm:rounded-2xl text-[9px] sm:text-[10px] font-black uppercase tracking-widest hover:opacity-80 transition-colors",children:k||w?"ðŸ“… Date Range":"ðŸ“… Select Dates"}),t.jsx("button",{onClick:async()=>{let e=n;if((k||w)&&(e=n.filter(e=>{const t=new Date(e.date).toISOString().split("T")[0];return!(k&&t<k||w&&t>w)}),0===e.length))return void alert("No entries found in the selected date range.");const t=a.filter(t=>e.some(e=>e.valueId===t.id)),r=l(e,[],t);await d(r,[])||alert("Could not open email. Please try again.")},className:"flex-1 sm:flex-none px-4 sm:px-6 py-3 bg-yellow-warm text-text-primary rounded-xl sm:rounded-2xl text-[9px] sm:text-[10px] font-black uppercase tracking-widest hover:opacity-90 transition-colors",children:s()?"ðŸ“§ Share":"ðŸ“§ Email"}),t.jsx("button",{onClick:p,className:"flex-1 sm:flex-none px-4 sm:px-6 py-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl sm:rounded-2xl text-[9px] sm:text-[10px] font-black uppercase tracking-widest hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:"Wipe Data"})]}),y&&t.jsxs("div",{className:"bg-bg-secondary dark:bg-dark-bg-primary/50 rounded-xl p-4 space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[9px] font-black text-text-primary/60 dark:text-white/60 uppercase tracking-widest block mb-1",children:"Start Date"}),t.jsx("input",{type:"date",value:k,onChange:e=>u(e.target.value),className:"w-full p-2 rounded-lg bg-white dark:bg-dark-bg-primary border border-border-soft dark:border-dark-border/30 text-xs"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[9px] font-black text-text-primary/60 dark:text-white/60 uppercase tracking-widest block mb-1",children:"End Date"}),t.jsx("input",{type:"date",value:w,onChange:e=>f(e.target.value),className:"w-full p-2 rounded-lg bg-white dark:bg-dark-bg-primary border border-border-soft dark:border-dark-border/30 text-xs"})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{u(""),f("")},className:"flex-1 px-3 py-2 bg-border-soft dark:bg-dark-bg-primary text-text-primary dark:text-white rounded-lg text-[9px] font-black uppercase tracking-widest",children:"Clear"}),t.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-3 py-2 bg-yellow-warm text-text-primary rounded-lg text-[9px] font-black uppercase tracking-widest",children:"Done"})]})]})]})]})]}),t.jsx("div",{className:"p-6 sm:p-8 lg:p-10",children:0===v.length?t.jsxs("div",{className:"text-center py-16 sm:py-20 text-text-primary/30 dark:text-white/30 space-y-4",children:[t.jsx("svg",{className:"w-12 sm:w-16 h-12 sm:h-16 mx-auto opacity-20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),t.jsx("p",{className:"font-bold text-lg sm:text-xl text-text-primary dark:text-white",children:"The Vault is currently empty."}),t.jsx("p",{className:"text-xs sm:text-sm text-text-primary/60 dark:text-white/60",children:"Start by reflecting on your values in the Dashboard."})]}):t.jsx(x,{items:v,itemHeight:100,containerHeight:"undefined"!=typeof window?Math.min(600,.6*window.innerHeight):600,overscan:2,className:"space-y-2",threshold:5,renderItem:(e,r)=>{const s=a.find(t=>t.id===e.valueId),l="goal-completion"===e.type,d=e.goalText&&!l,x=l?"Goal Achieved":d?"Goal Set":"Reflection",n=new Date(e.date).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});return t.jsxs("details",{className:"group bg-white dark:bg-dark-bg-secondary border border-border-soft dark:border-dark-border rounded-xl overflow-hidden transition-all hover:shadow-md",children:[t.jsx("summary",{className:"cursor-pointer list-none",children:t.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 gap-3 sm:gap-4",children:[t.jsx("div",{className:"flex-shrink-0 w-24 sm:w-32",children:t.jsx("p",{className:"text-xs sm:text-sm font-black text-text-primary dark:text-white",children:n})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-lg sm:text-xl flex-shrink-0",title:e.mood||e.emotionalState,children:e.mood||(e.emotionalState?i.find(t=>t.state===e.emotionalState)?.emoji:"âœ¨")}),t.jsx("p",{className:"text-xs sm:text-sm font-black text-text-primary dark:text-white truncate",children:s?.name||"Reflection"})]})}),t.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[t.jsx("span",{className:"text-xs sm:text-sm font-black px-2 sm:px-3 py-1 rounded-full uppercase tracking-widest "+(l?"bg-calm-sage text-white dark:text-white":d?"bg-yellow-warm text-text-primary dark:text-text-primary":"bg-bg-tertiary dark:bg-dark-bg-tertiary text-text-secondary dark:text-text-secondary"),children:x}),t.jsx("svg",{className:"w-4 h-4 text-text-tertiary dark:text-text-tertiary transition-transform group-open:rotate-180 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),t.jsxs("div",{className:"px-4 sm:px-5 pb-4 sm:pb-5 pt-0 space-y-4 border-t border-border-soft dark:border-dark-border",children:[e.note&&t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] font-black text-text-primary/60 dark:text-white/60 uppercase tracking-widest mb-2",children:"Reflection"}),t.jsxs("p",{className:"text-sm sm:text-base text-text-primary dark:text-white leading-relaxed italic",children:['"',e.note,'"']})]}),e.deepReflection&&t.jsxs("div",{className:"p-3 sm:p-4 bg-yellow-warm/10 dark:bg-yellow-warm/20 rounded-lg border border-yellow-warm/30",children:[t.jsx("p",{className:"text-[9px] font-black text-yellow-warm uppercase tracking-widest mb-2",children:"Deep Reflection"}),t.jsx("p",{className:"text-xs sm:text-sm text-text-primary/80 dark:text-white/80 leading-relaxed",children:e.deepReflection})]}),e.reflectionAnalysis&&t.jsxs("div",{className:"p-3 sm:p-4 bg-bg-secondary dark:bg-dark-bg-primary/50 rounded-lg border border-border-soft dark:border-dark-border/30",children:[t.jsx("p",{className:"text-[9px] font-black text-text-primary/60 dark:text-white/60 uppercase tracking-widest mb-2",children:"Reflection Analysis"}),t.jsx("div",{className:"text-xs sm:text-sm text-text-primary/70 dark:text-white/70 leading-relaxed whitespace-pre-line",children:e.reflectionAnalysis})]}),e.goalText&&t.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border "+(l?"bg-calm-sage/10 dark:bg-calm-sage/20 border-calm-sage/30":"bg-yellow-warm/10 dark:bg-yellow-warm/20 border-yellow-warm/30"),children:[t.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest mb-2 "+(l?"text-calm-sage":"text-yellow-warm"),children:l?"Accomplished Target":"Commitment Target"}),t.jsx("p",{className:"text-xs sm:text-sm font-bold "+(l?"text-calm-sage dark:text-calm-sage":"text-text-primary dark:text-white"),children:e.goalText})]})]})]},e.id)}})})]}),t.jsx("div",{className:"text-center text-xs text-text-primary/50 dark:text-white/50 font-medium",children:"Encrypted local storage. Your data remains strictly on your device."})]})};export{n as default};
//# sourceMappingURL=VaultControl-BxmuxeCp.js.map
