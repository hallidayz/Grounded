const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/emailService-BJmZKHwj.js","assets/ai-services-4hnf0_d4.js"])))=>i.map(i=>d[i]);
var N=Object.defineProperty;var o=(l,i)=>N(l,"name",{value:i,configurable:!0});import{g as R,_ as S}from"./ai-services-4hnf0_d4.js";import{R as C,r as a,j as e}from"./react-vendor-ByHOp49b.js";import{i as L,g as E,s as A}from"./emailService-BJmZKHwj.js";import{V as _}from"./VirtualList-CAMr-1S6.js";import"./vendor-CFU3Mex3.js";import"./transformers-CgLRIXTl.js";import"@tauri-apps/api/core";const D=o(({logs:l,values:i,lcswConfig:m})=>{const[n,f]=a.useState(new Set(l.map(t=>t.id))),[x,h]=a.useState(""),[y,w]=a.useState(!1),[u,p]=a.useState("review"),d=a.useMemo(()=>l.filter(t=>n.has(t.id)),[l,n]),g=a.useMemo(()=>[...l].sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime()),[l]),k=a.useCallback(async()=>{if(d.length===0){alert("Please select at least one log to synthesize.");return}w(!0);try{const t=await R(d,i,m);h(t),p("generate")}catch(t){console.error("Report synthesis failed:",t);const{generateFallbackReport:s}=await S(async()=>{const{generateFallbackReport:b}=await import("./emailService-BJmZKHwj.js").then(v=>v.d);return{generateFallbackReport:b}},__vite__mapDeps([0,1])),r=s(d,i);h(r+`

---

*This report was generated using rule-based analysis. All processing happens on your device for privacy.*`),p("generate")}finally{w(!1)}},[d,i,m]),j=a.useCallback(t=>{f(s=>{const r=new Set(s);return r.has(t)?r.delete(t):r.add(t),r})},[]);return e.jsxs("div",{className:"space-y-4 sm:space-y-6 lg:space-y-8 animate-fade-in pb-12 sm:pb-20",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-end gap-3 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-black text-navy-primary dark:text-white tracking-tight",children:"Clinical Synthesis"}),e.jsx("p",{className:"text-text-secondary dark:text-text-secondary text-sm sm:text-lg mt-1",children:"Human-first insights for professional sharing."})]}),u==="generate"&&e.jsx("button",{onClick:o(()=>p("review"),"onClick"),className:"text-yellow-warm dark:text-yellow-warm font-black uppercase text-xs sm:text-sm tracking-widest hover:underline",children:"‚Üê Edit Selection"})]}),u==="review"?e.jsxs("div",{className:"grid lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2 mb-2",children:[e.jsx("h3",{className:"text-xs sm:text-sm font-black text-text-secondary dark:text-text-secondary uppercase tracking-widest",children:"Select your records"}),e.jsxs("span",{className:"text-xs sm:text-sm font-bold text-yellow-warm bg-yellow-warm/20 dark:bg-yellow-warm/30 px-2 sm:px-3 py-1 rounded-full uppercase",children:[n.size," Ready"]})]}),g.length===0?e.jsx("div",{className:"text-center py-16 sm:py-24 bg-white dark:bg-dark-bg-primary rounded-2xl sm:rounded-[40px] border border-dashed border-border-soft dark:border-dark-border text-text-tertiary dark:text-text-tertiary",children:"No data in the vault yet."}):e.jsx(_,{items:g,itemHeight:140,containerHeight:typeof window<"u"?Math.min(600,window.innerHeight*.6):600,overscan:2,className:"space-y-3 sm:space-y-4 pr-2 custom-scrollbar",threshold:5,renderItem:o((t,s)=>{const r=i.find(b=>b.id===t.valueId),c=n.has(t.id);return e.jsxs("button",{onClick:o(()=>j(t.id),"onClick"),className:`w-full text-left bg-white dark:bg-dark-bg-primary p-4 sm:p-6 lg:p-8 rounded-2xl sm:rounded-[32px] border-2 transition-all flex gap-3 sm:gap-6 ${c?"border-yellow-warm shadow-xl":"border-border-soft dark:border-dark-border opacity-50"}`,children:[e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 mt-1 ${c?"bg-yellow-warm border-yellow-warm":"border-border-soft dark:border-dark-border"}`,children:c&&e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-navy-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-xs sm:text-sm font-black text-text-secondary dark:text-text-secondary uppercase tracking-widest",children:new Date(t.date).toLocaleDateString()}),e.jsx("span",{className:"text-xl sm:text-2xl",children:t.mood})]}),e.jsx("p",{className:"text-base sm:text-lg font-black text-text-primary dark:text-white truncate",children:r?.name}),t.deepReflection&&e.jsxs("p",{className:"text-text-primary dark:text-white/80 mt-2 sm:mt-3 leading-relaxed text-xs sm:text-sm line-clamp-2 font-medium",children:["Deep Reflection: ",t.deepReflection.substring(0,100),t.deepReflection.length>100?"...":""]}),e.jsxs("p",{className:"text-text-primary/70 dark:text-white/70 mt-2 sm:mt-3 italic leading-relaxed text-sm sm:text-base line-clamp-2",children:['"',t.note,'"']})]})]},t.id)},"renderItem")})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-dark-bg-primary p-6 sm:p-8 lg:p-10 rounded-2xl sm:rounded-[48px] border border-border-soft dark:border-dark-border shadow-2xl sticky top-20 sm:top-24 space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("p",{className:"text-sm font-bold text-text-primary dark:text-white",children:"Synthesis Engine"}),e.jsx("p",{className:"text-xs text-text-secondary dark:text-text-secondary leading-relaxed",children:"This will generate a natural-language report in SOAP, DAP, and BIRP formats simultaneously. Perfect for review with your therapist."})]}),e.jsx("button",{onClick:k,disabled:y||n.size===0,className:"w-full py-4 sm:py-5 bg-navy-primary dark:bg-navy-primary text-white dark:text-white rounded-2xl sm:rounded-3xl font-black uppercase tracking-[0.2em] shadow-xl hover:opacity-90 transition-all active:scale-95 disabled:opacity-20 text-xs sm:text-sm",children:y?"Synthesizing...":"Generate All"})]})})]}):e.jsxs("div",{className:"space-y-6 sm:space-y-8 animate-pop",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-bg-primary p-6 sm:p-8 lg:p-12 rounded-2xl sm:rounded-[56px] shadow-2xl border border-yellow-warm/20 dark:border-yellow-warm/30 max-w-4xl mx-auto prose prose-slate dark:prose-invert",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0 mb-6 sm:mb-10 pb-4 sm:pb-6 border-b border-border-soft dark:border-dark-border",children:[e.jsx("p",{className:"text-xs sm:text-sm font-black text-yellow-warm uppercase tracking-[0.3em]",children:"Confidential Clinical Summary"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:o(()=>{navigator.clipboard.writeText(x),alert("All formats copied to clipboard!")},"onClick"),className:"px-4 sm:px-6 py-2 bg-yellow-warm/20 dark:bg-yellow-warm/30 text-yellow-warm rounded-full text-xs sm:text-sm font-black uppercase tracking-widest hover:bg-yellow-warm/30 dark:hover:bg-yellow-warm/40",children:"Copy"}),e.jsx("button",{onClick:o(async()=>{const t=E(d,i,x),s=m?.emergencyContact?.phone?[]:[];await A(t,s)||alert("Could not open email. Please copy the report and send manually.")},"onClick"),className:"px-4 sm:px-6 py-2 bg-yellow-warm text-navy-primary rounded-full text-xs sm:text-sm font-black uppercase tracking-widest hover:opacity-90",children:L()?"üìß Share":"üìß Email"})]})]}),e.jsx("div",{className:"whitespace-pre-wrap font-sans text-text-primary dark:text-white leading-relaxed text-sm sm:text-base lg:text-lg prose prose-slate dark:prose-invert max-w-none clinical-report",children:x})]}),e.jsx("p",{className:"text-center text-text-tertiary dark:text-text-tertiary text-xs font-medium",children:"These reports are generated on-device using local AI for your personal review. All processing happens on your device for privacy."})]}),e.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .dark .custom-scrollbar::-webkit-scrollbar-thumb { background: #4a5568; }
      `})]})},"ReportView"),B=C.memo(D);export{B as default};
