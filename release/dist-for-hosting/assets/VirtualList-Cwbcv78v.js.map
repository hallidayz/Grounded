{"version":3,"file":"VirtualList-Cwbcv78v.js","sources":["../../components/VirtualList.tsx"],"sourcesContent":["/**\n * VIRTUAL LIST COMPONENT\n * \n * Efficiently renders long lists by only rendering visible items.\n * Uses windowing technique to improve performance for large datasets.\n * Optimized with will-change and transform for smooth scrolling.\n */\n\nimport React, { useState, useRef, useMemo, useCallback } from 'react';\n\ninterface VirtualListProps<T> {\n  items: T[];\n  renderItem: (item: T, index: number) => React.ReactNode;\n  itemHeight?: number;\n  containerHeight?: number;\n  overscan?: number;\n  className?: string;\n  onScroll?: (scrollTop: number) => void;\n  threshold?: number; // Minimum items before enabling virtualization\n}\n\n/**\n * Virtual list component for efficient rendering of long lists\n * Optimized with CSS will-change and transform for smooth 60fps scrolling\n * \n * @example\n * ```tsx\n * <VirtualList\n *   items={logs}\n *   itemHeight={80}\n *   containerHeight={400}\n *   renderItem={(log, index) => (\n *     <LogCard key={log.id} log={log} />\n *   )}\n * />\n * ```\n */\nfunction VirtualList<T extends { id?: string }>({\n  items,\n  renderItem,\n  itemHeight = 80,\n  containerHeight = 400,\n  overscan = 3,\n  className = '',\n  onScroll,\n  threshold = 10, // Only virtualize if more than 10 items\n}: VirtualListProps<T>) {\n  const [scrollTop, setScrollTop] = useState(0);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const scrollTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Only virtualize if we have enough items\n  const shouldVirtualize = items.length > threshold;\n\n  // Calculate visible range\n  const { startIndex, endIndex, totalHeight, offsetY } = useMemo(() => {\n    if (!shouldVirtualize) {\n      return {\n        startIndex: 0,\n        endIndex: items.length - 1,\n        totalHeight: items.length * itemHeight,\n        offsetY: 0,\n      };\n    }\n\n    const visibleCount = Math.ceil(containerHeight / itemHeight);\n    const startIndex = Math.max(0, Math.floor(scrollTop / itemHeight) - overscan);\n    const endIndex = Math.min(\n      items.length - 1,\n      startIndex + visibleCount + overscan * 2\n    );\n    \n    const totalHeight = items.length * itemHeight;\n    const offsetY = startIndex * itemHeight;\n\n    return { startIndex, endIndex, totalHeight, offsetY };\n  }, [scrollTop, items.length, itemHeight, containerHeight, overscan, shouldVirtualize]);\n\n  // Visible items\n  const visibleItems = useMemo(() => {\n    if (!shouldVirtualize) {\n      return items.map((item, index) => ({ item, index }));\n    }\n    return items.slice(startIndex, endIndex + 1).map((item, index) => ({\n      item,\n      index: startIndex + index,\n    }));\n  }, [items, startIndex, endIndex, shouldVirtualize]);\n\n  // Optimized scroll handler with requestAnimationFrame for smooth 60fps\n  const handleScroll = useCallback((e: React.UIEvent<HTMLDivElement>) => {\n    const newScrollTop = e.currentTarget.scrollTop;\n    \n    // Use requestAnimationFrame for immediate visual updates\n    requestAnimationFrame(() => {\n      setScrollTop(newScrollTop);\n    });\n    \n    // Throttle onScroll callback\n    if (onScroll) {\n      if (scrollTimeoutRef.current) {\n        clearTimeout(scrollTimeoutRef.current);\n      }\n      scrollTimeoutRef.current = setTimeout(() => {\n        onScroll(newScrollTop);\n      }, 16); // ~60fps\n    }\n  }, [onScroll]);\n\n  // Cleanup timeout on unmount\n  React.useEffect(() => {\n    return () => {\n      if (scrollTimeoutRef.current) {\n        clearTimeout(scrollTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  // If not virtualizing, render normally\n  if (!shouldVirtualize) {\n    return (\n      <div\n        ref={containerRef}\n        className={`overflow-auto ${className}`}\n        style={{ \n          height: containerHeight,\n          willChange: 'scroll-position',\n        }}\n        onScroll={handleScroll}\n      >\n        {visibleItems.map(({ item, index }) => (\n          <div key={item.id || index}>\n            {renderItem(item, index)}\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      ref={containerRef}\n      className={`overflow-auto ${className}`}\n      style={{ \n        height: containerHeight,\n        willChange: 'scroll-position',\n        // Optimize scrolling performance\n        WebkitOverflowScrolling: 'touch',\n      }}\n      onScroll={handleScroll}\n    >\n      {/* Spacer div to maintain scroll height */}\n      <div\n        style={{\n          height: totalHeight,\n          position: 'relative',\n          willChange: 'contents',\n        }}\n      >\n        {/* Transform container - optimized with will-change and GPU acceleration */}\n        <div\n          style={{\n            transform: `translate3d(0, ${offsetY}px, 0)`,\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            right: 0,\n            willChange: 'transform',\n            // Force GPU acceleration for smooth scrolling\n            backfaceVisibility: 'hidden',\n            perspective: 1000,\n            // Additional performance optimizations\n            transformOrigin: 'top left',\n            // Prevent layout thrashing\n            contain: 'layout style paint',\n          }}\n        >\n          {visibleItems.map(({ item, index }) => (\n            <div\n              key={item.id || index}\n              style={{\n                height: itemHeight,\n                willChange: 'auto',\n                // Optimize item rendering\n                contain: 'layout style',\n              }}\n            >\n              {renderItem(item, index)}\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(VirtualList);\n\n"],"names":["VirtualList$1","React","memo","items","renderItem","itemHeight","containerHeight","overscan","className","onScroll","threshold","scrollTop","setScrollTop","useState","containerRef","useRef","scrollTimeoutRef","shouldVirtualize","length","startIndex","endIndex","totalHeight","offsetY","useMemo","visibleCount","Math","ceil","max","floor","min","visibleItems","slice","map","item","index","handleScroll","useCallback","e","newScrollTop","currentTarget","requestAnimationFrame","current","clearTimeout","setTimeout","useEffect","jsx","ref","style","height","willChange","WebkitOverflowScrolling","children","position","transform","top","left","right","backfaceVisibility","perspective","transformOrigin","contain","id"],"mappings":"6DAoMA,MAAAA,EAAeC,EAAMC,KA/JrB,UAAgDC,MAC9CA,EAAAC,WACAA,EAAAC,WACAA,EAAa,GAAAC,gBACbA,EAAkB,IAAAC,SAClBA,EAAW,EAAAC,UACXA,EAAY,GAAAC,SACZA,EAAAC,UACAA,EAAY,KAEZ,MAAOC,EAAWC,GAAgBC,EAAAA,SAAS,GACrCC,EAAeC,EAAAA,OAAuB,MACtCC,EAAmBD,EAAAA,OAA8B,MAGjDE,EAAmBd,EAAMe,OAASR,GAGlCS,WAAEA,EAAAC,SAAYA,EAAAC,YAAUA,UAAaC,GAAYC,EAAAA,QAAQ,KAC7D,IAAKN,EACH,MAAO,CACLE,WAAY,EACZC,SAAUjB,EAAMe,OAAS,EACzBG,YAAalB,EAAMe,OAASb,EAC5BiB,QAAS,GAIb,MAAME,EAAeC,KAAKC,KAAKpB,EAAkBD,GAC3Cc,EAAaM,KAAKE,IAAI,EAAGF,KAAKG,MAAMjB,EAAYN,GAAcE,GASpE,MAAO,CAAEY,WAAAA,EAAYC,SARJK,KAAKI,IACpB1B,EAAMe,OAAS,EACfC,EAAaK,EAA0B,EAAXjB,GAMCc,YAHXlB,EAAMe,OAASb,EAGSiB,QAF5BH,EAAad,IAG5B,CAACM,EAAWR,EAAMe,OAAQb,EAAYC,EAAiBC,EAAUU,IAG9Da,EAAeP,EAAAA,QAAQ,IACtBN,EAGEd,EAAM4B,MAAMZ,EAAYC,EAAW,GAAGY,IAAI,CAACC,EAAMC,KAAA,CACtDD,OACAC,MAAOf,EAAae,KAJb/B,EAAM6B,IAAI,CAACC,EAAMC,MAAaD,OAAMC,WAM5C,CAAC/B,EAAOgB,EAAYC,EAAUH,IAG3BkB,EAAeC,cAAaC,IAChC,MAAMC,EAAeD,EAAEE,cAAc5B,UAGrC6B,sBAAsB,KACpB5B,EAAa0B,KAIX7B,IACEO,EAAiByB,SACnBC,aAAa1B,EAAiByB,SAEhCzB,EAAiByB,QAAUE,WAAW,KACpClC,EAAS6B,IACR,MAEJ,CAAC7B,IAYJ,OATAR,EAAM2C,UAAU,IACP,KACD5B,EAAiByB,SACnBC,aAAa1B,EAAiByB,UAGjC,IAGExB,EAqBH4B,EAAAA,IAAC,MAAA,CACCC,IAAKhC,EACLN,UAAW,iBAAiBA,IAC5BuC,MAAO,CACLC,OAAQ1C,EACR2C,WAAY,kBAEZC,wBAAyB,SAE3BzC,SAAU0B,EAGVgB,SAAAN,EAAAA,IAAC,MAAA,CACCE,MAAO,CACLC,OAAQ3B,EACR+B,SAAU,WACVH,WAAY,YAIdE,SAAAN,EAAAA,IAAC,MAAA,CACCE,MAAO,CACLM,UAAW,kBAAkB/B,UAC7B8B,SAAU,WACVE,IAAK,EACLC,KAAM,EACNC,MAAO,EACPP,WAAY,YAEZQ,mBAAoB,SACpBC,YAAa,IAEbC,gBAAiB,WAEjBC,QAAS,sBAGVT,WAAanB,IAAI,EAAGC,OAAMC,WACzBW,EAAAA,IAAC,MAAA,CAECE,MAAO,CACLC,OAAQ3C,EACR4C,WAAY,OAEZW,QAAS,gBAGVT,SAAA/C,EAAW6B,EAAMC,IARbD,EAAK4B,IAAM3B,UA1DxBW,EAAAA,IAAC,MAAA,CACCC,IAAKhC,EACLN,UAAW,iBAAiBA,IAC5BuC,MAAO,CACLC,OAAQ1C,EACR2C,WAAY,mBAEdxC,SAAU0B,EAETgB,WAAanB,IAAI,EAAGC,OAAMC,WACzBW,MAAC,MAAA,CACEM,SAAA/C,EAAW6B,EAAMC,IADVD,EAAK4B,IAAM3B,KA+D/B"}