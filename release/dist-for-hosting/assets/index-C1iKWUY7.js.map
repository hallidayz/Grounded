{"version":3,"mappings":"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","names":["ALL_VALUES","id","name","description","category","ValueSelection","initialSelected","onComplete","isReorderingOnly","selected","setSelected","useState","shakeId","setShakeId","collapsedCategories","setCollapsedCategories","Set","viewMode","setViewMode","length","draggedIndex","setDraggedIndex","dragOverIndex","setDragOverIndex","groupedValues","useMemo","reduce","acc","value","push","selectedObjects","map","find","v","filter","Boolean","moveValue","index","direction","newSelected","targetIndex","jsxs","className","children","jsx","onClick","disabled","Object","entries","items","isCollapsed","has","selectedInCategory","includes","prev","next","delete","add","toggleCategory","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","isSelected","toggleValue","setTimeout","substring","isDragging","isDragOver","draggable","onDragStart","handleDragStart","onDragOver","e","preventDefault","handleDragOver","onDragLeave","onDrop","itemToMove","splice","handleDrop","stopPropagation","logEntries","isInitialized","originalError","originalWarn","errorHandler","event","logEntry","message","filename","lineno","colno","stack","error","rejectionHandler","reason","level","details","entry","timestamp","Date","toISOString","Error","shift","formatDebugLogForEmail","log","lines","repeat","appVersion","platform","browserInfo","version","engine","userAgent","language","timezone","screenResolution","compatibility","sharedArrayBuffer","crossOriginIsolated","webGPU","webAssembly","estimatedMemory","device","browser","aiModelStatus","loaded","loading","moodTracker","counselingCoach","localStorage","available","keys","join","indexedDB","databases","serviceWorker","registered","scope","networkStatus","online","connectionType","errors","forEach","split","slice","JSON","stringify","warnings","warning","recentLogs","toUpperCase","DebugLogComponent","onClose","setLog","setLoading","copied","setCopied","expandedSections","setExpandedSections","useEffect","fetch","method","headers","body","location","data","loadingState","now","sessionId","runId","hypothesisId","catch","async","getCompatibilityReport","wasm","deviceType","os","modelStatus","getModelStatus","ua","navigator","browserName","browserVersion","match","getBrowserInfo","indexedDBDatabases","window","db","getIndexedDBDatabases","serviceWorkerInfo","registration","getRegistration","getServiceWorkerInfo","networkInfo","onLine","conn","connection","mozConnection","webkitConnection","effectiveType","type","getNetworkInfo","localStorageKeys","i","key","Intl","DateTimeFormat","resolvedOptions","timeZone","screen","width","height","Storage","generateDebugLog","then","debugLog","hasLog","String","errorType","constructor","willSetLoadingFalse","toggleSection","section","newExpanded","Section","title","expanded","onToggle","InfoRow","label","StatusRow","logText","clipboard","writeText","alert","emailLink","encodeURIComponent","createEmailWithDebugLog","href","HelpOverlay","showDebugLog","setShowDebugLog","getFullYear","target","rel","ThemeContext","createContext","ThemeProvider","theme","setThemeState","getItem","root","document","documentElement","classList","remove","setItem","Provider","toggleTheme","setTheme","newTheme","ThemeToggle","context","useContext","useTheme","dbService","this","dbName","dbVersion","init","Promise","resolve","reject","request","open","onerror","onsuccess","result","onupgradeneeded","objectStoreNames","contains","userStore","createObjectStore","keyPath","createIndex","unique","resetStore","ensureDB","createUser","userData","user","crypto","randomUUID","createdAt","transaction","objectStore","getUserByUsername","username","get","getUserByEmail","email","getUserById","userId","updateUser","updates","store","updatedUser","put","getAppData","saveAppData","createResetToken","token","expires","getResetToken","deleteResetToken","cleanupExpiredTokens","openCursor","cursor","continue","hashPassword","password","TextEncoder","encode","hashBuffer","subtle","digest","Array","from","Uint8Array","b","toString","padStart","loginUser","success","hash","verifyPassword","passwordHash","lastLogin","sessionStorage","logoutUser","removeItem","getCurrentUser","Login","onLogin","mode","setMode","setUsername","setPassword","setEmail","confirmPassword","setConfirmPassword","resetToken","setResetToken","newPassword","setNewPassword","setError","resetLink","setResetLink","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","showNewPassword","setShowNewPassword","showResetConfirmPassword","setShowResetConfirmPassword","resetMatch","history","replaceState","pathname","src","alt","readOnly","onSubmit","onChange","required","placeholder","test","termsAccepted","registerUser","loginResult","minLength","origin","requestPasswordReset","tokenData","resetPasswordWithToken","TermsAcceptance","onAccept","onDecline","readTerms","setReadTerms","readDisclaimer","setReadDisclaimer","canAccept","ALL_CRISIS_PHRASES","p","categoryPhrases","severity","getCategoryDisplayName","phrase","checked","BottomNavigation","currentView","onViewChange","icon","tab","isActive","ErrorFallback","errorInfo","onReset","reload","ErrorBoundary","Component","props","super","handleReset","setState","hasError","state","getDerivedStateFromError","componentDidCatch","render","fallback","SkeletonLoader","style","SkeletonCard","showHeader","showFooter","_","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showPrompt","setShowPrompt","isInstalled","setIsInstalled","matchMedia","matches","standalone","handleBeforeInstallPrompt","addEventListener","dismissed","dismissedTime","parseInt","removeEventListener","handleDismiss","prompt","outcome","userChoice","FeedbackButton","showModal","setShowModal","selectedEmoji","setSelectedEmoji","feedback","setFeedback","submitted","setSubmitted","emojis","emoji","Fragment","item","maxLength","trim","emojiLabel","mailtoLink","isTauri","tauriStore","initStorage","getTauriStoreImport","tauriStoreModule","import","Store","storageInitialized","parse","set","save","serialized","fallbackError","requestPermission","Notification","permission","hasPermission","sendNotification","options","getTauriNotifyImport","tauriNotifyModule","tauriNotify","ProgressBar","progress","status","showPercentage","clampedProgress","Math","max","min","heightClasses","sm","md","lg","round","getStatusBg","getStatusColor","cx","cy","r","Dashboard","lazy","__vitePreload","__VITE_PRELOAD__","ReportView","VaultControl","LCSWConfigComponent","App","authState","setAuthState","setUserId","selectedValueIds","setSelectedValueIds","logs","setLogs","goals","setGoals","settings","setSettings","reminders","enabled","frequency","time","view","setView","showHelp","setShowHelp","showLCSWConfig","setShowLCSWConfig","isMounted","cleanupInterval","console","bind","args","apply","warn","preloadModels","setInterval","appData","values","loadedSettings","aiModel","setSelectedModel","initializeModels","initialize","clearInterval","timeoutId","lcswConfig","clearTimeout","retryTimer","checkReminders","currentHour","getHours","currentMin","getMinutes","today","currentDay","getDay","currentDate","getDate","topValue","shouldNotify","notificationBody","lastNotifiedHour","targetHour","targetMin","Number","lastNotifiedDay","targetDay","dayOfWeek","weeklyHour","weeklyMin","lastNotifiedWeek","targetDate","dayOfMonth","monthlyHour","monthlyMin","lastNotifiedMonth","defaultHour","defaultMin","err","useNtfyPush","ntfyTopic","sendNtfyNotification","topic","server","ntfyServer","useDeviceCalendar","hours","minutes","eventDate","setHours","googleCalendarUrl","charAt","replace","getTime","calendarEventId","updateData","interval","handleSelectionComplete","ids","selectedValues","showNav","progressState","setProgressState","initialState","isFirstCallback","subscribeToProgress","receivedStatus","receivedLabel","receivedProgress","willTransform","preservedLabel","transformedStatus","originalStatus","newLabel","loggedInUserId","termsAcceptedDate","acceptTerms","Suspense","onLog","onUpdateGoals","updatedGoals","onNavigate","onUpdateSettings","onClearData","newView","config","onUpdate","rootElement","getElementById","ReactDOM","createRoot"],"ignoreList":[],"sources":["../../constants.ts","../../components/ValueSelection.tsx","../../services/debugLog.ts","../../components/DebugLog.tsx","../../components/HelpOverlay.tsx","../../contexts/ThemeContext.tsx","../../components/ThemeToggle.tsx","../../services/database.ts","../../services/authService.ts","../../components/Login.tsx","../../components/TermsAcceptance.tsx","../../components/BottomNavigation.tsx","../../components/ErrorFallback.tsx","../../components/ErrorBoundary.tsx","../../components/SkeletonLoader.tsx","../../components/SkeletonCard.tsx","../../components/PWAInstallPrompt.tsx","../../components/FeedbackButton.tsx","../../services/platform.ts","../../services/storage.ts","../../services/notifications.ts","../../components/ProgressBar.tsx","../../App.tsx","../../index.tsx"],"sourcesContent":["import { ValueItem } from './types';\n\nexport const ALL_VALUES: ValueItem[] = [\n  // Character\n  { id: 'v1', name: 'Integrity', description: 'Being honest and having strong moral principles.', category: 'Character' },\n  { id: 'v19', name: 'Authenticity', description: 'Being true to one\\'s own personality or spirit.', category: 'Character' },\n  { id: 'v24', name: 'Resilience', description: 'The capacity to recover quickly from difficulties.', category: 'Character' },\n  { id: 'v25', name: 'Responsibility', description: 'Having a duty to deal with something.', category: 'Character' },\n  { id: 'v26', name: 'Courage', description: 'The ability to do something that frightens one.', category: 'Character' },\n  { id: 'v27', name: 'Humility', description: 'A modest or low view of one\\'s own importance.', category: 'Character' },\n\n  // Relationships\n  { id: 'v2', name: 'Family', description: 'Prioritizing the well-being of loved ones.', category: 'Relationships' },\n  { id: 'v7', name: 'Kindness', description: 'Being friendly, generous, and considerate.', category: 'Relationships' },\n  { id: 'v11', name: 'Respect', description: 'Deep admiration for someone or something.', category: 'Relationships' },\n  { id: 'v20', name: 'Compassion', description: 'Concern for the sufferings or misfortunes of others.', category: 'Relationships' },\n  { id: 'v23', name: 'Loyalty', description: 'Giving or showing firm and constant support.', category: 'Relationships' },\n  { id: 'v28', name: 'Community', description: 'A feeling of fellowship with others.', category: 'Relationships' },\n\n  // Expression & Creativity\n  { id: 'v3', name: 'Creativity', description: 'Using imagination to create something new.', category: 'Expression' },\n  { id: 'v21', name: 'Humor', description: 'The quality of being amusing or comic.', category: 'Expression' },\n  { id: 'v29', name: 'Artistry', description: 'Creative skill or ability.', category: 'Expression' },\n  { id: 'v30', name: 'Curiosity', description: 'A strong desire to know or learn something.', category: 'Expression' },\n\n  // Well-being & Environment\n  { id: 'v5', name: 'Health', description: 'Maintaining physical and mental well-being.', category: 'Well-being' },\n  { id: 'v10', name: 'Peace', description: 'Freedom from disturbance; tranquility.', category: 'Well-being' },\n  { id: 'v9', name: 'Nature', description: 'Appreciation and care for the natural world.', category: 'Environment' },\n  { id: 'v31', name: 'Balance', description: 'Stability or even distribution of effort.', category: 'Well-being' },\n  { id: 'v32', name: 'Sustainability', description: 'Avoiding depletion of natural resources.', category: 'Environment' },\n\n  // Growth & Learning\n  { id: 'v8', name: 'Learning', description: 'The acquisition of knowledge or skills.', category: 'Growth' },\n  { id: 'v14', name: 'Spirituality', description: 'Connection to something bigger than oneself.', category: 'Growth' },\n  { id: 'v17', name: 'Wisdom', description: 'Experience, knowledge, and good judgment.', category: 'Growth' },\n  { id: 'v33', name: 'Open-Mindedness', description: 'Willingness to consider new ideas.', category: 'Growth' },\n\n  // Achievement & Influence\n  { id: 'v15', name: 'Success', description: 'The accomplishment of an aim or purpose.', category: 'Achievement' },\n  { id: 'v16', name: 'Wealth', description: 'An abundance of valuable possessions.', category: 'Achievement' },\n  { id: 'v22', name: 'Leadership', description: 'Leading a group or an organization.', category: 'Influence' },\n  { id: 'v34', name: 'Impact', description: 'Having a strong effect on someone or something.', category: 'Influence' },\n\n  // Society & Autonomy\n  { id: 'v4', name: 'Freedom', description: 'The power to act, speak, or think without restraint.', category: 'Autonomy' },\n  { id: 'v6', name: 'Justice', description: 'Upholding what is right and fair.', category: 'Society' },\n  { id: 'v13', name: 'Service', description: 'Helping others and contributing to society.', category: 'Society' },\n  { id: 'v18', name: 'Adventure', description: 'Engaging in exciting experiences.', category: 'Autonomy' },\n];\n","\nimport React, { useState, useMemo, useEffect } from 'react';\nimport { ALL_VALUES } from '../constants';\nimport { ValueItem } from '../types';\n\ninterface ValueSelectionProps {\n  initialSelected: string[];\n  onComplete: (ids: string[]) => void;\n  isReorderingOnly?: boolean;\n}\n\nconst ValueSelection: React.FC<ValueSelectionProps> = ({ initialSelected, onComplete, isReorderingOnly = false }) => {\n  const [selected, setSelected] = useState<string[]>(initialSelected);\n  const [shakeId, setShakeId] = useState<string | null>(null);\n  const [collapsedCategories, setCollapsedCategories] = useState<Set<string>>(new Set());\n  \n  // Default to sort view if already have selections, fulfilling the \"default to prioritize\" requirement\n  const [viewMode, setViewMode] = useState<'pick' | 'sort'>(initialSelected.length > 0 ? 'sort' : 'pick');\n  \n  const [draggedIndex, setDraggedIndex] = useState<number | null>(null);\n  const [dragOverIndex, setDragOverIndex] = useState<number | null>(null);\n\n  const groupedValues = useMemo(() => {\n    return ALL_VALUES.reduce((acc, value) => {\n      if (!acc[value.category]) acc[value.category] = [];\n      acc[value.category].push(value);\n      return acc;\n    }, {} as Record<string, ValueItem[]>);\n  }, []);\n\n  const selectedObjects = useMemo(() => {\n    return selected.map(id => ALL_VALUES.find(v => v.id === id)).filter(Boolean) as ValueItem[];\n  }, [selected]);\n\n  const toggleValue = (id: string) => {\n    setSelected(prev => {\n      if (prev.includes(id)) return prev.filter(v => v !== id);\n      if (prev.length >= 10) {\n        setShakeId(id);\n        setTimeout(() => setShakeId(null), 500);\n        return prev;\n      }\n      return [...prev, id];\n    });\n  };\n\n  const moveValue = (index: number, direction: 'up' | 'down') => {\n    const newSelected = [...selected];\n    const targetIndex = direction === 'up' ? index - 1 : index + 1;\n    if (targetIndex < 0 || targetIndex >= newSelected.length) return;\n    [newSelected[index], newSelected[targetIndex]] = [newSelected[targetIndex], newSelected[index]];\n    setSelected(newSelected);\n  };\n\n  const handleDragStart = (index: number) => setDraggedIndex(index);\n  const handleDragOver = (e: React.DragEvent, index: number) => {\n    e.preventDefault(); \n    if (draggedIndex === index) return;\n    setDragOverIndex(index);\n  };\n\n  const handleDrop = (index: number) => {\n    if (draggedIndex === null || draggedIndex === index) {\n      setDraggedIndex(null);\n      setDragOverIndex(null);\n      return;\n    }\n    const newSelected = [...selected];\n    const itemToMove = newSelected.splice(draggedIndex, 1)[0];\n    newSelected.splice(index, 0, itemToMove);\n    setSelected(newSelected);\n    setDraggedIndex(null);\n    setDragOverIndex(null);\n  };\n\n  const toggleCategory = (category: string) => {\n    setCollapsedCategories(prev => {\n      const next = new Set(prev);\n      if (next.has(category)) next.delete(category);\n      else next.add(category);\n      return next;\n    });\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto space-y-3 sm:space-y-4 animate-fade-in pb-20 sm:pb-24\">\n      <div className=\"text-center space-y-2 px-3 sm:px-0\">\n        <h1 className=\"text-lg sm:text-xl font-black text-text-primary dark:text-white tracking-tight\">\n          {viewMode === 'pick' ? 'Define Your ' : 'Rank Your '}<span className=\"text-yellow-warm\">Compass</span>\n        </h1>\n        <div className=\"flex justify-center gap-1 mt-1\">\n           <button \n             onClick={() => setViewMode('pick')}\n             className={`px-3 py-1 rounded-lg font-bold text-[9px] uppercase tracking-widest transition-all ${viewMode === 'pick' ? 'bg-yellow-warm text-text-primary shadow-sm' : 'bg-white dark:bg-dark-bg-primary text-text-primary/60 dark:text-white/60 border border-border-soft dark:border-dark-border/30'}`}\n           >\n             Selection\n           </button>\n           <button \n             onClick={() => setViewMode('sort')}\n             disabled={selected.length === 0}\n             className={`px-3 py-1 rounded-lg font-bold text-[9px] uppercase tracking-widest transition-all ${viewMode === 'sort' ? 'bg-yellow-warm text-text-primary shadow-sm' : 'bg-white dark:bg-dark-bg-primary text-text-primary/60 dark:text-white/60 border border-border-soft dark:border-dark-border/30'} disabled:opacity-30`}\n           >\n             Priority\n           </button>\n        </div>\n      </div>\n\n      {viewMode === 'pick' ? (\n        <div className=\"space-y-3\">\n          {(Object.entries(groupedValues) as [string, ValueItem[]][]).map(([category, items]) => {\n            const isCollapsed = collapsedCategories.has(category);\n            const selectedInCategory = items.filter(v => selected.includes(v.id)).length;\n            \n            return (\n              <section key={category} className=\"bg-white dark:bg-dark-bg-primary rounded-xl border border-border-soft dark:border-dark-border/30 overflow-hidden shadow-sm\">\n                <button \n                  onClick={() => toggleCategory(category)}\n                  className=\"w-full flex items-center justify-between p-3 bg-bg-secondary/50 dark:bg-dark-bg-primary/50 hover:bg-bg-secondary dark:hover:bg-dark-bg-primary transition-colors text-left\"\n                >\n                  <div className=\"flex items-center gap-2\">\n                    <h2 className=\"text-[10px] font-black text-text-primary dark:text-white uppercase tracking-widest\">{category}</h2>\n                    {selectedInCategory > 0 && (\n                      <span className=\"bg-yellow-warm text-text-primary text-[7px] font-black px-1.5 py-0.5 rounded uppercase\">\n                        {selectedInCategory}\n                      </span>\n                    )}\n                  </div>\n                  <svg className={`w-3 h-3 text-text-primary/40 dark:text-white/40 transition-transform ${isCollapsed ? '-rotate-90' : ''}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M19 9l-7 7-7-7\" /></svg>\n                </button>\n\n                <div className={`transition-all duration-300 ${isCollapsed ? 'max-h-0 opacity-0' : 'max-h-[1000px] opacity-100 p-2 sm:p-3'}`}>\n                  <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-2\">\n                    {items.map((value) => {\n                      const isSelected = selected.includes(value.id);\n                      return (\n                        <button\n                          key={value.id}\n                          onClick={() => toggleValue(value.id)}\n                          className={`p-2 sm:p-3 rounded-lg sm:rounded-xl border text-left transition-all ${isSelected ? 'border-yellow-warm bg-yellow-warm/10 dark:bg-yellow-warm/20 shadow-sm' : 'border-border-soft dark:border-dark-border/30 bg-white dark:bg-dark-bg-primary/50 hover:border-yellow-warm/50'} ${shakeId === value.id ? 'animate-shake' : ''}`}\n                        >\n                          <h3 className={`font-black text-[10px] sm:text-[11px] tracking-tight ${isSelected ? 'text-text-primary dark:text-white' : 'text-text-primary dark:text-white'}`}>{value.name}</h3>\n                          <p className={`text-[8px] leading-tight font-medium mt-0.5 ${isSelected ? 'text-text-primary/70 dark:text-white/70' : 'text-text-primary/50 dark:text-white/50'}`}>{value.description.substring(0, 45)}...</p>\n                        </button>\n                      );\n                    })}\n                  </div>\n                </div>\n              </section>\n            );\n          })}\n        </div>\n      ) : (\n        <div className=\"max-w-md mx-auto space-y-2 animate-pop\">\n          {selectedObjects.map((value, index) => {\n            const isDragging = draggedIndex === index;\n            const isDragOver = dragOverIndex === index;\n\n            return (\n              <div \n                key={value.id}\n                draggable\n                onDragStart={() => handleDragStart(index)}\n                onDragOver={(e) => handleDragOver(e, index)}\n                onDragLeave={() => setDragOverIndex(null)}\n                onDrop={() => handleDrop(index)}\n                className={`flex items-center gap-2 sm:gap-3 bg-white dark:bg-dark-bg-primary p-2 sm:p-2.5 rounded-lg sm:rounded-xl border transition-all cursor-grab active:cursor-grabbing ${isDragging ? 'opacity-30 scale-95 border-dashed border-yellow-warm/50' : 'border-border-soft dark:border-dark-border/30 shadow-sm'} ${isDragOver ? 'border-yellow-warm' : ''}`}\n              >\n                <div className=\"flex flex-col gap-0.5 items-center bg-bg-secondary dark:bg-dark-bg-primary/50 p-1 rounded-md\">\n                  <button onClick={(e) => { e.stopPropagation(); moveValue(index, 'up'); }} disabled={index === 0} className=\"text-text-primary/30 dark:text-white/30 hover:text-yellow-warm disabled:opacity-0\"><svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 15l7-7 7 7\" /></svg></button>\n                  <button onClick={(e) => { e.stopPropagation(); moveValue(index, 'down'); }} disabled={index === selected.length - 1} className=\"text-text-primary/30 dark:text-white/30 hover:text-yellow-warm disabled:opacity-0\"><svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M19 9l-7 7-7-7\" /></svg></button>\n                </div>\n                <div className=\"flex-grow select-none flex items-center gap-2 min-w-0\">\n                  <span className={`text-[8px] font-black w-4 h-4 rounded-full flex items-center justify-center flex-shrink-0 ${index === 0 ? 'bg-yellow-warm text-text-primary' : 'bg-navy-primary dark:bg-navy-primary text-white dark:text-white'}`}>{index + 1}</span>\n                  <div className=\"min-w-0 flex-1\">\n                    <h4 className=\"font-black text-text-primary dark:text-white text-[11px] sm:text-[12px] tracking-tight truncate\">{value.name}</h4>\n                    <p className=\"text-[7px] text-text-primary/50 dark:text-white/50 font-bold uppercase tracking-widest\">{value.category}</p>\n                  </div>\n                </div>\n                <div className=\"text-text-primary/20 dark:text-white/20 pr-1 flex-shrink-0\"><svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" /></svg></div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n\n      <div className=\"fixed bottom-0 left-0 right-0 p-3 z-30 safe-area-inset-bottom\">\n        <div className=\"max-w-md mx-auto bg-white/95 dark:bg-dark-bg-primary/95 backdrop-blur shadow-2xl border border-border-soft dark:border-dark-border/30 rounded-xl sm:rounded-2xl p-2 flex items-center justify-between\">\n          <div className=\"px-2 sm:px-3\">\n            <p className=\"text-[7px] text-text-primary/50 dark:text-white/50 font-black uppercase tracking-widest\">Strength</p>\n            <p className=\"text-[10px] font-bold text-text-primary dark:text-white\">{selected.length}/10</p>\n          </div>\n          <button\n            onClick={() => onComplete(selected)}\n            disabled={selected.length === 0}\n            className={`px-6 sm:px-8 py-2 sm:py-2.5 rounded-lg sm:rounded-xl font-black text-[8px] sm:text-[9px] uppercase tracking-widest transition-all ${selected.length > 0 ? 'bg-yellow-warm text-text-primary hover:opacity-90' : 'bg-bg-secondary dark:bg-dark-bg-primary/50 text-text-primary/30 dark:text-white/30'}`}\n          >\n            <span className=\"hidden sm:inline\">Confirm Compass</span>\n            <span className=\"sm:hidden\">Confirm</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ValueSelection;\n","/**\n * Debug Log Service\n * Collects diagnostic information for troubleshooting and support\n */\n\nimport { getCompatibilityReport } from './aiService';\nimport { getModelStatus } from './aiService';\n\nexport interface DebugLogEntry {\n  timestamp: string;\n  level: 'error' | 'warning' | 'info';\n  message: string;\n  details?: any;\n  stack?: string;\n}\n\nexport interface DebugLog {\n  appVersion: string;\n  timestamp: string;\n  userAgent: string;\n  platform: string;\n  language: string;\n  timezone: string;\n  screenResolution: string;\n  browserInfo: {\n    name: string;\n    version: string;\n    engine: string;\n  };\n  compatibility: {\n    sharedArrayBuffer: boolean;\n    crossOriginIsolated: boolean;\n    webGPU: boolean;\n    webAssembly: boolean;\n    estimatedMemory: number;\n    device: string;\n    browser: string;\n  };\n  aiModelStatus: {\n    loaded: boolean;\n    loading: boolean;\n    moodTracker: boolean;\n    counselingCoach: boolean;\n  };\n  errors: DebugLogEntry[];\n  warnings: DebugLogEntry[];\n  recentLogs: DebugLogEntry[];\n  localStorage: {\n    available: boolean;\n    keys: string[];\n  };\n  indexedDB: {\n    available: boolean;\n    databases: string[];\n  };\n  serviceWorker: {\n    available: boolean;\n    registered: boolean;\n    scope?: string;\n  };\n  networkStatus: {\n    online: boolean;\n    connectionType?: string;\n  };\n}\n\nconst MAX_LOG_ENTRIES = 100;\nconst logEntries: DebugLogEntry[] = [];\n\n// Track initialization state to prevent multiple initializations\nlet isInitialized = false;\nlet originalError: typeof console.error | null = null;\nlet originalWarn: typeof console.warn | null = null;\nconst errorHandler = (event: ErrorEvent) => {\n  logEntry('error', event.message, {\n    filename: event.filename,\n    lineno: event.lineno,\n    colno: event.colno,\n    stack: event.error?.stack,\n  });\n};\nconst rejectionHandler = (event: PromiseRejectionEvent) => {\n  logEntry('error', `Unhandled Promise Rejection: ${event.reason}`, {\n    reason: event.reason,\n    stack: event.reason?.stack,\n  });\n};\n\n/**\n * Initialize debug logging - capture console errors and warnings\n * Safe to call multiple times - will only initialize once\n */\nexport function initializeDebugLogging() {\n  // Prevent multiple initializations\n  if (isInitialized) {\n    return;\n  }\n\n  // Store original console methods only on first call\n  if (!originalError) {\n    originalError = console.error.bind(console);\n  }\n  if (!originalWarn) {\n    originalWarn = console.warn.bind(console);\n  }\n\n  // Wrap console.error\n  console.error = (...args: any[]) => {\n    logEntry('error', args.join(' '), { args });\n    originalError.apply(console, args);\n  };\n\n  // Wrap console.warn\n  console.warn = (...args: any[]) => {\n    logEntry('warning', args.join(' '), { args });\n    originalWarn.apply(console, args);\n  };\n\n  // Add event listeners (only once)\n  window.addEventListener('error', errorHandler);\n  window.addEventListener('unhandledrejection', rejectionHandler);\n\n  isInitialized = true;\n}\n\n/**\n * Add a log entry\n */\nexport function logEntry(level: 'error' | 'warning' | 'info', message: string, details?: any) {\n  const entry: DebugLogEntry = {\n    timestamp: new Date().toISOString(),\n    level,\n    message,\n    details,\n    stack: details?.stack || (details?.error instanceof Error ? details.error.stack : undefined),\n  };\n\n  logEntries.push(entry);\n  \n  // Keep only the most recent entries\n  if (logEntries.length > MAX_LOG_ENTRIES) {\n    logEntries.shift();\n  }\n}\n\n/**\n * Get browser information\n */\nfunction getBrowserInfo() {\n  const ua = navigator.userAgent;\n  let browserName = 'Unknown';\n  let browserVersion = 'Unknown';\n  let engine = 'Unknown';\n\n  // Detect browser - check Edge first since it includes Chrome in UA\n  if (ua.includes('Edg')) {\n    browserName = 'Edge';\n    const match = ua.match(/Edg\\/(\\d+)/);\n    browserVersion = match ? match[1] : 'Unknown';\n    engine = 'Blink';\n  } else if (ua.includes('Chrome') && !ua.includes('Edg')) {\n    browserName = 'Chrome';\n    const match = ua.match(/Chrome\\/(\\d+)/);\n    browserVersion = match ? match[1] : 'Unknown';\n    engine = 'Blink';\n  } else if (ua.includes('Safari') && !ua.includes('Chrome')) {\n    browserName = 'Safari';\n    const match = ua.match(/Version\\/(\\d+)/);\n    browserVersion = match ? match[1] : 'Unknown';\n    engine = 'WebKit';\n  } else if (ua.includes('Firefox')) {\n    browserName = 'Firefox';\n    const match = ua.match(/Firefox\\/(\\d+)/);\n    browserVersion = match ? match[1] : 'Unknown';\n    engine = 'Gecko';\n  }\n\n  // Detect engine if not already set\n  if (engine === 'Unknown') {\n    if (ua.includes('WebKit')) {\n      engine = 'WebKit';\n    } else if (ua.includes('Gecko')) {\n      engine = 'Gecko';\n    }\n  }\n\n  return { name: browserName, version: browserVersion, engine };\n}\n\n/**\n * Get platform information\n * Note: Apple Silicon Macs (M1, M2, M3, etc.) report as \"MacIntel\" in navigator.platform\n * This is a browser limitation - the actual architecture cannot be reliably detected from JavaScript\n */\nfunction getPlatformInfo(): string {\n  const platform = navigator.platform;\n  \n  // Add architecture hint if available (some browsers expose this)\n  if ('hardwareConcurrency' in navigator) {\n    const cores = navigator.hardwareConcurrency;\n    // Apple Silicon typically has more cores, but this is not reliable\n    // For now, just return the platform as reported by the browser\n  }\n  \n  return platform;\n}\n\n/**\n * Get IndexedDB database names\n */\nasync function getIndexedDBDatabases(): Promise<string[]> {\n  try {\n    if (!('indexedDB' in window)) {\n      return [];\n    }\n\n    // Modern browsers support indexedDB.databases()\n    if ('databases' in indexedDB) {\n      const databases = await (indexedDB as any).databases();\n      return databases.map((db: any) => db.name);\n    }\n\n    // Fallback: try to detect common database names\n    return ['GroundedDB']; // Default database name\n  } catch (error) {\n    return [];\n  }\n}\n\n/**\n * Get Service Worker information\n */\nasync function getServiceWorkerInfo() {\n  const available = 'serviceWorker' in navigator;\n  let registered = false;\n  let scope: string | undefined;\n\n  if (available) {\n    try {\n      const registration = await navigator.serviceWorker.getRegistration();\n      registered = !!registration;\n      scope = registration?.scope;\n    } catch (error) {\n      // Ignore\n    }\n  }\n\n  return { available, registered, scope };\n}\n\n/**\n * Get network connection information\n */\nfunction getNetworkInfo() {\n  const online = navigator.onLine;\n  let connectionType: string | undefined;\n\n  if ('connection' in navigator) {\n    const conn = (navigator as any).connection || (navigator as any).mozConnection || (navigator as any).webkitConnection;\n    if (conn) {\n      connectionType = conn.effectiveType || conn.type;\n    }\n  }\n\n  return { online, connectionType };\n}\n\n/**\n * Generate complete debug log\n */\nexport async function generateDebugLog(): Promise<DebugLog> {\n  const compatibilityReport = getCompatibilityReport();\n  const compatibility = compatibilityReport || {\n    sharedArrayBuffer: false,\n    crossOriginIsolated: false,\n    webGPU: false,\n    wasm: false,\n    estimatedMemory: null,\n    deviceType: 'unknown' as const,\n    browser: 'Unknown',\n    os: 'Unknown',\n    isCompatible: false,\n    issues: [],\n    recommendations: [],\n    canUseAI: false,\n    suggestedStrategy: 'unavailable' as const,\n  };\n  const modelStatus = getModelStatus();\n\n  const errors = logEntries.filter(e => e.level === 'error');\n  const warnings = logEntries.filter(e => e.level === 'warning');\n  const recentLogs = logEntries.slice(-20); // Last 20 entries\n\n  const browserInfo = getBrowserInfo();\n  const indexedDBDatabases = await getIndexedDBDatabases();\n  const serviceWorkerInfo = await getServiceWorkerInfo();\n  const networkInfo = getNetworkInfo();\n\n  // Get localStorage keys (excluding sensitive data)\n  const localStorageKeys: string[] = [];\n  try {\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key) {\n        localStorageKeys.push(key);\n      }\n    }\n  } catch (error) {\n    // Ignore\n  }\n\n  return {\n    appVersion: '1.12.25', // Should match package.json version\n    timestamp: new Date().toISOString(),\n    userAgent: navigator.userAgent,\n    platform: getPlatformInfo(),\n    language: navigator.language,\n    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n    screenResolution: `${window.screen.width}x${window.screen.height}`,\n    browserInfo,\n    compatibility: {\n      sharedArrayBuffer: compatibility.sharedArrayBuffer,\n      crossOriginIsolated: compatibility.crossOriginIsolated,\n      webGPU: compatibility.webGPU,\n      webAssembly: compatibility.wasm,\n      estimatedMemory: compatibility.estimatedMemory || 0,\n      device: compatibility.deviceType,\n      browser: `${compatibility.browser} on ${compatibility.os}`,\n    },\n    aiModelStatus: {\n      loaded: modelStatus.loaded,\n      loading: modelStatus.loading,\n      moodTracker: modelStatus.moodTracker,\n      counselingCoach: modelStatus.counselingCoach,\n    },\n    errors,\n    warnings,\n    recentLogs,\n    localStorage: {\n      available: typeof Storage !== 'undefined',\n      keys: localStorageKeys,\n    },\n    indexedDB: {\n      available: 'indexedDB' in window,\n      databases: indexedDBDatabases,\n    },\n    serviceWorker: serviceWorkerInfo,\n    networkStatus: networkInfo,\n  };\n}\n\n/**\n * Format debug log as text for email\n */\nexport function formatDebugLogForEmail(log: DebugLog): string {\n  const lines: string[] = [];\n\n  lines.push('='.repeat(60));\n  lines.push('GROUNDED APP DEBUG LOG');\n  lines.push('='.repeat(60));\n  lines.push('');\n  lines.push(`Generated: ${log.timestamp}`);\n  lines.push(`App Version: ${log.appVersion}`);\n  lines.push('');\n\n  lines.push('SYSTEM INFORMATION');\n  lines.push('-'.repeat(60));\n  lines.push(`Platform: ${log.platform}`);\n  lines.push(`Browser: ${log.browserInfo.name} ${log.browserInfo.version} (${log.browserInfo.engine})`);\n  lines.push(`User Agent: ${log.userAgent}`);\n  lines.push(`Language: ${log.language}`);\n  lines.push(`Timezone: ${log.timezone}`);\n  lines.push(`Screen Resolution: ${log.screenResolution}`);\n  lines.push('');\n\n  lines.push('BROWSER COMPATIBILITY');\n  lines.push('-'.repeat(60));\n  lines.push(`SharedArrayBuffer: ${log.compatibility.sharedArrayBuffer ? ' Available' : ' Not Available'}`);\n  lines.push(`Cross-Origin Isolated: ${log.compatibility.crossOriginIsolated ? ' Enabled' : ' Not Enabled'}`);\n  lines.push(`WebGPU: ${log.compatibility.webGPU ? ' Available' : ' Not Available'}`);\n  lines.push(`WebAssembly: ${log.compatibility.webAssembly ? ' Available' : ' Not Available'}`);\n  lines.push(`Estimated Memory: ${log.compatibility.estimatedMemory} MB`);\n  lines.push(`Device: ${log.compatibility.device}`);\n  lines.push(`Browser: ${log.compatibility.browser}`);\n  lines.push('');\n\n  lines.push('AI MODEL STATUS');\n  lines.push('-'.repeat(60));\n  lines.push(`Models Loaded: ${log.aiModelStatus.loaded ? ' Yes' : ' No'}`);\n  lines.push(`Currently Loading: ${log.aiModelStatus.loading ? 'Yes' : 'No'}`);\n  lines.push(`Mood Tracker: ${log.aiModelStatus.moodTracker ? ' Available' : ' Not Available'}`);\n  lines.push(`Counseling Coach: ${log.aiModelStatus.counselingCoach ? ' Available' : ' Not Available'}`);\n  lines.push('');\n\n  lines.push('STORAGE');\n  lines.push('-'.repeat(60));\n  lines.push(`LocalStorage: ${log.localStorage.available ? ' Available' : ' Not Available'}`);\n  lines.push(`LocalStorage Keys: ${log.localStorage.keys.join(', ') || 'None'}`);\n  lines.push(`IndexedDB: ${log.indexedDB.available ? ' Available' : ' Not Available'}`);\n  lines.push(`IndexedDB Databases: ${log.indexedDB.databases.join(', ') || 'None'}`);\n  lines.push('');\n\n  lines.push('SERVICE WORKER');\n  lines.push('-'.repeat(60));\n  lines.push(`Available: ${log.serviceWorker.available ? ' Yes' : ' No'}`);\n  lines.push(`Registered: ${log.serviceWorker.registered ? ' Yes' : ' No'}`);\n  if (log.serviceWorker.scope) {\n    lines.push(`Scope: ${log.serviceWorker.scope}`);\n  }\n  lines.push('');\n\n  lines.push('NETWORK');\n  lines.push('-'.repeat(60));\n  lines.push(`Online: ${log.networkStatus.online ? ' Yes' : ' No'}`);\n  if (log.networkStatus.connectionType) {\n    lines.push(`Connection Type: ${log.networkStatus.connectionType}`);\n  }\n  lines.push('');\n\n  if (log.errors.length > 0) {\n    lines.push('ERRORS');\n    lines.push('-'.repeat(60));\n    log.errors.forEach((error, index) => {\n      lines.push(`${index + 1}. [${error.timestamp}] ${error.message}`);\n      if (error.stack) {\n        lines.push(`   Stack: ${error.stack.split('\\n').slice(0, 3).join('\\n   ')}`);\n      }\n      if (error.details) {\n        lines.push(`   Details: ${JSON.stringify(error.details, null, 2).split('\\n').slice(0, 5).join('\\n   ')}`);\n      }\n      lines.push('');\n    });\n  }\n\n  if (log.warnings.length > 0) {\n    lines.push('WARNINGS');\n    lines.push('-'.repeat(60));\n    log.warnings.forEach((warning, index) => {\n      lines.push(`${index + 1}. [${warning.timestamp}] ${warning.message}`);\n      if (warning.details) {\n        lines.push(`   Details: ${JSON.stringify(warning.details, null, 2).split('\\n').slice(0, 3).join('\\n   ')}`);\n      }\n      lines.push('');\n    });\n  }\n\n  if (log.recentLogs.length > 0) {\n    lines.push('RECENT LOG ENTRIES (Last 20)');\n    lines.push('-'.repeat(60));\n    log.recentLogs.forEach((entry, index) => {\n      lines.push(`${index + 1}. [${entry.timestamp}] [${entry.level.toUpperCase()}] ${entry.message}`);\n    });\n    lines.push('');\n  }\n\n  lines.push('='.repeat(60));\n  lines.push('END OF DEBUG LOG');\n  lines.push('='.repeat(60));\n\n  return lines.join('\\n');\n}\n\n/**\n * Create email with debug log\n */\nexport function createEmailWithDebugLog(log: DebugLog): string {\n  const subject = encodeURIComponent('Grounded App Debug Log - Support Request');\n  const body = encodeURIComponent(\n    `Hello,\\n\\nI'm experiencing issues with the Grounded app. Please find the debug log attached below.\\n\\n` +\n    `---\\n\\n${formatDebugLogForEmail(log)}\\n\\n---\\n\\nThank you for your help!`\n  );\n  \n  return `mailto:ac.minds.ai@gmail.com?subject=${subject}&body=${body}`;\n}\n\n","import React, { useState, useEffect } from 'react';\nimport { generateDebugLog, formatDebugLogForEmail, createEmailWithDebugLog } from '../services/debugLog';\nimport type { DebugLog } from '../services/debugLog';\n\ninterface DebugLogProps {\n  onClose: () => void;\n}\n\nconst DebugLogComponent: React.FC<DebugLogProps> = ({ onClose }) => {\n  const [log, setLog] = useState<DebugLog | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [copied, setCopied] = useState(false);\n  const [expandedSections, setExpandedSections] = useState<Set<string>>(new Set(['errors', 'warnings']));\n\n  useEffect(() => {\n    // #region agent log\n    fetch('http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'DebugLog.tsx:15',message:'Starting generateDebugLog',data:{loadingState:loading},timestamp:Date.now(),sessionId:'debug-session',runId:'post-fix',hypothesisId:'C'})}).catch(()=>{});\n    // #endregion\n    // Generate debug log (debug logging is already initialized in App.tsx)\n    generateDebugLog()\n      .then((debugLog) => {\n        // #region agent log\n        fetch('http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'DebugLog.tsx:21',message:'generateDebugLog resolved',data:{hasLog:!!debugLog},timestamp:Date.now(),sessionId:'debug-session',runId:'post-fix',hypothesisId:'C'})}).catch(()=>{});\n        // #endregion\n        setLog(debugLog);\n        setLoading(false);\n      })\n      .catch((error) => {\n        // #region agent log\n        fetch('http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'DebugLog.tsx:27',message:'generateDebugLog rejected - error handler invoked',data:{error:error?.message||String(error),errorType:error?.constructor?.name,willSetLoadingFalse:true},timestamp:Date.now(),sessionId:'debug-session',runId:'post-fix',hypothesisId:'C'})}).catch(()=>{});\n        // #endregion\n        console.error('Failed to generate debug log:', error);\n        setLoading(false);\n        setLog(null);\n      });\n  }, []);\n\n  const toggleSection = (section: string) => {\n    const newExpanded = new Set(expandedSections);\n    if (newExpanded.has(section)) {\n      newExpanded.delete(section);\n    } else {\n      newExpanded.add(section);\n    }\n    setExpandedSections(newExpanded);\n  };\n\n  const handleCopy = async () => {\n    if (!log) return;\n    \n    const logText = formatDebugLogForEmail(log);\n    try {\n      await navigator.clipboard.writeText(logText);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (error) {\n      console.error('Failed to copy:', error);\n      alert('Failed to copy to clipboard. Please use the email button instead.');\n    }\n  };\n\n  const handleEmail = () => {\n    if (!log) return;\n    \n    const emailLink = createEmailWithDebugLog(log);\n    window.location.href = emailLink;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-navy-dark/60 backdrop-blur-sm\">\n        <div className=\"bg-white dark:bg-dark-bg-primary w-full max-w-2xl rounded-[40px] shadow-2xl p-8\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-navy-primary mx-auto mb-4\"></div>\n            <p className=\"text-text-secondary dark:text-text-secondary\">Generating debug log...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!log) {\n    return (\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-navy-dark/60 backdrop-blur-sm\">\n        <div className=\"bg-white dark:bg-dark-bg-primary w-full max-w-2xl rounded-[40px] shadow-2xl p-8\">\n          <div className=\"text-center\">\n            <p className=\"text-text-secondary dark:text-text-secondary\">Failed to generate debug log.</p>\n            <button\n              onClick={onClose}\n              className=\"mt-4 px-6 py-3 bg-navy-primary text-white rounded-xl font-black uppercase tracking-widest\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-navy-dark/60 backdrop-blur-sm\">\n      <div className=\"bg-white dark:bg-dark-bg-primary w-full max-w-2xl rounded-[40px] shadow-2xl overflow-hidden max-h-[90vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"p-6 border-b border-border-soft dark:border-dark-border flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-black text-text-primary dark:text-white\">Debug Log</h2>\n            <p className=\"text-sm text-text-secondary dark:text-text-secondary mt-1\">\n              Diagnostic information for troubleshooting\n            </p>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"w-10 h-10 flex items-center justify-center rounded-full bg-bg-secondary dark:bg-dark-bg-secondary text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* Content - Scrollable */}\n        <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\n          {/* System Information */}\n          <Section\n            title=\"System Information\"\n            expanded={expandedSections.has('system')}\n            onToggle={() => toggleSection('system')}\n          >\n            <div className=\"space-y-2 text-sm\">\n              <InfoRow label=\"App Version\" value={log.appVersion} />\n              <InfoRow label=\"Platform\" value={log.platform} />\n              <InfoRow label=\"Browser\" value={`${log.browserInfo.name} ${log.browserInfo.version}`} />\n              <InfoRow label=\"Engine\" value={log.browserInfo.engine} />\n              <InfoRow label=\"Language\" value={log.language} />\n              <InfoRow label=\"Timezone\" value={log.timezone} />\n              <InfoRow label=\"Screen\" value={log.screenResolution} />\n            </div>\n          </Section>\n\n          {/* Browser Compatibility */}\n          <Section\n            title=\"Browser Compatibility\"\n            expanded={expandedSections.has('compatibility')}\n            onToggle={() => toggleSection('compatibility')}\n          >\n            <div className=\"space-y-2 text-sm\">\n              <StatusRow label=\"SharedArrayBuffer\" value={log.compatibility.sharedArrayBuffer} />\n              <StatusRow label=\"Cross-Origin Isolated\" value={log.compatibility.crossOriginIsolated} />\n              <StatusRow label=\"WebGPU\" value={log.compatibility.webGPU} />\n              <StatusRow label=\"WebAssembly\" value={log.compatibility.webAssembly} />\n              <InfoRow label=\"Estimated Memory\" value={`${log.compatibility.estimatedMemory} MB`} />\n              <InfoRow label=\"Device\" value={log.compatibility.device} />\n              <InfoRow label=\"Browser\" value={log.compatibility.browser} />\n            </div>\n          </Section>\n\n          {/* AI Model Status */}\n          <Section\n            title=\"AI Model Status\"\n            expanded={expandedSections.has('ai')}\n            onToggle={() => toggleSection('ai')}\n          >\n            <div className=\"space-y-2 text-sm\">\n              <StatusRow label=\"Models Loaded\" value={log.aiModelStatus.loaded} />\n              <InfoRow label=\"Loading\" value={log.aiModelStatus.loading ? 'Yes' : 'No'} />\n              <StatusRow label=\"Mood Tracker\" value={log.aiModelStatus.moodTracker} />\n              <StatusRow label=\"Counseling Coach\" value={log.aiModelStatus.counselingCoach} />\n            </div>\n          </Section>\n\n          {/* Storage */}\n          <Section\n            title=\"Storage\"\n            expanded={expandedSections.has('storage')}\n            onToggle={() => toggleSection('storage')}\n          >\n            <div className=\"space-y-2 text-sm\">\n              <StatusRow label=\"LocalStorage\" value={log.localStorage.available} />\n              <InfoRow label=\"Keys\" value={log.localStorage.keys.join(', ') || 'None'} />\n              <StatusRow label=\"IndexedDB\" value={log.indexedDB.available} />\n              <InfoRow label=\"Databases\" value={log.indexedDB.databases.join(', ') || 'None'} />\n            </div>\n          </Section>\n\n          {/* Service Worker */}\n          <Section\n            title=\"Service Worker\"\n            expanded={expandedSections.has('sw')}\n            onToggle={() => toggleSection('sw')}\n          >\n            <div className=\"space-y-2 text-sm\">\n              <StatusRow label=\"Available\" value={log.serviceWorker.available} />\n              <StatusRow label=\"Registered\" value={log.serviceWorker.registered} />\n              {log.serviceWorker.scope && (\n                <InfoRow label=\"Scope\" value={log.serviceWorker.scope} />\n              )}\n            </div>\n          </Section>\n\n          {/* Network */}\n          <Section\n            title=\"Network\"\n            expanded={expandedSections.has('network')}\n            onToggle={() => toggleSection('network')}\n          >\n            <div className=\"space-y-2 text-sm\">\n              <StatusRow label=\"Online\" value={log.networkStatus.online} />\n              {log.networkStatus.connectionType && (\n                <InfoRow label=\"Connection\" value={log.networkStatus.connectionType} />\n              )}\n            </div>\n          </Section>\n\n          {/* Errors */}\n          {log.errors.length > 0 && (\n            <Section\n              title={`Errors (${log.errors.length})`}\n              expanded={expandedSections.has('errors')}\n              onToggle={() => toggleSection('errors')}\n            >\n              <div className=\"space-y-3 text-sm\">\n                {log.errors.map((error, index) => (\n                  <div key={index} className=\"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg border border-red-200 dark:border-red-800\">\n                    <p className=\"font-semibold text-red-800 dark:text-red-200\">{error.message}</p>\n                    <p className=\"text-xs text-red-600 dark:text-red-400 mt-1\">{error.timestamp}</p>\n                    {error.stack && (\n                      <pre className=\"text-xs text-red-600 dark:text-red-400 mt-2 whitespace-pre-wrap break-all\">\n                        {error.stack.split('\\n').slice(0, 3).join('\\n')}\n                      </pre>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </Section>\n          )}\n\n          {/* Warnings */}\n          {log.warnings.length > 0 && (\n            <Section\n              title={`Warnings (${log.warnings.length})`}\n              expanded={expandedSections.has('warnings')}\n              onToggle={() => toggleSection('warnings')}\n            >\n              <div className=\"space-y-3 text-sm\">\n                {log.warnings.map((warning, index) => (\n                  <div key={index} className=\"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg border border-yellow-200 dark:border-yellow-800\">\n                    <p className=\"font-semibold text-yellow-800 dark:text-yellow-200\">{warning.message}</p>\n                    <p className=\"text-xs text-yellow-600 dark:text-yellow-400 mt-1\">{warning.timestamp}</p>\n                  </div>\n                ))}\n              </div>\n            </Section>\n          )}\n        </div>\n\n        {/* Footer Actions */}\n        <div className=\"p-6 border-t border-border-soft dark:border-dark-border space-y-3\">\n          <div className=\"flex gap-3\">\n            <button\n              onClick={handleCopy}\n              className=\"flex-1 px-4 py-3 bg-bg-secondary dark:bg-dark-bg-secondary text-text-primary dark:text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-bg-tertiary dark:hover:bg-dark-bg-tertiary\"\n            >\n              {copied ? ' Copied!' : 'Copy Log'}\n            </button>\n            <button\n              onClick={handleEmail}\n              className=\"flex-1 px-4 py-3 bg-navy-primary text-white rounded-xl text-xs font-black uppercase tracking-widest hover:opacity-90\"\n            >\n               Email Support\n            </button>\n          </div>\n          <p className=\"text-xs text-text-tertiary dark:text-text-tertiary text-center\">\n            Click \"Email Support\" to open your email client with the debug log attached\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Helper Components\ninterface SectionProps {\n  title: string;\n  expanded: boolean;\n  onToggle: () => void;\n  children: React.ReactNode;\n}\n\nconst Section: React.FC<SectionProps> = ({ title, expanded, onToggle, children }) => (\n  <div className=\"bg-bg-secondary dark:bg-dark-bg-secondary rounded-xl border border-border-soft dark:border-dark-border overflow-hidden\">\n    <button\n      onClick={onToggle}\n      className=\"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-bg-tertiary dark:hover:bg-dark-bg-tertiary transition-colors\"\n    >\n      <span className=\"text-sm font-black text-text-primary dark:text-white uppercase tracking-widest\">\n        {title}\n      </span>\n      <svg\n        className={`w-5 h-5 text-text-tertiary dark:text-text-tertiary transition-transform ${expanded ? 'rotate-180' : ''}`}\n        fill=\"none\"\n        viewBox=\"0 0 24 24\"\n        stroke=\"currentColor\"\n      >\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n      </svg>\n    </button>\n    {expanded && <div className=\"px-4 py-3 border-t border-border-soft dark:border-dark-border\">{children}</div>}\n  </div>\n);\n\ninterface InfoRowProps {\n  label: string;\n  value: string;\n}\n\nconst InfoRow: React.FC<InfoRowProps> = ({ label, value }) => (\n  <div className=\"flex justify-between\">\n    <span className=\"text-text-secondary dark:text-text-secondary\">{label}:</span>\n    <span className=\"font-semibold text-text-primary dark:text-white\">{value}</span>\n  </div>\n);\n\ninterface StatusRowProps {\n  label: string;\n  value: boolean;\n}\n\nconst StatusRow: React.FC<StatusRowProps> = ({ label, value }) => (\n  <div className=\"flex justify-between items-center\">\n    <span className=\"text-text-secondary dark:text-text-secondary\">{label}:</span>\n    <span className={`font-semibold ${value ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n      {value ? '' : ''}\n    </span>\n  </div>\n);\n\nexport default DebugLogComponent;\n\n","\nimport React, { useState } from 'react';\nimport DebugLogComponent from './DebugLog';\n\ninterface HelpOverlayProps {\n  onClose: () => void;\n}\n\nconst HelpOverlay: React.FC<HelpOverlayProps> = ({ onClose }) => {\n  const [showDebugLog, setShowDebugLog] = useState(false);\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 bg-navy-dark/60 backdrop-blur-sm animate-fade-in\">\n      <div \n        className=\"bg-white dark:bg-dark-bg-primary w-full max-w-lg rounded-[40px] shadow-2xl overflow-hidden animate-pop relative border border-border-soft dark:border-dark-border\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <button \n          onClick={onClose}\n          className=\"absolute top-6 right-6 w-10 h-10 flex items-center justify-center rounded-full bg-bg-secondary dark:bg-dark-bg-secondary text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors\"\n        >\n          <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" /></svg>\n        </button>\n\n        <div className=\"p-10 space-y-8 max-h-[90vh] overflow-y-auto\">\n          <div className=\"space-y-2\">\n            <h2 className=\"text-3xl font-black text-text-primary dark:text-white tracking-tight\">How to navigate</h2>\n            <p className=\"text-text-secondary dark:text-text-secondary font-medium\">Mastering Grounded in 3 steps.</p>\n          </div>\n\n          <div className=\"space-y-6\">\n            <div className=\"flex gap-6\">\n              <div className=\"w-12 h-12 rounded-2xl bg-navy-primary dark:bg-navy-primary flex items-center justify-center text-white font-black shrink-0 shadow-lg\">1</div>\n              <div>\n                <h4 className=\"font-black text-text-primary dark:text-white text-lg\">Define & Rank</h4>\n                <p className=\"text-text-secondary dark:text-text-secondary text-sm leading-relaxed\">Pick up to 10 values in the <b>Values</b> tab. Rank them by dragging. Your top value becomes your \"North Star\" for the Dashboard guidance.</p>\n              </div>\n            </div>\n\n            <div className=\"flex gap-6\">\n              <div className=\"w-12 h-12 rounded-2xl bg-yellow-warm dark:bg-yellow-warm flex items-center justify-center text-navy-primary dark:text-navy-primary font-black shrink-0 shadow-lg\">2</div>\n              <div>\n                <h4 className=\"font-black text-text-primary dark:text-white text-lg\">Embody Daily</h4>\n                <p className=\"text-text-secondary dark:text-text-secondary text-sm leading-relaxed\">In the <b>Dashboard</b>, open a value to reflect on your progress. Log a win or set a \"Next Aim\" (micro-goal) to build momentum.</p>\n              </div>\n            </div>\n\n            <div className=\"flex gap-6\">\n              <div className=\"w-12 h-12 rounded-2xl bg-calm-sage dark:bg-calm-sage flex items-center justify-center text-white dark:text-navy-primary font-black shrink-0 shadow-lg\">3</div>\n              <div>\n                <h4 className=\"font-black text-text-primary dark:text-white text-lg\">Synthesize</h4>\n                <p className=\"text-text-secondary dark:text-text-secondary text-sm leading-relaxed\">Use <b>Reports</b> to generate clinical-style summaries (SOAP/DAP) of your journey to share with a therapist or for personal growth audits.</p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"pt-4 border-t border-border-soft dark:border-dark-border space-y-4\">\n            <h3 className=\"text-lg font-black text-text-primary dark:text-white\">Tips & Best Practices</h3>\n            <div className=\"space-y-3\">\n              <div className=\"bg-bg-secondary dark:bg-dark-bg-secondary p-6 rounded-3xl flex items-start gap-4\">\n                <div className=\"text-2xl mt-1\"></div>\n                <div className=\"space-y-1\">\n                  <p className=\"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest\">Pro Tip</p>\n                  <p className=\"text-xs text-text-secondary dark:text-text-secondary leading-relaxed font-medium\">Head to <b>Settings</b> to enable \"Growth and Progress\" nudgessystem notifications that keep your North Star top-of-mind.</p>\n                </div>\n              </div>\n              <div className=\"bg-bg-secondary dark:bg-dark-bg-secondary p-6 rounded-3xl flex items-start gap-4\">\n                <div className=\"text-2xl mt-1\"></div>\n                <div className=\"space-y-1\">\n                  <p className=\"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest\">Daily Practice</p>\n                  <p className=\"text-xs text-text-secondary dark:text-text-secondary leading-relaxed font-medium\">Check your Dashboard daily to log wins and set micro-goals. Small consistent actions build lasting change.</p>\n                </div>\n              </div>\n              <div className=\"bg-bg-secondary dark:bg-dark-bg-secondary p-6 rounded-3xl flex items-start gap-4\">\n                <div className=\"text-2xl mt-1\"></div>\n                <div className=\"space-y-1\">\n                  <p className=\"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest\">Therapy Integration</p>\n                  <p className=\"text-xs text-text-secondary dark:text-text-secondary leading-relaxed font-medium\">Use the <b>Reports</b> feature to generate summaries you can share with your therapist during sessions.</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"pt-4 border-t border-border-soft dark:border-dark-border space-y-4\">\n            <h3 className=\"text-lg font-black text-text-primary dark:text-white\">AI Model Information</h3>\n            <div className=\"bg-bg-secondary dark:bg-dark-bg-secondary p-6 rounded-3xl space-y-3\">\n              <p className=\"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2\">On-Device AI Processing</p>\n              <div className=\"space-y-2 text-xs text-text-secondary dark:text-text-secondary leading-relaxed\">\n                <p>\n                  <strong>Privacy First:</strong> All AI processing happens entirely on your device. No data is sent to external servers.\n                </p>\n                <p>\n                  <strong>Fast Loading:</strong> AI models begin downloading immediately when the app starts, so they're ready when you need them.\n                </p>\n                <p>\n                  <strong>Offline Capable:</strong> Once downloaded, models are cached locally for instant loading and offline use.\n                </p>\n                <p>\n                  <strong>Progress Tracking:</strong> Watch the progress bar during first launch to see model download status.\n                </p>\n                <p>\n                  <strong>Fallback Mode:</strong> If models fail to load, the app continues with rule-based responses. Core functionality remains available.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"pt-4 border-t border-border-soft dark:border-dark-border space-y-4\">\n            <h3 className=\"text-lg font-black text-text-primary dark:text-white\">Support & Troubleshooting</h3>\n            \n            {/* Debug Log - Prominent */}\n            <div className=\"bg-yellow-warm/10 dark:bg-yellow-warm/20 p-6 rounded-3xl border-2 border-yellow-warm/30 space-y-3\">\n              <div className=\"flex items-start gap-3\">\n                <div className=\"text-2xl\"></div>\n                <div className=\"flex-1\">\n                  <p className=\"text-sm font-black text-text-primary dark:text-white mb-1\">\n                    Experiencing Issues?\n                  </p>\n                  <p className=\"text-xs text-text-secondary dark:text-text-secondary leading-relaxed mb-3\">\n                    Generate a debug log with diagnostic information. Debug logging starts automatically when the app launches.\n                  </p>\n                  <button\n                    onClick={() => setShowDebugLog(true)}\n                    className=\"w-full px-4 py-3 bg-navy-primary text-white rounded-xl text-xs font-black uppercase tracking-widest hover:opacity-90 flex items-center justify-center gap-2 shadow-lg\"\n                  >\n                    <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                    </svg>\n                    Generate Debug Log\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* Email Support */}\n            <div className=\"bg-bg-secondary dark:bg-dark-bg-secondary p-6 rounded-3xl space-y-2\">\n              <p className=\"text-sm text-text-secondary dark:text-text-secondary leading-relaxed\">\n                Need help or have questions? We're here to assist you.\n              </p>\n              <div className=\"flex items-center gap-3 pt-2\">\n                <svg className=\"w-5 h-5 text-navy-primary dark:text-yellow-warm flex-shrink-0\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n                </svg>\n                <a \n                  href=\"mailto:ac.minds.ai@gmail.com?subject=Grounded App Support\"\n                  className=\"text-sm font-bold text-navy-primary dark:text-yellow-warm hover:underline\"\n                >\n                  ac.minds.ai@gmail.com\n                </a>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"pt-4 border-t border-border-soft dark:border-dark-border space-y-4\">\n            <h3 className=\"text-lg font-black text-text-primary dark:text-white\">License</h3>\n            <div className=\"bg-bg-secondary dark:bg-dark-bg-secondary p-6 rounded-3xl space-y-3\">\n              <p className=\"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest\">Apache License 2.0</p>\n              <div className=\"space-y-2 text-xs text-text-secondary dark:text-text-secondary leading-relaxed\">\n                <p>\n                  Copyright {new Date().getFullYear()} AC MiNDS\n                </p>\n                <p>\n                  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at:\n                </p>\n                <a \n                  href=\"http://www.apache.org/licenses/LICENSE-2.0\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"text-navy-primary dark:text-yellow-warm hover:underline break-all\"\n                >\n                  http://www.apache.org/licenses/LICENSE-2.0\n                </a>\n                <p>\n                  Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"pt-4\">\n             <button \n               onClick={onClose}\n               className=\"w-full py-5 bg-navy-primary dark:bg-navy-primary text-white dark:text-white rounded-[24px] font-black uppercase tracking-[0.2em] shadow-xl hover:opacity-90 transition-all active:scale-[0.98]\"\n             >\n               Got it, Let's grow\n             </button>\n          </div>\n        </div>\n      </div>\n      <div className=\"absolute inset-0 -z-10\" onClick={onClose} />\n      {showDebugLog && <DebugLogComponent onClose={() => setShowDebugLog(false)} />}\n    </div>\n  );\n};\n\nexport default HelpOverlay;\n","import React, { createContext, useContext, useEffect, useState } from 'react';\n\ntype Theme = 'light' | 'dark';\n\ninterface ThemeContextType {\n  theme: Theme;\n  toggleTheme: () => void;\n  setTheme: (theme: Theme) => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\nexport const ThemeProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [theme, setThemeState] = useState<Theme>(() => {\n    // Check localStorage first\n    const saved = localStorage.getItem('theme') as Theme;\n    if (saved) return saved;\n    \n    // Default to light mode\n    return 'light';\n  });\n\n  useEffect(() => {\n    const root = document.documentElement;\n    if (theme === 'dark') {\n      root.classList.add('dark');\n    } else {\n      root.classList.remove('dark');\n    }\n    localStorage.setItem('theme', theme);\n  }, [theme]);\n\n  const toggleTheme = () => {\n    setThemeState(prev => prev === 'light' ? 'dark' : 'light');\n  };\n\n  const setTheme = (newTheme: Theme) => {\n    setThemeState(newTheme);\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme, setTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n};\n\nexport const useTheme = () => {\n  const context = useContext(ThemeContext);\n  if (context === undefined) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n};\n\n","import React from 'react';\nimport { useTheme } from '../contexts/ThemeContext';\n\nconst ThemeToggle: React.FC = () => {\n  const { theme, toggleTheme } = useTheme();\n\n  return (\n    <button\n      onClick={toggleTheme}\n      className=\"w-8 h-8 flex items-center justify-center rounded-full transition-colors hover:bg-opacity-20 dark:hover:bg-opacity-20\"\n      aria-label=\"Toggle theme\"\n      title={theme === 'light' ? 'Switch to dark mode' : 'Switch to light mode'}\n    >\n      {theme === 'light' ? (\n        // Moon icon for dark mode\n        <svg className=\"w-5 h-5 text-yellow-warm\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\" />\n        </svg>\n      ) : (\n        // Sun icon for light mode\n        <svg className=\"w-5 h-5 text-yellow-warm\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\n        </svg>\n      )}\n    </button>\n  );\n};\n\nexport default ThemeToggle;\n\n","/**\n * Local Secure Database Service\n * Uses IndexedDB for secure, structured local storage\n * \n * Database Naming Convention:\n * - Uses reverse domain notation (com.acminds.grounded.db)\n * - Ensures uniqueness and prevents conflicts with other applications\n * - Follows web standards for IndexedDB naming\n * - Object stores are scoped to this database, so they don't need global uniqueness\n */\n\ninterface UserData {\n  id: string;\n  username: string;\n  passwordHash: string;\n  email: string;\n  therapistEmails?: string[];\n  termsAccepted: boolean;\n  termsAcceptedDate?: string;\n  createdAt: string;\n  lastLogin?: string;\n}\n\ninterface AppData {\n  settings: any;\n  logs: any[];\n  goals: any[];\n  values: string[];\n  lcswConfig?: any;\n}\n\nclass DatabaseService {\n  // Unique database name using reverse domain notation to avoid conflicts\n  // Format: com.[company].[appname].[purpose].db ensures uniqueness\n  // This ensures no conflicts with other apps like AiNotes or InnerCompass\n  private dbName = 'com.acminds.grounded.therapy.db';\n  private dbVersion = 1;\n  private db: IDBDatabase | null = null;\n\n  async init(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const request = indexedDB.open(this.dbName, this.dbVersion);\n\n      request.onerror = () => reject(request.error);\n      request.onsuccess = () => {\n        this.db = request.result;\n        resolve();\n      };\n\n      request.onupgradeneeded = (event) => {\n        const db = (event.target as IDBOpenDBRequest).result;\n\n        // Object stores are scoped to this database, so names don't need global uniqueness\n        // They only need to be unique within this database instance\n\n        // Users store - stores user account information\n        if (!db.objectStoreNames.contains('users')) {\n          const userStore = db.createObjectStore('users', { keyPath: 'id' });\n          userStore.createIndex('username', 'username', { unique: true });\n          userStore.createIndex('email', 'email', { unique: true });\n        }\n\n        // App data store - stores application data per user (settings, logs, goals, etc.)\n        if (!db.objectStoreNames.contains('appData')) {\n          const appDataStore = db.createObjectStore('appData', { keyPath: 'userId' });\n          appDataStore.createIndex('userId', 'userId', { unique: true });\n        }\n\n        // Reset tokens store - stores password reset tokens with expiration\n        if (!db.objectStoreNames.contains('resetTokens')) {\n          const resetStore = db.createObjectStore('resetTokens', { keyPath: 'token' });\n          resetStore.createIndex('userId', 'userId', { unique: false });\n          resetStore.createIndex('expires', 'expires', { unique: false });\n        }\n      };\n    });\n  }\n\n  private async ensureDB(): Promise<IDBDatabase> {\n    if (!this.db) {\n      await this.init();\n    }\n    if (!this.db) {\n      throw new Error('Database initialization failed');\n    }\n    return this.db;\n  }\n\n  // User operations\n  async createUser(userData: Omit<UserData, 'id' | 'createdAt'>): Promise<string> {\n    const db = await this.ensureDB();\n    const user: UserData = {\n      ...userData,\n      id: crypto.randomUUID(),\n      createdAt: new Date().toISOString(),\n    };\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(['users'], 'readwrite');\n      const store = transaction.objectStore('users');\n      const request = store.add(user);\n\n      request.onsuccess = () => resolve(user.id);\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async getUserByUsername(username: string): Promise<UserData | null> {\n    const db = await this.ensureDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(['users'], 'readonly');\n      const store = transaction.objectStore('users');\n      const index = store.index('username');\n      const request = index.get(username);\n\n      request.onsuccess = () => resolve(request.result || null);\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async getUserByEmail(email: string): Promise<UserData | null> {\n    const db = await this.ensureDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(['users'], 'readonly');\n      const store = transaction.objectStore('users');\n      const index = store.index('email');\n      const request = index.get(email);\n\n      request.onsuccess = () => resolve(request.result || null);\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async getUserById(userId: string): Promise<UserData | null> {\n    const db = await this.ensureDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(['users'], 'readonly');\n      const store = transaction.objectStore('users');\n      const request = store.get(userId);\n\n      request.onsuccess = () => resolve(request.result || null);\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async updateUser(userId: string, updates: Partial<UserData>): Promise<void> {\n    const db = await this.ensureDB();\n    return new Promise(async (resolve, reject) => {\n      const user = await this.getUserById(userId);\n      if (!user) {\n        reject(new Error('User not found'));\n        return;\n      }\n\n      const transaction = db.transaction(['users'], 'readwrite');\n      const store = transaction.objectStore('users');\n      const updatedUser = { ...user, ...updates };\n      const request = store.put(updatedUser);\n\n      request.onsuccess = () => resolve();\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  // App data operations\n  async getAppData(userId: string): Promise<AppData | null> {\n    const db = await this.ensureDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(['appData'], 'readonly');\n      const store = transaction.objectStore('appData');\n      const request = store.get(userId);\n\n      request.onsuccess = () => {\n        const result = request.result;\n        resolve(result ? result.data : null);\n      };\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async saveAppData(userId: string, data: AppData): Promise<void> {\n    const db = await this.ensureDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(['appData'], 'readwrite');\n      const store = transaction.objectStore('appData');\n      const request = store.put({ userId, data });\n\n      request.onsuccess = () => resolve();\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  // Reset token operations\n  async createResetToken(userId: string, email: string): Promise<string> {\n    const db = await this.ensureDB();\n    const token = crypto.randomUUID();\n    const expires = Date.now() + 24 * 60 * 60 * 1000; // 24 hours\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(['resetTokens'], 'readwrite');\n      const store = transaction.objectStore('resetTokens');\n      const request = store.add({\n        token,\n        userId,\n        email,\n        expires,\n        createdAt: new Date().toISOString(),\n      });\n\n      request.onsuccess = () => resolve(token);\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async getResetToken(token: string): Promise<{ userId: string; email: string } | null> {\n    const db = await this.ensureDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(['resetTokens'], 'readonly');\n      const store = transaction.objectStore('resetTokens');\n      const request = store.get(token);\n\n      request.onsuccess = () => {\n        const result = request.result;\n        if (!result) {\n          resolve(null);\n          return;\n        }\n\n        // Check if token is expired\n        if (result.expires < Date.now()) {\n          resolve(null);\n          return;\n        }\n\n        resolve({ userId: result.userId, email: result.email });\n      };\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async deleteResetToken(token: string): Promise<void> {\n    const db = await this.ensureDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(['resetTokens'], 'readwrite');\n      const store = transaction.objectStore('resetTokens');\n      const request = store.delete(token);\n\n      request.onsuccess = () => resolve();\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  // Cleanup expired tokens\n  async cleanupExpiredTokens(): Promise<void> {\n    const db = await this.ensureDB();\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(['resetTokens'], 'readwrite');\n      const store = transaction.objectStore('resetTokens');\n      const index = store.index('expires');\n      const request = index.openCursor();\n\n      request.onsuccess = (event) => {\n        const cursor = (event.target as IDBRequest<IDBCursorWithValue>).result;\n        if (cursor) {\n          if (cursor.value.expires < Date.now()) {\n            cursor.delete();\n          }\n          cursor.continue();\n        } else {\n          resolve();\n        }\n      };\n      request.onerror = () => reject(request.error);\n    });\n  }\n}\n\nexport const dbService = new DatabaseService();\n\n","/**\n * Authentication Service\n * Handles user authentication, password hashing, and session management\n */\n\nimport { dbService } from './database';\n\n// Hash password using Web Crypto API\nasync function hashPassword(password: string): Promise<string> {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(password);\n  const hashBuffer = await crypto.subtle.digest('SHA-256', data);\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n  return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n}\n\n// Verify password\nasync function verifyPassword(password: string, hash: string): Promise<boolean> {\n  const passwordHash = await hashPassword(password);\n  return passwordHash === hash;\n}\n\nexport interface RegisterData {\n  username: string;\n  password: string;\n  email: string;\n}\n\nexport interface LoginData {\n  username: string;\n  password: string;\n}\n\nexport interface AuthResult {\n  success: boolean;\n  userId?: string;\n  error?: string;\n}\n\n// Register new user\nexport async function registerUser(data: RegisterData): Promise<AuthResult> {\n  try {\n    // Validate inputs\n    if (!data.username || data.username.length < 3) {\n      return { success: false, error: 'Username must be at least 3 characters' };\n    }\n    if (!data.password || data.password.length < 6) {\n      return { success: false, error: 'Password must be at least 6 characters' };\n    }\n    if (!data.email || !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(data.email)) {\n      return { success: false, error: 'Please enter a valid email address' };\n    }\n\n    // Check if username already exists\n    const existingUser = await dbService.getUserByUsername(data.username);\n    if (existingUser) {\n      return { success: false, error: 'Username already exists' };\n    }\n\n    // Check if email already exists\n    const existingEmail = await dbService.getUserByEmail(data.email);\n    if (existingEmail) {\n      return { success: false, error: 'Email already registered' };\n    }\n\n    // Hash password\n    const passwordHash = await hashPassword(data.password);\n\n    // Create user\n    const userId = await dbService.createUser({\n      username: data.username,\n      passwordHash,\n      email: data.email,\n      termsAccepted: false,\n    });\n\n    return { success: true, userId };\n  } catch (error) {\n    console.error('Registration error:', error);\n    return { success: false, error: 'Registration failed. Please try again.' };\n  }\n}\n\n// Login user\nexport async function loginUser(data: LoginData): Promise<AuthResult> {\n  try {\n    if (!data.username || !data.password) {\n      return { success: false, error: 'Please enter username and password' };\n    }\n\n    const user = await dbService.getUserByUsername(data.username);\n    if (!user) {\n      return { success: false, error: 'Invalid username or password' };\n    }\n\n    const isValid = await verifyPassword(data.password, user.passwordHash);\n    if (!isValid) {\n      return { success: false, error: 'Invalid username or password' };\n    }\n\n    // Update last login\n    await dbService.updateUser(user.id, {\n      lastLogin: new Date().toISOString(),\n    });\n\n    // Store session\n    sessionStorage.setItem('userId', user.id);\n    sessionStorage.setItem('username', user.username);\n\n    return { success: true, userId: user.id };\n  } catch (error) {\n    console.error('Login error:', error);\n    return { success: false, error: 'Login failed. Please try again.' };\n  }\n}\n\n// Logout user\nexport function logoutUser(): void {\n  sessionStorage.removeItem('userId');\n  sessionStorage.removeItem('username');\n}\n\n// Get current user\nexport async function getCurrentUser() {\n  const userId = sessionStorage.getItem('userId');\n  if (!userId) return null;\n  return await dbService.getUserById(userId);\n}\n\n// Check if user is logged in\nexport function isLoggedIn(): boolean {\n  return !!sessionStorage.getItem('userId');\n}\n\n// Request password reset\nexport async function requestPasswordReset(email: string): Promise<{ success: boolean; resetLink?: string; error?: string }> {\n  try {\n    const user = await dbService.getUserByEmail(email);\n    if (!user) {\n      // Don't reveal if email exists for security - return success but no link\n      return { success: true };\n    }\n\n    const token = await dbService.createResetToken(user.id, email);\n    \n    // Generate reset link (in a real app, this would be sent via email)\n    // For local-only app, we'll generate a data URL that can be copied\n    const resetLink = `${window.location.origin}${window.location.pathname}#reset/${token}`;\n    \n    return { success: true, resetLink };\n  } catch (error) {\n    console.error('Password reset error:', error);\n    return { success: false, error: 'Failed to generate reset link' };\n  }\n}\n\n// Reset password with token\nexport async function resetPasswordWithToken(token: string, newPassword: string): Promise<AuthResult> {\n  try {\n    if (!newPassword || newPassword.length < 6) {\n      return { success: false, error: 'Password must be at least 6 characters' };\n    }\n\n    const tokenData = await dbService.getResetToken(token);\n    if (!tokenData) {\n      return { success: false, error: 'Invalid or expired reset token' };\n    }\n\n    const passwordHash = await hashPassword(newPassword);\n    await dbService.updateUser(tokenData.userId, { passwordHash });\n    await dbService.deleteResetToken(token);\n\n    return { success: true, userId: tokenData.userId };\n  } catch (error) {\n    console.error('Password reset error:', error);\n    return { success: false, error: 'Failed to reset password' };\n  }\n}\n\n// Accept terms\nexport async function acceptTerms(userId: string): Promise<void> {\n  await dbService.updateUser(userId, {\n    termsAccepted: true,\n    termsAcceptedDate: new Date().toISOString(),\n  });\n}\n\n","import React, { useState, useEffect } from 'react';\nimport { registerUser, loginUser, requestPasswordReset, resetPasswordWithToken } from '../services/authService';\n\ninterface LoginProps {\n  onLogin: (userId: string) => void;\n}\n\nconst Login: React.FC<LoginProps> = ({ onLogin }) => {\n  const [mode, setMode] = useState<'login' | 'register' | 'forgot' | 'reset'>('login');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [email, setEmail] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [resetToken, setResetToken] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [resetLink, setResetLink] = useState('');\n  \n  // Password visibility states\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [showNewPassword, setShowNewPassword] = useState(false);\n  const [showResetConfirmPassword, setShowResetConfirmPassword] = useState(false);\n\n  // Check for reset token in URL hash\n  useEffect(() => {\n    const hash = window.location.hash;\n    const resetMatch = hash.match(/^#reset\\/(.+)$/);\n    if (resetMatch) {\n      setResetToken(resetMatch[1]);\n      setMode('reset');\n      window.history.replaceState(null, '', window.location.pathname);\n    }\n  }, []);\n\n  const handleRegister = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    if (password !== confirmPassword) {\n      setError('Passwords do not match');\n      setLoading(false);\n      return;\n    }\n\n    const result = await registerUser({ username, password, email });\n    setLoading(false);\n\n    if (result.success) {\n      // Auto-login after registration\n      const loginResult = await loginUser({ username, password });\n      if (loginResult.success && loginResult.userId) {\n        onLogin(loginResult.userId);\n      }\n    } else {\n      setError(result.error || 'Registration failed');\n    }\n  };\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    const result = await loginUser({ username, password });\n    setLoading(false);\n\n    if (result.success && result.userId) {\n      onLogin(result.userId);\n    } else {\n      setError(result.error || 'Login failed');\n    }\n  };\n\n  const handleForgotPassword = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    const result = await requestPasswordReset(email);\n    setLoading(false);\n\n    if (result.success && result.resetLink) {\n      setResetLink(result.resetLink);\n      setError('');\n    } else {\n      setError(result.error || 'Failed to generate reset link');\n    }\n  };\n\n  const handleResetPassword = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    if (newPassword !== confirmPassword) {\n      setError('Passwords do not match');\n      setLoading(false);\n      return;\n    }\n\n    const result = await resetPasswordWithToken(resetToken, newPassword);\n    setLoading(false);\n\n    if (result.success) {\n      setError('');\n      alert('Password reset successful! Please login with your new password.');\n      setMode('login');\n      setResetToken('');\n      setNewPassword('');\n      setConfirmPassword('');\n    } else {\n      setError(result.error || 'Failed to reset password');\n    }\n  };\n\n  const copyResetLink = () => {\n    navigator.clipboard.writeText(resetLink);\n    alert('Reset link copied to clipboard! Save this link to reset your password.');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-bg-primary dark:bg-dark-bg-primary flex items-center justify-center p-4 sm:p-6\">\n      <div className=\"max-w-md w-full bg-white dark:bg-dark-bg-primary rounded-xl sm:rounded-2xl shadow-2xl border border-border-soft dark:border-dark-border/30 overflow-hidden\">\n        <div className=\"p-6 sm:p-8 space-y-6\">\n          <div className=\"text-center space-y-2\">\n            <img \n              src=\"/ac-minds-logo.png\" \n              alt=\"AC MINDS\" \n              className=\"w-12 h-12 sm:w-16 sm:h-16 object-contain mx-auto\"\n            />\n            <h1 className=\"text-2xl sm:text-3xl font-black text-text-primary dark:text-white tracking-tight\">\n              Grounded\n            </h1>\n            <p className=\"text-sm sm:text-base text-text-primary/60 dark:text-white/60\">\n              {mode === 'login' && 'Sign in to continue'}\n              {mode === 'register' && 'Create your account'}\n              {mode === 'forgot' && 'Reset your password'}\n              {mode === 'reset' && 'Set new password'}\n            </p>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 sm:p-4\">\n              <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n            </div>\n          )}\n\n          {resetLink && mode === 'forgot' && (\n            <div className=\"bg-yellow-warm/20 dark:bg-yellow-warm/30 border border-yellow-warm/50 rounded-lg p-4 space-y-3\">\n              <p className=\"text-sm font-bold text-text-primary dark:text-white\">\n                Reset Link Generated\n              </p>\n              <p className=\"text-xs text-text-primary/70 dark:text-white/70\">\n                Copy this link to reset your password. It will expire in 24 hours.\n              </p>\n              <div className=\"flex gap-2\">\n                <input\n                  type=\"text\"\n                  value={resetLink}\n                  readOnly\n                  className=\"flex-1 px-3 py-2 bg-white dark:bg-dark-bg-primary rounded-lg text-xs border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white\"\n                />\n                <button\n                  onClick={copyResetLink}\n                  className=\"px-4 py-2 bg-yellow-warm text-text-primary rounded-lg text-xs font-bold uppercase tracking-widest hover:opacity-90\"\n                >\n                  Copy\n                </button>\n              </div>\n            </div>\n          )}\n\n          {mode === 'login' && (\n            <form onSubmit={handleLogin} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2\">\n                  Username\n                </label>\n                <input\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  required\n                  className=\"w-full px-4 py-3 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none\"\n                  placeholder=\"Enter your username\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2\">\n                  Password\n                </label>\n                <div className=\"relative\">\n                  <input\n                    type={showPassword ? \"text\" : \"password\"}\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    required\n                    className=\"w-full px-4 py-3 pr-12 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none\"\n                    placeholder=\"Enter your password\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors\"\n                    aria-label={showPassword ? \"Hide password\" : \"Show password\"}\n                  >\n                    {showPassword ? (\n                      <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\" />\n                      </svg>\n                    ) : (\n                      <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                      </svg>\n                    )}\n                  </button>\n                </div>\n              </div>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full py-3 sm:py-4 bg-yellow-warm text-text-primary rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-90 transition-all disabled:opacity-50 shadow-lg\"\n              >\n                {loading ? 'Signing in...' : 'Sign In'}\n              </button>\n              <div className=\"flex flex-col sm:flex-row justify-between gap-2 text-center\">\n                <button\n                  type=\"button\"\n                  onClick={() => setMode('register')}\n                  className=\"text-xs sm:text-sm text-yellow-warm hover:underline\"\n                >\n                  Create Account\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setMode('forgot')}\n                  className=\"text-xs sm:text-sm text-text-primary/60 dark:text-white/60 hover:underline\"\n                >\n                  Forgot Password?\n                </button>\n              </div>\n            </form>\n          )}\n\n          {mode === 'register' && (\n            <form onSubmit={handleRegister} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2\">\n                  Username\n                </label>\n                <input\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  required\n                  minLength={3}\n                  className=\"w-full px-4 py-3 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none\"\n                  placeholder=\"Choose a username (min 3 characters)\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2\">\n                  Email\n                </label>\n                <input\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  required\n                  className=\"w-full px-4 py-3 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none\"\n                  placeholder=\"your.email@example.com\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2\">\n                  Password\n                </label>\n                <div className=\"relative\">\n                  <input\n                    type={showPassword ? \"text\" : \"password\"}\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    required\n                    minLength={6}\n                    className=\"w-full px-4 py-3 pr-12 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none\"\n                    placeholder=\"Choose a password (min 6 characters)\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors\"\n                    aria-label={showPassword ? \"Hide password\" : \"Show password\"}\n                  >\n                    {showPassword ? (\n                      <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\" />\n                      </svg>\n                    ) : (\n                      <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                      </svg>\n                    )}\n                  </button>\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2\">\n                  Confirm Password\n                </label>\n                <div className=\"relative\">\n                  <input\n                    type={showConfirmPassword ? \"text\" : \"password\"}\n                    value={confirmPassword}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                    required\n                    minLength={6}\n                    className=\"w-full px-4 py-3 pr-12 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none\"\n                    placeholder=\"Confirm your password\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors\"\n                    aria-label={showConfirmPassword ? \"Hide password\" : \"Show password\"}\n                  >\n                    {showConfirmPassword ? (\n                      <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\" />\n                      </svg>\n                    ) : (\n                      <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                      </svg>\n                    )}\n                  </button>\n                </div>\n              </div>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full py-3 sm:py-4 bg-yellow-warm text-text-primary rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-90 transition-all disabled:opacity-50 shadow-lg\"\n              >\n                {loading ? 'Creating Account...' : 'Create Account'}\n              </button>\n              <div className=\"text-center\">\n                <button\n                  type=\"button\"\n                  onClick={() => setMode('login')}\n                  className=\"text-xs sm:text-sm text-yellow-warm hover:underline\"\n                >\n                  Already have an account? Sign In\n                </button>\n              </div>\n            </form>\n          )}\n\n          {mode === 'forgot' && (\n            <form onSubmit={handleForgotPassword} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2\">\n                  Email Address\n                </label>\n                <input\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  required\n                  className=\"w-full px-4 py-3 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none\"\n                  placeholder=\"Enter your email address\"\n                />\n              </div>\n              <p className=\"text-xs text-text-primary/60 dark:text-white/60\">\n                A reset link will be generated. Copy and save it to reset your password.\n              </p>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full py-3 sm:py-4 bg-yellow-warm text-text-primary rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-90 transition-all disabled:opacity-50 shadow-lg\"\n              >\n                {loading ? 'Generating Link...' : 'Generate Reset Link'}\n              </button>\n              <div className=\"text-center\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setMode('login');\n                    setEmail('');\n                    setResetLink('');\n                  }}\n                  className=\"text-xs sm:text-sm text-yellow-warm hover:underline\"\n                >\n                  Back to Sign In\n                </button>\n              </div>\n            </form>\n          )}\n\n          {mode === 'reset' && (\n            <form onSubmit={handleResetPassword} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2\">\n                  New Password\n                </label>\n                <div className=\"relative\">\n                  <input\n                    type={showNewPassword ? \"text\" : \"password\"}\n                    value={newPassword}\n                    onChange={(e) => setNewPassword(e.target.value)}\n                    required\n                    minLength={6}\n                    className=\"w-full px-4 py-3 pr-12 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none\"\n                    placeholder=\"Enter new password (min 6 characters)\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowNewPassword(!showNewPassword)}\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors\"\n                    aria-label={showNewPassword ? \"Hide password\" : \"Show password\"}\n                  >\n                    {showNewPassword ? (\n                      <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\" />\n                      </svg>\n                    ) : (\n                      <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                      </svg>\n                    )}\n                  </button>\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-2\">\n                  Confirm New Password\n                </label>\n                <div className=\"relative\">\n                  <input\n                    type={showResetConfirmPassword ? \"text\" : \"password\"}\n                    value={confirmPassword}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                    required\n                    minLength={6}\n                    className=\"w-full px-4 py-3 pr-12 rounded-lg bg-bg-primary dark:bg-dark-bg-primary/50 border border-border-soft dark:border-dark-border/30 text-text-primary dark:text-white focus:ring-2 focus:ring-yellow-warm/50 outline-none\"\n                    placeholder=\"Confirm new password\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowResetConfirmPassword(!showResetConfirmPassword)}\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white transition-colors\"\n                    aria-label={showResetConfirmPassword ? \"Hide password\" : \"Show password\"}\n                  >\n                    {showResetConfirmPassword ? (\n                      <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\" />\n                      </svg>\n                    ) : (\n                      <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                      </svg>\n                    )}\n                  </button>\n                </div>\n              </div>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full py-3 sm:py-4 bg-yellow-warm text-text-primary rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-90 transition-all disabled:opacity-50 shadow-lg\"\n              >\n                {loading ? 'Resetting Password...' : 'Reset Password'}\n              </button>\n            </form>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n\n","import React, { useState } from 'react';\nimport { ALL_CRISIS_PHRASES, getCategoryDisplayName, CrisisCategory } from '../services/crisisConfig';\n\ninterface TermsAcceptanceProps {\n  onAccept: () => void;\n  onDecline: () => void;\n}\n\nconst TermsAcceptance: React.FC<TermsAcceptanceProps> = ({ onAccept, onDecline }) => {\n  const [readTerms, setReadTerms] = useState(false);\n  const [readDisclaimer, setReadDisclaimer] = useState(false);\n\n  const canAccept = readTerms && readDisclaimer;\n\n  return (\n    <div className=\"min-h-screen bg-bg-primary dark:bg-dark-bg-primary flex items-center justify-center p-4 sm:p-6\">\n      <div className=\"max-w-2xl w-full bg-white dark:bg-dark-bg-primary rounded-xl sm:rounded-2xl shadow-2xl border border-border-soft dark:border-dark-border/30 overflow-hidden\">\n        <div className=\"p-6 sm:p-8 lg:p-10 space-y-6 sm:space-y-8 max-h-[90vh] overflow-y-auto custom-scrollbar\">\n          <div className=\"text-center space-y-2\">\n            <h1 className=\"text-2xl sm:text-3xl font-black text-text-primary dark:text-white tracking-tight\">\n              Acceptance of Terms and Conditions\n            </h1>\n            <p className=\"text-sm sm:text-base text-text-primary/60 dark:text-white/60\">\n              Please read the following information carefully before using this app.\n            </p>\n          </div>\n\n          <div className=\"space-y-4 text-text-primary dark:text-white\">\n            <p className=\"text-sm sm:text-base leading-relaxed\">\n              By selecting \"I Accept,\" you confirm that you have read, understood, and agree to the Terms and Conditions governing the use of this application (\"the App\").\n            </p>\n\n            <div className=\"space-y-4 pt-4 border-t border-border-soft dark:border-dark-border/30\">\n              <h2 className=\"text-lg sm:text-xl font-black text-text-primary dark:text-white\">\n                DISCLAIMER\n              </h2>\n              \n              <div className=\"space-y-3 text-sm sm:text-base leading-relaxed\">\n                <p>\n                  This App is designed for general wellness and informational purposes only. It is <strong>not</strong> a substitute for professional therapy, medical advice, diagnosis, or treatment.\n                </p>\n                \n                <p>\n                  You should always seek help from a licensed therapist, counselor, psychiatrist, or other qualified healthcare provider for mental health concerns.\n                </p>\n                \n                <p>\n                  If you are in crisis or believe you may be in danger, do not use this App as a source of emergency support. Please contact local emergency services or crisis resources immediately.\n                </p>\n              </div>\n\n              <div className=\"bg-bg-primary dark:bg-dark-bg-primary/50 rounded-lg p-4 sm:p-5 space-y-2\">\n                <p className=\"font-bold text-sm sm:text-base\">In the United States:</p>\n                <ul className=\"space-y-2 text-sm sm:text-base list-disc list-inside ml-2\">\n                  <li>Call <strong>911</strong> for emergencies</li>\n                  <li><strong>988 Suicide and Crisis Lifeline</strong>  Dial 988 (24/7, free, confidential)</li>\n                  <li><strong>Crisis Text Line</strong>  Text HOME to 741741</li>\n                  <li><strong>National Domestic Violence Hotline</strong>  1-800-799-SAFE (7233)</li>\n                </ul>\n              </div>\n\n              <p className=\"text-sm sm:text-base leading-relaxed pt-2\">\n                By proceeding, you acknowledge that you understand and agree to these terms and that you accept full responsibility for your use of the App.\n              </p>\n            </div>\n\n            <div className=\"space-y-4 pt-4 border-t border-border-soft dark:border-dark-border/30\">\n              <h2 className=\"text-lg sm:text-xl font-black text-text-primary dark:text-white\">\n                CRISIS DETECTION & SAFETY\n              </h2>\n              \n              <div className=\"space-y-3 text-sm sm:text-base leading-relaxed\">\n                <p>\n                  <strong>This app includes automatic crisis detection</strong> to help protect your safety and wellbeing. The app monitors your journal entries and reflections for language that may indicate you are in crisis or at risk of self-harm.\n                </p>\n                \n                <p>\n                  <strong>If the app detects crisis language, it will:</strong>\n                </p>\n                <ul className=\"list-disc list-inside ml-2 space-y-1\">\n                  <li>Immediately stop normal AI responses</li>\n                  <li>Display crisis resources and emergency contact information</li>\n                  <li>Encourage you to contact professional help or emergency services</li>\n                  <li>Provide direct links to crisis hotlines and support resources</li>\n                </ul>\n\n                <div className=\"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 rounded\">\n                  <p className=\"font-bold text-red-800 dark:text-red-300 mb-2\">\n                     Important Safety Information\n                  </p>\n                  <p className=\"text-red-700 dark:text-red-200 text-sm\">\n                    The app treats <strong>any direct or indirect self-harm language as a crisis trigger</strong>, even if used hypothetically or in a joking manner. This is to ensure your safety. All suicide and self-harm mentions are taken seriously and will trigger immediate crisis guidance.\n                  </p>\n                </div>\n\n                <details className=\"mt-4\">\n                  <summary className=\"cursor-pointer font-bold text-text-primary dark:text-white hover:text-yellow-warm\">\n                    View Crisis Detection Categories (Click to expand)\n                  </summary>\n                  <div className=\"mt-3 space-y-4 pl-4 border-l-2 border-border-soft dark:border-dark-border/30\">\n                    {Array.from(new Set(ALL_CRISIS_PHRASES.map(p => p.category))).map(category => {\n                      const categoryPhrases = ALL_CRISIS_PHRASES.filter(p => p.category === category);\n                      const severity = categoryPhrases[0]?.severity || 'moderate';\n                      return (\n                        <div key={category} className=\"space-y-2\">\n                          <h3 className=\"font-bold text-sm\">\n                            {getCategoryDisplayName(category as CrisisCategory)} \n                            <span className={`ml-2 px-2 py-0.5 rounded text-xs ${\n                              severity === 'critical' ? 'bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300' :\n                              severity === 'high' ? 'bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300' :\n                              'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300'\n                            }`}>\n                              {severity.toUpperCase()}\n                            </span>\n                          </h3>\n                          <p className=\"text-xs text-text-primary/70 dark:text-white/70\">\n                            The app monitors for phrases like: \"{categoryPhrases.slice(0, 3).map(p => p.phrase).join('\", \"')}\" and {categoryPhrases.length - 3 > 0 ? `${categoryPhrases.length - 3} more similar phrases` : 'similar phrases'}.\n                          </p>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </details>\n\n                <p className=\"text-xs text-text-primary/60 dark:text-white/60 italic pt-2\">\n                  These crisis detection phrases are hardcoded into the app and cannot be modified or disabled. This ensures consistent safety monitoring regardless of settings.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"space-y-4 pt-4 border-t border-border-soft dark:border-dark-border/30\">\n            <label className=\"flex items-start gap-3 cursor-pointer group\">\n              <input\n                type=\"checkbox\"\n                checked={readTerms}\n                onChange={(e) => setReadTerms(e.target.checked)}\n                className=\"mt-1 w-5 h-5 rounded border-2 border-text-primary/30 dark:border-white/30 text-yellow-warm focus:ring-2 focus:ring-yellow-warm/50 cursor-pointer\"\n              />\n              <span className=\"text-sm sm:text-base text-text-primary dark:text-white leading-relaxed flex-1\">\n                I have read and understand the Terms and Conditions.\n              </span>\n            </label>\n\n            <label className=\"flex items-start gap-3 cursor-pointer group\">\n              <input\n                type=\"checkbox\"\n                checked={readDisclaimer}\n                onChange={(e) => setReadDisclaimer(e.target.checked)}\n                className=\"mt-1 w-5 h-5 rounded border-2 border-text-primary/30 dark:border-white/30 text-yellow-warm focus:ring-2 focus:ring-yellow-warm/50 cursor-pointer\"\n              />\n              <span className=\"text-sm sm:text-base text-text-primary dark:text-white leading-relaxed flex-1\">\n                I acknowledge this App does not replace professional therapy or emergency resources.\n              </span>\n            </label>\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-4\">\n            <button\n              onClick={onDecline}\n              className=\"flex-1 px-6 py-3 sm:py-4 bg-bg-primary dark:bg-dark-bg-primary/50 text-text-primary dark:text-white rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-80 transition-all border border-border-soft dark:border-dark-border/30\"\n            >\n              Decline\n            </button>\n            <button\n              onClick={onAccept}\n              disabled={!canAccept}\n              className={`flex-1 px-6 py-3 sm:py-4 rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base transition-all ${\n                canAccept\n                  ? 'bg-yellow-warm text-text-primary hover:opacity-90 shadow-lg active:scale-[0.98]'\n                  : 'bg-border-soft dark:bg-dark-bg-primary/30 text-text-tertiary dark:text-white/30 cursor-not-allowed'\n              }`}\n            >\n              Accept\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <style>{`\n        .custom-scrollbar::-webkit-scrollbar { width: 6px; }\n        .custom-scrollbar::-webkit-scrollbar-thumb { \n          background: #cbd5e1; \n          border-radius: 10px; \n        }\n        .dark .custom-scrollbar::-webkit-scrollbar-thumb { \n          background: #4a5568; \n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default TermsAcceptance;\n\n","import React from 'react';\n\ntype View = 'home' | 'values' | 'report' | 'vault' | 'onboarding';\n\ninterface BottomNavigationProps {\n  currentView: View;\n  onViewChange: (view: View) => void;\n}\n\nconst BottomNavigation: React.FC<BottomNavigationProps> = ({ currentView, onViewChange }) => {\n  const tabs = [\n    { id: 'home' as View, label: 'Home', icon: '' },\n    { id: 'values' as View, label: 'Values', icon: '' },\n    { id: 'report' as View, label: 'Reports', icon: '' },\n    { id: 'vault' as View, label: 'Vault', icon: '' }\n  ];\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 bg-white dark:bg-dark-bg-primary border-t border-border-soft dark:border-dark-border shadow-lg z-50 safe-area-inset-bottom\">\n      <div className=\"max-w-4xl mx-auto px-2\">\n        <div className=\"flex items-center justify-around\">\n          {tabs.map((tab) => {\n            const isActive = currentView === tab.id;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => onViewChange(tab.id)}\n                className={`\n                  flex flex-col items-center justify-center py-3 px-4 min-w-[60px] min-h-[60px]\n                  transition-all duration-200\n                  ${isActive \n                    ? 'text-navy-primary dark:text-yellow-warm' \n                    : 'text-text-secondary dark:text-white/60'\n                  }\n                  active:scale-95\n                `}\n                aria-label={tab.label}\n              >\n                <span className=\"text-2xl mb-1\">{tab.icon}</span>\n                <span className={`\n                  text-xs font-medium\n                  ${isActive ? 'font-semibold' : ''}\n                `}>\n                  {tab.label}\n                </span>\n                {isActive && (\n                  <div className=\"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-8 h-1 bg-navy-primary dark:bg-yellow-warm rounded-t-full\" />\n                )}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default BottomNavigation;\n\n","import React from 'react';\nimport { ErrorInfo } from 'react';\n\ninterface ErrorFallbackProps {\n  error: Error | null;\n  errorInfo: ErrorInfo | null;\n  onReset: () => void;\n}\n\nconst ErrorFallback: React.FC<ErrorFallbackProps> = ({ error, errorInfo, onReset }) => {\n  return (\n    <div className=\"min-h-screen bg-bg-primary dark:bg-dark-bg-primary flex items-center justify-center p-4\">\n      <div className=\"bg-white dark:bg-dark-bg-secondary rounded-2xl sm:rounded-3xl border border-border-soft dark:border-dark-border shadow-2xl p-6 sm:p-8 max-w-2xl w-full\">\n        <div className=\"text-center space-y-4 sm:space-y-6\">\n          <div className=\"w-16 h-16 sm:w-20 sm:h-20 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto\">\n            <span className=\"text-3xl sm:text-4xl\"></span>\n          </div>\n          \n          <div>\n            <h1 className=\"text-xl sm:text-2xl font-black text-text-primary dark:text-white mb-2\">\n              Something went wrong\n            </h1>\n            <p className=\"text-text-secondary dark:text-text-secondary text-sm sm:text-base\">\n              We encountered an unexpected error. Don't worry, your data is safe.\n            </p>\n          </div>\n\n          {error && (\n            <div className=\"bg-bg-secondary dark:bg-dark-bg-primary rounded-xl p-4 text-left\">\n              <p className=\"text-xs font-black text-text-primary/60 dark:text-white/60 uppercase tracking-widest mb-2\">\n                Error Details\n              </p>\n              <p className=\"text-xs sm:text-sm text-text-primary dark:text-white font-mono break-all\">\n                {error.message}\n              </p>\n            </div>\n          )}\n\n          <div className=\"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center\">\n            <button\n              onClick={onReset}\n              className=\"px-6 py-3 sm:py-4 bg-navy-primary dark:bg-navy-primary text-white dark:text-white rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-90 active:scale-[0.98] transition-all shadow-lg\"\n            >\n              Try Again\n            </button>\n            <button\n              onClick={() => window.location.reload()}\n              className=\"px-6 py-3 sm:py-4 bg-bg-primary dark:bg-dark-bg-primary/50 text-text-primary dark:text-white rounded-lg sm:rounded-xl font-black uppercase tracking-widest text-sm sm:text-base hover:opacity-80 transition-all border border-border-soft dark:border-dark-border/30\"\n            >\n              Reload Page\n            </button>\n          </div>\n\n          <p className=\"text-xs text-text-tertiary dark:text-text-tertiary\">\n            If this problem persists, please contact support.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ErrorFallback;\n\n","import React, { Component, ErrorInfo, ReactNode } from 'react';\nimport ErrorFallback from './ErrorFallback';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: ErrorInfo | null;\n}\n\nclass ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return {\n      hasError: true,\n      error,\n      errorInfo: null,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n    this.setState({\n      error,\n      errorInfo,\n    });\n  }\n\n  handleReset = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n      return (\n        <ErrorFallback\n          error={this.state.error}\n          errorInfo={this.state.errorInfo}\n          onReset={this.handleReset}\n        />\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n\n","import React from 'react';\n\ninterface SkeletonLoaderProps {\n  className?: string;\n  width?: string;\n  height?: string;\n}\n\nconst SkeletonLoader: React.FC<SkeletonLoaderProps> = ({ \n  className = '', \n  width = '100%', \n  height = '1rem' \n}) => {\n  return (\n    <div\n      className={`animate-pulse bg-bg-tertiary dark:bg-dark-bg-tertiary rounded ${className}`}\n      style={{ width, height }}\n    />\n  );\n};\n\nexport default SkeletonLoader;\n\n","import React from 'react';\nimport SkeletonLoader from './SkeletonLoader';\n\ninterface SkeletonCardProps {\n  lines?: number;\n  showHeader?: boolean;\n  showFooter?: boolean;\n}\n\nconst SkeletonCard: React.FC<SkeletonCardProps> = ({ \n  lines = 3, \n  showHeader = true,\n  showFooter = false \n}) => {\n  return (\n    <div className=\"bg-white dark:bg-dark-bg-secondary rounded-xl sm:rounded-2xl border border-border-soft dark:border-dark-border shadow-sm p-4 sm:p-5 space-y-3\">\n      {showHeader && (\n        <div className=\"space-y-2\">\n          <SkeletonLoader width=\"60%\" height=\"1.25rem\" />\n          <SkeletonLoader width=\"40%\" height=\"0.875rem\" />\n        </div>\n      )}\n      \n      <div className=\"space-y-2\">\n        {Array.from({ length: lines }).map((_, index) => (\n          <SkeletonLoader \n            key={index} \n            width={index === lines - 1 ? '80%' : '100%'} \n            height=\"0.875rem\" \n          />\n        ))}\n      </div>\n      \n      {showFooter && (\n        <div className=\"pt-2\">\n          <SkeletonLoader width=\"30%\" height=\"0.75rem\" />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SkeletonCard;\n\n","import React, { useState, useEffect } from 'react';\n\ninterface BeforeInstallPromptEvent extends Event {\n  prompt: () => Promise<void>;\n  userChoice: Promise<{ outcome: 'accepted' | 'dismissed' }>;\n}\n\nconst PWAInstallPrompt: React.FC = () => {\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\n  const [showPrompt, setShowPrompt] = useState(false);\n  const [isInstalled, setIsInstalled] = useState(false);\n\n  useEffect(() => {\n    // Check if app is already installed\n    if (window.matchMedia('(display-mode: standalone)').matches || (window.navigator as any).standalone) {\n      setIsInstalled(true);\n      return;\n    }\n\n    // Listen for beforeinstallprompt event\n    const handleBeforeInstallPrompt = (e: Event) => {\n      e.preventDefault();\n      setDeferredPrompt(e as BeforeInstallPromptEvent);\n      // Show prompt after a short delay to avoid interrupting initial load\n      setTimeout(() => setShowPrompt(true), 3000);\n    };\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n\n    // Check if user dismissed the prompt before\n    const dismissed = localStorage.getItem('pwa-install-dismissed');\n    if (dismissed) {\n      const dismissedTime = parseInt(dismissed, 10);\n      const daysSinceDismissed = (Date.now() - dismissedTime) / (1000 * 60 * 60 * 24);\n      // Show again after 7 days\n      if (daysSinceDismissed < 7) {\n        setShowPrompt(false);\n      }\n    }\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    };\n  }, []);\n\n  const handleInstallClick = async () => {\n    if (!deferredPrompt) return;\n\n    deferredPrompt.prompt();\n    const { outcome } = await deferredPrompt.userChoice;\n\n    if (outcome === 'accepted') {\n      setIsInstalled(true);\n      setShowPrompt(false);\n    } else {\n      // User dismissed, remember for 7 days\n      localStorage.setItem('pwa-install-dismissed', Date.now().toString());\n      setShowPrompt(false);\n    }\n\n    setDeferredPrompt(null);\n  };\n\n  const handleDismiss = () => {\n    localStorage.setItem('pwa-install-dismissed', Date.now().toString());\n    setShowPrompt(false);\n  };\n\n  // Don't show if already installed or prompt not available\n  if (isInstalled || !showPrompt || !deferredPrompt) {\n    return null;\n  }\n\n  return (\n    <div className=\"fixed bottom-20 left-0 right-0 z-50 px-4 sm:px-6 lg:bottom-4 lg:left-auto lg:right-4 lg:max-w-sm\">\n      <div className=\"bg-white dark:bg-dark-bg-primary border border-border-soft dark:border-dark-border rounded-xl shadow-2xl p-4 sm:p-6 space-y-3\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"flex-shrink-0 w-12 h-12 bg-navy-primary dark:bg-yellow-warm rounded-lg flex items-center justify-center\">\n            <img \n              src=\"/ac-minds-logo.png\" \n              alt=\"AC MINDS\" \n              className=\"w-8 h-8 object-contain\"\n            />\n          </div>\n          <div className=\"flex-1\">\n            <h3 className=\"text-sm font-black text-text-primary dark:text-white mb-1\">\n              Install Grounded\n            </h3>\n            <p className=\"text-xs text-text-secondary dark:text-text-secondary\">\n              Install this app on your device for a better experience. Works offline and loads faster.\n            </p>\n          </div>\n          <button\n            onClick={handleDismiss}\n            className=\"flex-shrink-0 w-6 h-6 flex items-center justify-center text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white\"\n            aria-label=\"Dismiss\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={handleDismiss}\n            className=\"flex-1 px-4 py-2 text-xs font-bold text-text-secondary dark:text-text-secondary hover:text-text-primary dark:hover:text-white border border-border-soft dark:border-dark-border rounded-lg\"\n          >\n            Not Now\n          </button>\n          <button\n            onClick={handleInstallClick}\n            className=\"flex-1 px-4 py-2 bg-navy-primary text-white text-xs font-black uppercase tracking-widest rounded-lg hover:opacity-90\"\n          >\n            Install\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PWAInstallPrompt;\n\n","import React, { useState } from 'react';\n\ninterface FeedbackButtonProps {\n  className?: string;\n}\n\nconst FeedbackButton: React.FC<FeedbackButtonProps> = ({ className = '' }) => {\n  const [showModal, setShowModal] = useState(false);\n  const [selectedEmoji, setSelectedEmoji] = useState<string | null>(null);\n  const [feedback, setFeedback] = useState('');\n  const [submitted, setSubmitted] = useState(false);\n\n  const emojis = [\n    { emoji: '', label: 'Love it' },\n    { emoji: '', label: 'Happy' },\n    { emoji: '', label: 'Neutral' },\n    { emoji: '', label: 'Unhappy' },\n    { emoji: '', label: 'Very unhappy' },\n  ];\n\n  const handleSubmit = () => {\n    if (!selectedEmoji && !feedback.trim()) {\n      return; // At least one required\n    }\n\n    const emojiLabel = emojis.find(e => e.emoji === selectedEmoji)?.label || 'None';\n    const subject = encodeURIComponent('Grounded App Feedback');\n    const body = encodeURIComponent(\n      `Feedback for Grounded App\\n\\n` +\n      `Rating: ${selectedEmoji || 'None'} (${emojiLabel})\\n\\n` +\n      `Feedback:\\n${feedback.trim() || '(No additional feedback provided)'}\\n\\n` +\n      `---\\n` +\n      `App Version: 1.12.25\\n` +\n      `Timestamp: ${new Date().toISOString()}`\n    );\n\n    const mailtoLink = `mailto:ac.minds.ai@gmail.com?subject=${subject}&body=${body}`;\n    window.location.href = mailtoLink;\n\n    setSubmitted(true);\n    setTimeout(() => {\n      setShowModal(false);\n      setSubmitted(false);\n      setSelectedEmoji(null);\n      setFeedback('');\n    }, 2000);\n  };\n\n  return (\n    <>\n      {/* Floating Feedback Button */}\n      <button\n        onClick={() => setShowModal(true)}\n        className={`\n          fixed bottom-20 right-4 sm:bottom-6 sm:right-6\n          w-14 h-14 sm:w-16 sm:h-16\n          bg-navy-primary dark:bg-navy-primary\n          text-white\n          rounded-full\n          shadow-2xl\n          flex items-center justify-center\n          hover:scale-110 active:scale-95\n          transition-all duration-200\n          z-40\n          ${className}\n        `}\n        aria-label=\"Send Feedback\"\n        title=\"Send Feedback\"\n      >\n        <svg className=\"w-6 h-6 sm:w-7 sm:h-7\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z\" />\n        </svg>\n      </button>\n\n      {/* Feedback Modal */}\n      {showModal && (\n        <div \n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-navy-dark/60 backdrop-blur-sm animate-fade-in\"\n          onClick={() => !submitted && setShowModal(false)}\n        >\n          <div \n            className=\"bg-white dark:bg-dark-bg-primary w-full max-w-md rounded-[40px] shadow-2xl overflow-hidden animate-pop relative border border-border-soft dark:border-dark-border\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            {!submitted ? (\n              <>\n                {/* Header */}\n                <div className=\"p-6 border-b border-border-soft dark:border-dark-border flex items-center justify-between\">\n                  <div>\n                    <h2 className=\"text-2xl font-black text-text-primary dark:text-white\">Send Feedback</h2>\n                    <p className=\"text-sm text-text-secondary dark:text-text-secondary mt-1\">\n                      Help us improve Grounded\n                    </p>\n                  </div>\n                  <button\n                    onClick={() => setShowModal(false)}\n                    className=\"w-10 h-10 flex items-center justify-center rounded-full bg-bg-secondary dark:bg-dark-bg-secondary text-text-tertiary dark:text-text-tertiary hover:text-text-primary dark:hover:text-white\"\n                  >\n                    <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                </div>\n\n                {/* Content */}\n                <div className=\"p-6 space-y-6\">\n                  {/* Emoji Selection */}\n                  <div>\n                    <label className=\"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-3 block\">\n                      How do you feel about Grounded?\n                    </label>\n                    <div className=\"flex items-center justify-around gap-2\">\n                      {emojis.map((item) => (\n                        <button\n                          key={item.emoji}\n                          onClick={() => setSelectedEmoji(item.emoji)}\n                          className={`\n                            flex flex-col items-center justify-center\n                            w-16 h-16 sm:w-20 sm:h-20\n                            rounded-2xl\n                            transition-all duration-200\n                            ${selectedEmoji === item.emoji\n                              ? 'bg-yellow-warm dark:bg-yellow-warm scale-110 shadow-lg'\n                              : 'bg-bg-secondary dark:bg-dark-bg-secondary hover:bg-bg-tertiary dark:hover:bg-dark-bg-tertiary'\n                            }\n                            active:scale-95\n                          `}\n                          aria-label={item.label}\n                        >\n                          <span className=\"text-3xl sm:text-4xl mb-1\">{item.emoji}</span>\n                          <span className={`text-[9px] font-semibold ${\n                            selectedEmoji === item.emoji\n                              ? 'text-text-primary dark:text-text-primary'\n                              : 'text-text-secondary dark:text-text-secondary'\n                          }`}>\n                            {item.label}\n                          </span>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Feedback Text */}\n                  <div>\n                    <label className=\"text-xs font-black text-text-primary dark:text-white uppercase tracking-widest mb-3 block\">\n                      Additional Feedback (Optional)\n                    </label>\n                    <textarea\n                      value={feedback}\n                      onChange={(e) => setFeedback(e.target.value)}\n                      placeholder=\"Tell us what you think, what you'd like to see, or any issues you've encountered...\"\n                      className=\"w-full p-4 rounded-2xl bg-bg-secondary dark:bg-dark-bg-secondary border border-border-soft dark:border-dark-border focus:ring-2 focus:ring-navy-primary/30 dark:focus:ring-navy-primary/50 outline-none text-text-primary dark:text-white min-h-[120px] resize-none text-sm\"\n                      maxLength={1000}\n                    />\n                    <p className=\"text-xs text-text-tertiary dark:text-text-tertiary mt-2 text-right\">\n                      {feedback.length}/1000\n                    </p>\n                  </div>\n                </div>\n\n                {/* Footer */}\n                <div className=\"p-6 border-t border-border-soft dark:border-dark-border\">\n                  <button\n                    onClick={handleSubmit}\n                    disabled={!selectedEmoji && !feedback.trim()}\n                    className={`\n                      w-full px-6 py-4 rounded-2xl text-xs font-black uppercase tracking-widest\n                      transition-all\n                      ${selectedEmoji || feedback.trim()\n                        ? 'bg-navy-primary text-white hover:opacity-90 shadow-lg'\n                        : 'bg-bg-secondary dark:bg-dark-bg-secondary text-text-tertiary dark:text-text-tertiary cursor-not-allowed'\n                      }\n                    `}\n                  >\n                    Send Feedback\n                  </button>\n                  <p className=\"text-xs text-text-tertiary dark:text-text-tertiary text-center mt-3\">\n                    Opens your email client to send feedback\n                  </p>\n                </div>\n              </>\n            ) : (\n              /* Success State */\n              <div className=\"p-12 text-center\">\n                <div className=\"w-20 h-20 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <span className=\"text-4xl\"></span>\n                </div>\n                <h3 className=\"text-xl font-black text-text-primary dark:text-white mb-2\">\n                  Thank You!\n                </h3>\n                <p className=\"text-sm text-text-secondary dark:text-text-secondary\">\n                  Your feedback has been prepared. Check your email client to send it.\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default FeedbackButton;\n\n","/**\n * PLATFORM DETECTION & ABSTRACTION\n * \n * Provides platform detection and abstraction for Tauri, Web, and Mobile environments.\n * Allows the app to work seamlessly across different platforms.\n */\n\n/**\n * Detect if running in Tauri environment\n */\nexport function isTauri(): boolean {\n  return typeof window !== 'undefined' && '__TAURI__' in window;\n}\n\n/**\n * Detect if running in web browser\n */\nexport function isWeb(): boolean {\n  return typeof window !== 'undefined' && !isTauri();\n}\n\n/**\n * Detect if running on mobile device\n */\nexport function isMobile(): boolean {\n  if (typeof window === 'undefined') return false;\n  \n  const userAgent = navigator.userAgent || navigator.vendor || (window as any).opera;\n  return /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent.toLowerCase());\n}\n\n/**\n * Detect if running on iOS\n */\nexport function isIOS(): boolean {\n  if (typeof window === 'undefined') return false;\n  return /iPad|iPhone|iPod/.test(navigator.userAgent) && !(window as any).MSStream;\n}\n\n/**\n * Detect if running on Android\n */\nexport function isAndroid(): boolean {\n  if (typeof window === 'undefined') return false;\n  return /Android/.test(navigator.userAgent);\n}\n\n/**\n * Get platform name\n */\nexport function getPlatform(): 'tauri' | 'web' | 'mobile' | 'unknown' {\n  if (isTauri()) return 'tauri';\n  if (isMobile()) return 'mobile';\n  if (isWeb()) return 'web';\n  return 'unknown';\n}\n\n/**\n * Platform-specific feature detection\n */\nexport const PlatformFeatures = {\n  /**\n   * Check if localStorage is available\n   */\n  hasLocalStorage(): boolean {\n    try {\n      if (typeof window === 'undefined') return false;\n      const test = '__localStorage_test__';\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n      return true;\n    } catch {\n      return false;\n    }\n  },\n\n  /**\n   * Check if notifications are available\n   */\n  hasNotifications(): boolean {\n    return typeof window !== 'undefined' && 'Notification' in window;\n  },\n\n  /**\n   * Check if service workers are available\n   */\n  hasServiceWorkers(): boolean {\n    return typeof navigator !== 'undefined' && 'serviceWorker' in navigator;\n  },\n\n  /**\n   * Check if file system access is available (Tauri or File System Access API)\n   */\n  hasFileSystem(): boolean {\n    if (isTauri()) return true;\n    if (typeof window === 'undefined') return false;\n    return 'showOpenFilePicker' in window || 'showSaveFilePicker' in window;\n  },\n\n  /**\n   * Check if haptic feedback is available\n   */\n  hasHaptics(): boolean {\n    if (typeof navigator === 'undefined') return false;\n    return 'vibrate' in navigator;\n  },\n};\n\n","/**\n * STORAGE ABSTRACTION\n * \n * Unified storage interface for Tauri store and browser localStorage.\n * Automatically uses the appropriate storage mechanism based on platform.\n */\n\nimport { isTauri } from './platform';\n\n// Tauri store interface (will be imported when available)\nlet tauriStore: any = null;\n\n/**\n * Initialize storage - loads Tauri store if in Tauri environment\n */\nasync function initStorage(): Promise<void> {\n  if (isTauri()) {\n    try {\n      // Dynamic import to avoid errors in web environment\n      // Use function to prevent bundler from trying to resolve this at build time\n      const getTauriStoreImport = () => '@tauri-apps/plugin-store';\n      const tauriStoreModule = await import(getTauriStoreImport());\n      const { Store } = tauriStoreModule;\n      tauriStore = new Store('.settings.dat');\n    } catch (error) {\n      console.warn('Tauri store not available, falling back to localStorage:', error);\n      tauriStore = null;\n    }\n  }\n}\n\n// Initialize on module load\nlet storageInitialized = false;\nif (typeof window !== 'undefined') {\n  initStorage().then(() => {\n    storageInitialized = true;\n  }).catch(() => {\n    storageInitialized = true; // Continue even if Tauri store fails\n  });\n}\n\n/**\n * Get item from storage\n */\nexport async function getItem<T = string>(key: string): Promise<T | null> {\n  if (!storageInitialized) {\n    await initStorage();\n  }\n\n  try {\n    if (isTauri() && tauriStore) {\n      const value = await tauriStore.get(key);\n      return value as T | null;\n    } else {\n      // Use localStorage\n      const item = localStorage.getItem(key);\n      if (item === null) return null;\n      try {\n        return JSON.parse(item) as T;\n      } catch {\n        return item as T;\n      }\n    }\n  } catch (error) {\n    console.error(`Error getting item ${key}:`, error);\n    // Fallback to localStorage\n    try {\n      const item = localStorage.getItem(key);\n      if (item === null) return null;\n      try {\n        return JSON.parse(item) as T;\n      } catch {\n        return item as T;\n      }\n    } catch {\n      return null;\n    }\n  }\n}\n\n/**\n * Set item in storage\n */\nexport async function setItem<T = string>(key: string, value: T): Promise<void> {\n  if (!storageInitialized) {\n    await initStorage();\n  }\n\n  try {\n    if (isTauri() && tauriStore) {\n      await tauriStore.set(key, value);\n      await tauriStore.save();\n    } else {\n      // Use localStorage\n      const serialized = typeof value === 'string' ? value : JSON.stringify(value);\n      localStorage.setItem(key, serialized);\n    }\n  } catch (error) {\n    console.error(`Error setting item ${key}:`, error);\n    // Fallback to localStorage\n    try {\n      const serialized = typeof value === 'string' ? value : JSON.stringify(value);\n      localStorage.setItem(key, serialized);\n    } catch (fallbackError) {\n      console.error('Fallback storage also failed:', fallbackError);\n    }\n  }\n}\n\n/**\n * Remove item from storage\n */\nexport async function removeItem(key: string): Promise<void> {\n  if (!storageInitialized) {\n    await initStorage();\n  }\n\n  try {\n    if (isTauri() && tauriStore) {\n      await tauriStore.delete(key);\n      await tauriStore.save();\n    } else {\n      localStorage.removeItem(key);\n    }\n  } catch (error) {\n    console.error(`Error removing item ${key}:`, error);\n    // Fallback to localStorage\n    try {\n      localStorage.removeItem(key);\n    } catch (fallbackError) {\n      console.error('Fallback storage removal also failed:', fallbackError);\n    }\n  }\n}\n\n/**\n * Clear all storage\n */\nexport async function clear(): Promise<void> {\n  if (!storageInitialized) {\n    await initStorage();\n  }\n\n  try {\n    if (isTauri() && tauriStore) {\n      await tauriStore.clear();\n      await tauriStore.save();\n    } else {\n      localStorage.clear();\n    }\n  } catch (error) {\n    console.error('Error clearing storage:', error);\n    // Fallback to localStorage\n    try {\n      localStorage.clear();\n    } catch (fallbackError) {\n      console.error('Fallback storage clear also failed:', fallbackError);\n    }\n  }\n}\n\n/**\n * Get all keys from storage\n */\nexport async function keys(): Promise<string[]> {\n  if (!storageInitialized) {\n    await initStorage();\n  }\n\n  try {\n    if (isTauri() && tauriStore) {\n      return await tauriStore.keys();\n    } else {\n      return Object.keys(localStorage);\n    }\n  } catch (error) {\n    console.error('Error getting storage keys:', error);\n    // Fallback to localStorage\n    try {\n      return Object.keys(localStorage);\n    } catch {\n      return [];\n    }\n  }\n}\n\n/**\n * Synchronous getItem for compatibility (uses localStorage only)\n * Use this only when you need synchronous access and are sure you're in web mode\n */\nexport function getItemSync<T = string>(key: string): T | null {\n  try {\n    const item = localStorage.getItem(key);\n    if (item === null) return null;\n    try {\n      return JSON.parse(item) as T;\n    } catch {\n      return item as T;\n    }\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Synchronous setItem for compatibility (uses localStorage only)\n * Use this only when you need synchronous access and are sure you're in web mode\n */\nexport function setItemSync<T = string>(key: string, value: T): void {\n  try {\n    const serialized = typeof value === 'string' ? value : JSON.stringify(value);\n    localStorage.setItem(key, serialized);\n  } catch (error) {\n    console.error(`Error setting item ${key} synchronously:`, error);\n  }\n}\n\n","/**\n * NOTIFICATIONS ABSTRACTION\n * \n * Unified notifications interface for Tauri and browser notifications.\n * Automatically uses the appropriate notification mechanism based on platform.\n */\n\nimport { isTauri } from './platform';\n\n/**\n * Request notification permission\n */\nexport async function requestPermission(): Promise<NotificationPermission> {\n  if (typeof window === 'undefined' || !('Notification' in window)) {\n    return 'denied';\n  }\n\n  if (isTauri()) {\n    // In Tauri, we can use the notification plugin\n    // For now, fall back to browser notifications\n    try {\n      if (Notification.permission === 'default') {\n        return await Notification.requestPermission();\n      }\n      return Notification.permission;\n    } catch (error) {\n      console.error('Error requesting notification permission:', error);\n      return 'denied';\n    }\n  } else {\n    // Browser notifications\n    if (Notification.permission === 'default') {\n      return await Notification.requestPermission();\n    }\n    return Notification.permission;\n  }\n}\n\n/**\n * Check if notifications are permitted\n */\nexport function hasPermission(): boolean {\n  if (typeof window === 'undefined' || !('Notification' in window)) {\n    return false;\n  }\n  return Notification.permission === 'granted';\n}\n\n/**\n * Send a notification\n */\nexport async function sendNotification(\n  title: string,\n  options?: NotificationOptions\n): Promise<void> {\n  if (!hasPermission()) {\n    const permission = await requestPermission();\n    if (permission !== 'granted') {\n      console.warn('Notification permission not granted');\n      return;\n    }\n  }\n\n  try {\n    if (isTauri()) {\n      // Use Tauri notification plugin if available\n      try {\n        // Use function to prevent bundler from trying to resolve this at build time\n        const getTauriNotifyImport = () => '@tauri-apps/plugin-notification';\n        const tauriNotifyModule = await import(getTauriNotifyImport());\n        const { sendNotification: tauriNotify } = tauriNotifyModule;\n        await tauriNotify({\n          title,\n          body: options?.body || '',\n          icon: options?.icon,\n        });\n      } catch (error) {\n        // Fallback to browser notifications\n        console.warn('Tauri notification plugin not available, using browser notifications:', error);\n        new Notification(title, options);\n      }\n    } else {\n      // Browser notifications\n      new Notification(title, options);\n    }\n  } catch (error) {\n    console.error('Error sending notification:', error);\n  }\n}\n\n/**\n * Notification options interface\n */\nexport interface NotificationOptions {\n  body?: string;\n  icon?: string;\n  badge?: string;\n  tag?: string;\n  data?: any;\n  requireInteraction?: boolean;\n  silent?: boolean;\n  timestamp?: number;\n  vibrate?: number[];\n}\n\n","import React from 'react';\n\nexport type ProgressStatus = 'loading' | 'success' | 'error' | 'idle';\n\nexport interface ProgressBarProps {\n  progress: number; // 0-100\n  status?: ProgressStatus;\n  label?: string;\n  showPercentage?: boolean;\n  className?: string;\n  height?: 'sm' | 'md' | 'lg';\n}\n\nconst ProgressBar: React.FC<ProgressBarProps> = ({\n  progress,\n  status = 'loading',\n  label,\n  showPercentage = true,\n  className = '',\n  height = 'md',\n}) => {\n  const clampedProgress = Math.max(0, Math.min(100, progress));\n  \n  const heightClasses = {\n    sm: 'h-1',\n    md: 'h-2',\n    lg: 'h-3',\n  };\n\n  const getStatusColor = () => {\n    switch (status) {\n      case 'success':\n        return 'bg-green-500 dark:bg-green-400';\n      case 'error':\n        return 'bg-red-500 dark:bg-red-400';\n      case 'loading':\n        return 'bg-navy-primary dark:bg-navy-primary';\n      default:\n        return 'bg-gray-400 dark:bg-gray-500';\n    }\n  };\n\n  const getStatusBg = () => {\n    switch (status) {\n      case 'success':\n        return 'bg-green-50 dark:bg-green-900/20';\n      case 'error':\n        return 'bg-red-50 dark:bg-red-900/20';\n      case 'loading':\n        return 'bg-bg-secondary dark:bg-dark-bg-secondary';\n      default:\n        return 'bg-bg-secondary dark:bg-dark-bg-secondary';\n    }\n  };\n\n  const getStatusIcon = () => {\n    switch (status) {\n      case 'success':\n        return (\n          <svg className=\"w-5 h-5 text-green-500 dark:text-green-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\n          </svg>\n        );\n      case 'error':\n        return (\n          <svg className=\"w-5 h-5 text-red-500 dark:text-red-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        );\n      case 'loading':\n        return (\n          <svg className=\"w-5 h-5 text-navy-primary dark:text-navy-primary animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className={`w-full ${className}`}>\n      {(label || showPercentage) && (\n        <div className=\"flex items-center justify-between mb-2\">\n          {label && (\n            <span className=\"text-xs font-semibold text-text-primary dark:text-white\">\n              {label}\n            </span>\n          )}\n          {showPercentage && (\n            <span className={`text-xs font-bold ${\n              status === 'success' ? 'text-green-600 dark:text-green-400' :\n              status === 'error' ? 'text-red-600 dark:text-red-400' :\n              'text-text-primary dark:text-white'\n            }`}>\n              {status === 'success' ? 'Complete' : status === 'error' ? 'Failed' : `${Math.round(clampedProgress)}%`}\n            </span>\n          )}\n        </div>\n      )}\n      \n      <div className={`relative w-full ${heightClasses[height]} ${getStatusBg()} rounded-full overflow-hidden`}>\n        <div\n          className={`absolute top-0 left-0 ${heightClasses[height]} ${getStatusColor()} rounded-full transition-all duration-300 ease-out ${\n            status === 'loading' ? 'animate-pulse' : ''\n          }`}\n          style={{ width: `${clampedProgress}%` }}\n        />\n        \n        {/* Shimmer effect for loading */}\n        {status === 'loading' && clampedProgress > 0 && clampedProgress < 100 && (\n          <div className=\"absolute top-0 left-0 w-full h-full overflow-hidden rounded-full\">\n            <div className=\"h-full w-1/3 bg-white/30 dark:bg-white/20 animate-shimmer\" />\n          </div>\n        )}\n      </div>\n      \n      {/* Status icon */}\n      {status !== 'idle' && (\n        <div className=\"flex items-center justify-center mt-2\">\n          {getStatusIcon()}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProgressBar;\n\n","\nimport React, { useState, useEffect, Suspense, lazy } from 'react';\nimport { ALL_VALUES } from './constants';\nimport { ValueItem, LogEntry, Goal, AppSettings, LCSWConfig } from './types';\nimport ValueSelection from './components/ValueSelection';\nimport HelpOverlay from './components/HelpOverlay';\nimport ThemeToggle from './components/ThemeToggle';\nimport Login from './components/Login';\nimport TermsAcceptance from './components/TermsAcceptance';\nimport BottomNavigation from './components/BottomNavigation';\nimport ErrorBoundary from './components/ErrorBoundary';\nimport SkeletonCard from './components/SkeletonCard';\nimport PWAInstallPrompt from './components/PWAInstallPrompt';\nimport FeedbackButton from './components/FeedbackButton';\n\n// Code splitting: Lazy load heavy components\nconst Dashboard = lazy(() => import('./components/Dashboard'));\nconst ReportView = lazy(() => import('./components/ReportView'));\nconst VaultControl = lazy(() => import('./components/VaultControl'));\nconst LCSWConfigComponent = lazy(() => import('./components/LCSWConfig'));\nimport { preloadModels, initializeModels, setSelectedModel } from './services/aiService';\nimport { dbService } from './services/database';\nimport { isLoggedIn, getCurrentUser, acceptTerms, logoutUser } from './services/authService';\nimport { getItemSync, setItemSync } from './services/storage';\nimport { hasPermission, sendNotification } from './services/notifications';\nimport { initializeDebugLogging } from './services/debugLog';\nimport { subscribeToProgress } from './services/progressTracker';\nimport ProgressBar from './components/ProgressBar';\n\n// Simple persistence helper using storage abstraction\nconst useLocalStorage = <T,>(key: string, initialValue: T): [T, React.Dispatch<React.SetStateAction<T>>] => {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    try {\n      const item = getItemSync<T>(key);\n      return item !== null ? item : initialValue;\n    } catch (error) {\n      console.error(error);\n      return initialValue;\n    }\n  });\n\n  useEffect(() => {\n    try {\n      setItemSync(key, storedValue);\n    } catch (error) {\n      console.error(error);\n    }\n  }, [key, storedValue]);\n\n  return [storedValue, setStoredValue];\n};\n\nconst App: React.FC = () => {\n  const [authState, setAuthState] = useState<'checking' | 'login' | 'terms' | 'app'>('checking');\n  const [userId, setUserId] = useState<string | null>(null);\n  const [selectedValueIds, setSelectedValueIds] = useState<string[]>([]);\n  const [logs, setLogs] = useState<LogEntry[]>([]);\n  const [goals, setGoals] = useState<Goal[]>([]);\n  const [settings, setSettings] = useState<AppSettings>({\n    reminders: { enabled: false, frequency: 'daily', time: '09:00' }\n  });\n  const [view, setView] = useState<'onboarding' | 'home' | 'report' | 'values' | 'vault'>('onboarding');\n  const [showHelp, setShowHelp] = useState(false);\n  const [showLCSWConfig, setShowLCSWConfig] = useState(false);\n\n  // Initialize database and check auth state\n  useEffect(() => {\n    let isMounted = true; // Prevent state updates if component unmounts\n    let cleanupInterval: NodeJS.Timeout | null = null;\n    \n    const initialize = async () => {\n      try {\n        // Initialize debug logging first\n        initializeDebugLogging();\n        \n        // Start AI model download immediately - don't wait for anything\n        // This ensures models are downloading while user is reading terms/login\n        preloadModels().catch(() => {\n          // Silently fail - models will retry later\n        });\n        \n        await dbService.init();\n        \n        // Cleanup expired tokens on startup\n        dbService.cleanupExpiredTokens().catch(console.error);\n        \n        // Set up cleanup interval\n        cleanupInterval = setInterval(() => {\n          dbService.cleanupExpiredTokens().catch(console.error);\n        }, 60 * 60 * 1000); // Every hour\n        \n        if (!isMounted) return;\n        \n        if (isLoggedIn()) {\n          const user = await getCurrentUser();\n          if (!isMounted) return;\n          \n          if (user) {\n            setUserId(user.id);\n            \n            // Load app data from database\n            const appData = await dbService.getAppData(user.id);\n            if (!isMounted) return;\n            \n            if (appData) {\n              setSelectedValueIds(appData.values || []);\n              setLogs(appData.logs || []);\n              setGoals(appData.goals || []);\n              // Ensure settings.reminders.frequency exists (migration for old data)\n              const loadedSettings = appData.settings || { reminders: { enabled: false, frequency: 'daily', time: '09:00' } };\n              if (loadedSettings.reminders && !loadedSettings.reminders.frequency) {\n                loadedSettings.reminders.frequency = 'daily';\n              }\n              // Set default AI model if not set (TinyLlama for healthcare/psychology)\n              if (!loadedSettings.aiModel) {\n                loadedSettings.aiModel = 'tinyllama';\n              }\n              setSettings(loadedSettings);\n              \n              // Initialize models with the selected model from settings\n              if (loadedSettings.aiModel) {\n                setSelectedModel(loadedSettings.aiModel);\n                initializeModels(false, loadedSettings.aiModel).catch(() => {\n                  // Silently fail - models will retry later\n                });\n              }\n            }\n            \n            // Check if terms are accepted\n            if (user.termsAccepted) {\n              setAuthState('app');\n            } else {\n              setAuthState('terms');\n            }\n          } else {\n            setAuthState('login');\n          }\n        } else {\n          setAuthState('login');\n        }\n      } catch (error) {\n        console.error('Initialization error:', error);\n        if (isMounted) {\n          setAuthState('login');\n        }\n      }\n    };\n    \n    initialize();\n    \n    return () => {\n      isMounted = false;\n      if (cleanupInterval) {\n        clearInterval(cleanupInterval);\n      }\n    };\n  }, []);\n\n  // Save app data to database whenever it changes\n  useEffect(() => {\n    if (userId && authState === 'app') {\n      const saveData = async () => {\n        try {\n          await dbService.saveAppData(userId, {\n            settings,\n            logs,\n            goals,\n            values: selectedValueIds,\n            lcswConfig: settings.lcswConfig,\n          });\n        } catch (error) {\n          console.error('Error saving app data:', error);\n        }\n      };\n      \n      // Debounce saves\n      const timeoutId = setTimeout(saveData, 500);\n      return () => clearTimeout(timeoutId);\n    }\n  }, [userId, settings, logs, goals, selectedValueIds, authState]);\n\n  // Preload AI models in the background - retry mechanism\n  // Models start loading immediately in initialize() above\n  // This effect handles retries when auth state changes\n  useEffect(() => {\n    if (authState === 'app') {\n      // User is in the app - ensure models are ready\n      // Models may already be loading from initialize(), but retry if needed\n      const retryTimer = setTimeout(() => {\n        preloadModels().catch(() => {\n          // Silently fail - models may already be loading\n        });\n      }, 1000); // Short delay to avoid duplicate loads\n      \n      return () => clearTimeout(retryTimer);\n    }\n  }, [authState]);\n\n  // Reminder Heartbeat - supports Hourly, Daily, Weekly, Monthly\n  useEffect(() => {\n    if (!settings.reminders.enabled) return;\n\n    const checkReminders = () => {\n      const now = new Date();\n      const currentHour = now.getHours();\n      const currentMin = now.getMinutes();\n      const currentTime = `${currentHour.toString().padStart(2, '0')}:${currentMin.toString().padStart(2, '0')}`;\n      const today = now.toISOString().split('T')[0];\n      const currentDay = now.getDay(); // 0 = Sunday, 6 = Saturday\n      const currentDate = now.getDate(); // 1-31\n\n      if (!hasPermission()) return;\n\n      // Get the top value (North Star) from selected values\n      const topValue = selectedValueIds.length > 0 \n        ? ALL_VALUES.find(v => v.id === selectedValueIds[0])?.name || 'your values'\n        : 'your values';\n      let shouldNotify = false;\n      let notificationBody = \"\";\n\n      // Ensure frequency has a valid default value\n      const frequency = settings.reminders.frequency || 'daily';\n      \n      switch (frequency) {\n        case 'hourly':\n          // Hourly: 8 AM to 8 PM only, check every minute at :00\n          if (currentHour >= 8 && currentHour < 20 && currentMin === 0 && settings.reminders.lastNotifiedHour !== currentHour) {\n            shouldNotify = true;\n            notificationBody = ` Hourly Pulse: Are your actions right now aligned with your North Star (${topValue})?`;\n          }\n          break;\n        \n        case 'daily':\n          // Daily: At specified time (check within 1 minute window)\n          const [targetHour, targetMin] = settings.reminders.time.split(':').map(Number);\n          if (currentHour === targetHour && currentMin === targetMin && settings.reminders.lastNotifiedDay !== today) {\n            shouldNotify = true;\n            notificationBody = ` Time for your daily Grounded check-in. Your North Star is ${topValue}.`;\n          }\n          break;\n        \n        case 'weekly':\n          // Weekly: On specified day at specified time\n          const targetDay = settings.reminders.dayOfWeek ?? 0;\n          const [weeklyHour, weeklyMin] = settings.reminders.time.split(':').map(Number);\n          if (currentDay === targetDay && currentHour === weeklyHour && currentMin === weeklyMin && settings.reminders.lastNotifiedWeek !== today) {\n            shouldNotify = true;\n            notificationBody = ` Weekly Reflection: Time to check in with your North Star (${topValue}).`;\n          }\n          break;\n        \n        case 'monthly':\n          // Monthly: On specified day of month at specified time\n          const targetDate = settings.reminders.dayOfMonth ?? 1;\n          const [monthlyHour, monthlyMin] = settings.reminders.time.split(':').map(Number);\n          if (currentDate === targetDate && currentHour === monthlyHour && currentMin === monthlyMin && settings.reminders.lastNotifiedMonth !== today) {\n            shouldNotify = true;\n            notificationBody = ` Monthly Reflection: Time to reflect on your North Star (${topValue}).`;\n          }\n          break;\n        \n        default:\n          // Fallback to daily if frequency is invalid or undefined\n          const [defaultHour, defaultMin] = settings.reminders.time.split(':').map(Number);\n          if (currentHour === defaultHour && currentMin === defaultMin && settings.reminders.lastNotifiedDay !== today) {\n            shouldNotify = true;\n            notificationBody = ` Time for your daily Grounded check-in. Your North Star is ${topValue}.`;\n          }\n          break;\n      }\n\n      if (shouldNotify) {\n        // Send notification using abstraction\n        sendNotification('Grounded', {\n          body: notificationBody,\n          icon: '/favicon.ico'\n        }).catch(err => {\n          console.error('Failed to send notification:', err);\n        });\n        \n        // Ntfy.sh push notification (if enabled)\n        if (settings.reminders.useNtfyPush && settings.reminders.ntfyTopic) {\n          import('./services/ntfyService').then(({ sendNtfyNotification }) => {\n            sendNtfyNotification(\n              notificationBody,\n              'Grounded Reminder',\n              {\n                topic: settings.reminders.ntfyTopic,\n                server: settings.reminders.ntfyServer\n              }\n            ).catch(err => {\n              console.error('Failed to send ntfy notification:', err);\n            });\n          });\n        }\n        \n        // Calendar event (if enabled)\n        if (settings.reminders.useDeviceCalendar && frequency !== 'hourly') {\n          const [hours, minutes] = settings.reminders.time.split(':').map(Number);\n          const eventDate = new Date();\n          eventDate.setHours(hours, minutes, 0, 0);\n          \n          // Create calendar event URL\n          const calendarTitle = encodeURIComponent(`Grounded ${frequency.charAt(0).toUpperCase() + frequency.slice(1)} Check-in`);\n          const calendarDescription = encodeURIComponent(notificationBody);\n          const googleCalendarUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${calendarTitle}&details=${calendarDescription}&dates=${eventDate.toISOString().replace(/[-:]|\\.\\d{3}/g, '')}/${new Date(eventDate.getTime() + 30 * 60 * 1000).toISOString().replace(/[-:]|\\.\\d{3}/g, '')}`;\n          \n          // Only open if we haven't created an event for this reminder yet\n          if (!settings.reminders.calendarEventId) {\n            window.open(googleCalendarUrl, '_blank');\n            setSettings(prev => ({\n              ...prev,\n              reminders: { ...prev.reminders, calendarEventId: Date.now().toString() }\n            }));\n          }\n        }\n        \n        // Update last notified timestamp to prevent duplicates\n        const updateData: Partial<AppSettings['reminders']> = {};\n        if (frequency === 'hourly') {\n          updateData.lastNotifiedHour = currentHour;\n        } else if (frequency === 'daily') {\n          updateData.lastNotifiedDay = today;\n        } else if (frequency === 'weekly') {\n          updateData.lastNotifiedWeek = today;\n        } else if (frequency === 'monthly') {\n          updateData.lastNotifiedMonth = today;\n        }\n        \n        setSettings(prev => ({\n          ...prev,\n          reminders: { \n            ...prev.reminders,\n            ...updateData\n          }\n        }));\n      }\n    };\n\n    // Check every minute for accurate timing (especially for hourly reminders)\n    const interval = setInterval(checkReminders, 60000); // Check every minute\n    checkReminders(); // Check immediately on mount/enable\n\n    return () => clearInterval(interval);\n  }, [settings.reminders, selectedValueIds]);\n\n  // Determine initial view based on data\n  useEffect(() => {\n    if (authState === 'app' && selectedValueIds.length > 0 && view === 'onboarding') {\n      setView('home');\n    }\n  }, [selectedValueIds, view, authState]);\n\n  const handleLogin = async (loggedInUserId: string) => {\n    setUserId(loggedInUserId);\n    const user = await getCurrentUser();\n    if (user) {\n      if (user.termsAccepted) {\n        // Load app data\n        const appData = await dbService.getAppData(loggedInUserId);\n        if (appData) {\n          setSelectedValueIds(appData.values || []);\n          setLogs(appData.logs || []);\n          setGoals(appData.goals || []);\n          // Ensure settings.reminders.frequency exists (migration for old data)\n          const loadedSettings = appData.settings || { reminders: { enabled: false, frequency: 'daily', time: '09:00' } };\n          if (loadedSettings.reminders && !loadedSettings.reminders.frequency) {\n            loadedSettings.reminders.frequency = 'daily';\n          }\n          setSettings(loadedSettings);\n        }\n        setAuthState('app');\n      } else {\n        setAuthState('terms');\n      }\n    }\n  };\n\n  const handleAcceptTerms = async () => {\n    if (userId) {\n      await acceptTerms(userId);\n      setAuthState('app');\n      \n      // User has committed to using the app - ensure models are loading\n      // This is a good time to start/retry model loading if not already started\n      preloadModels().catch(() => {\n        // Silently fail - models may already be loading or will retry\n      });\n    }\n  };\n\n  const handleDeclineTerms = () => {\n    logoutUser();\n    setAuthState('login');\n    setUserId(null);\n  };\n\n  const handleLogout = () => {\n    logoutUser();\n    setAuthState('login');\n    setUserId(null);\n    setSelectedValueIds([]);\n    setLogs([]);\n    setGoals([]);\n    setSettings({ reminders: { enabled: false, frequency: 'daily', time: '09:00' } });\n    setView('onboarding');\n  };\n\n  const handleSelectionComplete = (ids: string[]) => {\n    setSelectedValueIds(ids);\n    setView('home');\n  };\n\n  const handleLogEntry = (entry: LogEntry) => {\n    setLogs(prev => [entry, ...prev]);\n  };\n\n  const handleUpdateGoals = (updatedGoals: Goal[]) => {\n    setGoals(updatedGoals);\n  };\n\n  const handleClearData = () => {\n    setLogs([]);\n    setSelectedValueIds([]);\n    setGoals([]);\n    setSettings({ reminders: { enabled: false, frequency: 'daily', time: '09:00' } });\n    setView('onboarding');\n  };\n\n  const selectedValues = selectedValueIds\n    .map(id => ALL_VALUES.find(v => v.id === id))\n    .filter(Boolean) as ValueItem[];\n\n  const showNav = selectedValueIds.length > 0 && view !== 'onboarding';\n\n  // Progress state for loading screen\n  const [progressState, setProgressState] = useState({ progress: 0, status: 'idle' as const, label: 'Initializing...', details: '' });\n\n  // Subscribe to progress updates\n  useEffect(() => {\n    // #region agent log\n    fetch('http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'App.tsx:454',message:'Progress subscription setup',data:{initialState:progressState},timestamp:Date.now(),sessionId:'debug-session',runId:'post-fix',hypothesisId:'A'})}).catch(()=>{});\n    // #endregion\n    let isFirstCallback = true;\n    const unsubscribe = subscribeToProgress((state) => {\n      // #region agent log\n      fetch('http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'App.tsx:457',message:'Progress callback invoked',data:{receivedStatus:state.status,receivedLabel:state.label,receivedProgress:state.progress,isFirstCallback,willTransform:state.status==='idle'},timestamp:Date.now(),sessionId:'debug-session',runId:'post-fix',hypothesisId:'A'})}).catch(()=>{});\n      // #endregion\n      // Skip transformation on first callback if it's idle with empty label (preserve initial \"Initializing...\" state)\n      if (isFirstCallback && state.status === 'idle' && !state.label) {\n        // #region agent log\n        fetch('http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'App.tsx:461',message:'Skipping first idle callback to preserve initial state',data:{preservedLabel:'Initializing...'},timestamp:Date.now(),sessionId:'debug-session',runId:'post-fix',hypothesisId:'A'})}).catch(()=>{});\n        // #endregion\n        isFirstCallback = false;\n        return; // Preserve initial state\n      }\n      isFirstCallback = false;\n      const transformedStatus = state.status === 'idle' ? 'loading' : state.status;\n      // #region agent log\n      fetch('http://127.0.0.1:7245/ingest/7d9ee931-8dee-46f8-918b-e417134eb58f',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'App.tsx:468',message:'State transformation result',data:{originalStatus:state.status,transformedStatus,newLabel:state.label||'Loading...'},timestamp:Date.now(),sessionId:'debug-session',runId:'post-fix',hypothesisId:'A'})}).catch(()=>{});\n      // #endregion\n      setProgressState({\n        progress: state.progress,\n        status: transformedStatus,\n        label: state.label || 'Loading...',\n        details: state.details || '',\n      });\n    });\n    return unsubscribe;\n  }, []);\n\n  // Show loading state while checking auth\n  if (authState === 'checking') {\n    return (\n      <div className=\"min-h-screen bg-bg-primary dark:bg-dark-bg-primary flex items-center justify-center p-4\">\n        <div className=\"text-center space-y-6 w-full max-w-md\">\n          <img \n            src=\"/ac-minds-logo.png\" \n            alt=\"AC MINDS\" \n            className=\"w-20 h-20 object-contain mx-auto\"\n          />\n          <div className=\"space-y-4\">\n            <h2 className=\"text-xl font-black text-text-primary dark:text-white\">\n              {progressState.label}\n            </h2>\n            {progressState.details && (\n              <p className=\"text-sm text-text-secondary dark:text-text-secondary\">\n                {progressState.details}\n              </p>\n            )}\n            <ProgressBar\n              progress={progressState.progress}\n              status={progressState.status}\n              showPercentage={true}\n              height=\"lg\"\n              className=\"mt-4\"\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Show login screen\n  if (authState === 'login') {\n    return <Login onLogin={handleLogin} />;\n  }\n\n  // Show terms acceptance\n  if (authState === 'terms') {\n    return <TermsAcceptance onAccept={handleAcceptTerms} onDecline={handleDeclineTerms} />;\n  }\n\n  return (\n    <ErrorBoundary>\n      <div className=\"min-h-screen bg-bg-primary dark:bg-dark-bg-primary text-text-primary dark:text-white flex flex-col transition-colors duration-300\">\n        <header className=\"bg-white dark:bg-dark-bg-primary border-b border-border-soft dark:border-dark-border sticky top-0 z-40 shadow-sm dark:shadow-lg\">\n        <div className=\"max-w-4xl mx-auto px-3 sm:px-4 h-14 flex items-center justify-between\">\n          <div className=\"flex items-center space-x-2\">\n            <img \n              src=\"/ac-minds-logo.png\" \n              alt=\"AC MINDS\" \n              className=\"w-7 h-7 object-contain\"\n            />\n            <span className=\"font-bold text-base sm:text-lg tracking-tight text-text-primary dark:text-white hidden sm:inline\">Grounded</span>\n          </div>\n          <div className=\"flex items-center space-x-1.5 sm:space-x-2\">\n            {/* Top navigation kept for desktop, bottom nav for mobile */}\n            {showNav && (\n              <nav className=\"hidden lg:flex items-center space-x-0.5 sm:space-x-1\">\n                <button \n                  onClick={() => setView('home')}\n                  className={`px-2 sm:px-3 py-1.5 rounded-lg text-[10px] sm:text-xs font-bold transition-colors ${view === 'home' ? 'bg-yellow-warm/20 dark:bg-yellow-warm/30 text-yellow-warm dark:text-yellow-warm' : 'text-text-secondary dark:text-text-secondary hover:text-text-primary dark:hover:text-white hover:bg-bg-secondary dark:hover:bg-dark-bg-secondary'}`}\n                >\n                  <span className=\"hidden sm:inline\">Home</span>\n                  <span className=\"sm:hidden\">H</span>\n                </button>\n                <button \n                  onClick={() => setView('values')}\n                  className={`px-2 sm:px-3 py-1.5 rounded-lg text-[10px] sm:text-xs font-bold transition-colors ${view === 'values' ? 'bg-yellow-warm/20 dark:bg-yellow-warm/30 text-yellow-warm dark:text-yellow-warm' : 'text-text-secondary dark:text-text-secondary hover:text-text-primary dark:hover:text-white hover:bg-bg-secondary dark:hover:bg-dark-bg-secondary'}`}\n                >\n                  <span className=\"hidden sm:inline\">Values</span>\n                  <span className=\"sm:hidden\">V</span>\n                </button>\n                <button \n                  onClick={() => setView('report')}\n                  className={`px-2 sm:px-3 py-1.5 rounded-lg text-[10px] sm:text-xs font-bold transition-colors ${view === 'report' ? 'bg-yellow-warm/20 dark:bg-yellow-warm/30 text-yellow-warm dark:text-yellow-warm' : 'text-text-secondary dark:text-text-secondary hover:text-text-primary dark:hover:text-white hover:bg-bg-secondary dark:hover:bg-dark-bg-secondary'}`}\n                >\n                  <span className=\"hidden sm:inline\">Reports</span>\n                  <span className=\"sm:hidden\">R</span>\n                </button>\n                <button \n                  onClick={() => setView('vault')}\n                  className={`px-2 sm:px-3 py-1.5 rounded-lg text-[10px] sm:text-xs font-bold transition-colors ${view === 'vault' ? 'bg-yellow-warm/20 dark:bg-yellow-warm/30 text-yellow-warm dark:text-yellow-warm' : 'text-text-secondary dark:text-text-secondary hover:text-text-primary dark:hover:text-white hover:bg-bg-secondary dark:hover:bg-dark-bg-secondary'}`}\n                >\n                  <span className=\"hidden sm:inline\">Vault</span>\n                  <span className=\"sm:hidden\">V</span>\n                </button>\n              </nav>\n            )}\n            {showNav && (\n              <button \n                onClick={() => setShowLCSWConfig(true)}\n                className=\"w-8 h-8 flex items-center justify-center rounded-full text-text-secondary dark:text-text-secondary hover:text-yellow-warm dark:hover:text-yellow-warm hover:bg-yellow-warm/10 dark:hover:bg-yellow-warm/20 transition-all\"\n                aria-label=\"Configuration\"\n                title=\"Configuration\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" /><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" /></svg>\n              </button>\n            )}\n            <ThemeToggle />\n            <button \n              onClick={() => setShowHelp(true)}\n              className=\"w-8 h-8 flex items-center justify-center rounded-full text-text-secondary dark:text-text-secondary hover:text-yellow-warm dark:hover:text-yellow-warm hover:bg-yellow-warm/10 dark:hover:bg-yellow-warm/20 transition-all\"\n              aria-label=\"Help\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2.5} d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n            </button>\n            <button \n              onClick={handleLogout}\n              className=\"w-8 h-8 flex items-center justify-center rounded-full text-text-secondary dark:text-text-secondary hover:text-red-500 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all\"\n              aria-label=\"Logout\"\n              title=\"Logout\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" /></svg>\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"flex-grow max-w-4xl w-full mx-auto px-3 sm:px-4 py-4 sm:py-6 pb-24 lg:pb-6\">\n        {view === 'onboarding' && (\n          <ValueSelection \n            initialSelected={selectedValueIds} \n            onComplete={handleSelectionComplete} \n          />\n        )}\n        \n        {view === 'values' && (\n          <ValueSelection \n            initialSelected={selectedValueIds} \n            onComplete={handleSelectionComplete} \n          />\n        )}\n        \n        {view === 'home' && (\n          <Suspense fallback={<SkeletonCard lines={5} showHeader={true} />}>\n            <Dashboard \n              values={selectedValues} \n              onLog={handleLogEntry}\n              goals={goals}\n              onUpdateGoals={handleUpdateGoals}\n              logs={logs}\n              lcswConfig={settings.lcswConfig}\n              onNavigate={(view) => setView(view)}\n            />\n          </Suspense>\n        )}\n\n        {view === 'report' && (\n          <Suspense fallback={<SkeletonCard lines={5} showHeader={true} />}>\n            <ReportView \n              logs={logs} \n              values={selectedValues} \n              lcswConfig={settings.lcswConfig}\n            />\n          </Suspense>\n        )}\n\n        {view === 'vault' && (\n          <Suspense fallback={<SkeletonCard lines={5} showHeader={true} />}>\n            <VaultControl\n              logs={logs}\n              goals={goals}\n              settings={settings}\n              onUpdateSettings={setSettings}\n              onClearData={handleClearData}\n              selectedValueIds={selectedValueIds}\n            />\n          </Suspense>\n        )}\n      </main>\n\n      {/* Bottom Navigation - Mobile First */}\n      {showNav && (\n        <BottomNavigation\n          currentView={view}\n          onViewChange={(newView) => setView(newView)}\n        />\n      )}\n\n      {showHelp && <HelpOverlay onClose={() => setShowHelp(false)} />}\n\n      <PWAInstallPrompt />\n\n      {/* Feedback Button - Always accessible when user is in the app */}\n      {authState === 'app' && <FeedbackButton />}\n\n      {showLCSWConfig && (\n        <Suspense fallback={<SkeletonCard lines={5} showHeader={true} />}>\n          <LCSWConfigComponent\n            config={settings.lcswConfig}\n            onUpdate={(config) => setSettings({ ...settings, lcswConfig: config })}\n            onClose={() => setShowLCSWConfig(false)}\n            settings={settings}\n            onUpdateSettings={setSettings}\n          />\n        </Suspense>\n      )}\n\n        <footer className=\"py-4 text-center text-text-tertiary dark:text-text-tertiary text-[10px] font-medium tracking-wide\">\n          <p>Private & Secure. All AI processing happens on your device.</p>\n        </footer>\n      </div>\n    </ErrorBoundary>\n  );\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport { ThemeProvider } from './contexts/ThemeContext';\n\nconst rootElement = document.getElementById('root');\nif (!rootElement) {\n  throw new Error(\"Could not find root element to mount to\");\n}\n\nconst root = ReactDOM.createRoot(rootElement);\nroot.render(\n  <ThemeProvider>\n    <App />\n  </ThemeProvider>\n);"],"file":"assets/index-C1iKWUY7.js"}